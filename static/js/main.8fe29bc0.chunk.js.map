{"version":3,"sources":["../../react-smooth-dnd/index.ts","../../smooth-dnd/src/constants.ts","../../smooth-dnd/src/utils.ts","../../smooth-dnd/index.ts","../../smooth-dnd/src/interfaces.ts","../../smooth-dnd/src/defaults.ts","../../smooth-dnd/src/container.ts","../../smooth-dnd/src/styles.ts","../../smooth-dnd/src/dropHandlers.ts","../../smooth-dnd/src/mediator.ts","../../react-smooth-dnd/src/Container.tsx","../../react-smooth-dnd/src/Draggable.tsx","../../smooth-dnd/src/layoutManager.ts","../../smooth-dnd/src/scroller.ts","../../smooth-dnd/src/polyfills.ts","Vanilla.js","Nested.js","Tryout.js","demo/pages/utils.js","demo/pages/simple.js","demo/pages/simple-horizontal.js","demo/pages/groups.js","demo/pages/copy.js","demo/pages/horizontal.js","demo/pages/nested.js","demo/pages/form.js","demo/pages/nested-group.js","demo/pages/vanilla-nested.js","demo/pages/height.js","demo/pages/cards.js","demo/pages/lock-axis.js","demo/pages/drag-delay.js","demo/pages/drag-handle.js","demo/pages/drag-class.js","demo/pages/transition-duration.js","demo/pages/scroll-both.js","demo/pages/drop-zone.js","demo/pages/chess.js","demo/pages/index.js","demo/pages/dynamic-containers.js","demo/app/index.js","index.js"],"names":["_src_Container__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","d","__webpack_exports__","_src_Draggable__WEBPACK_IMPORTED_MODULE_1__","smooth_dnd__WEBPACK_IMPORTED_MODULE_2__","o","r","containerInstance","defaultGroupName","wrapperClass","defaultGrabHandleClass","animationClass","translationValue","visibilityValue","ghostClass","containerClass","extraSizeForInsertion","stretcherElementClass","stretcherElementInstance","isDraggableDetached","disbaleTouchActions","noUserSelectClass","preventAutoScrollClass","dropPlaceholderDefaultClass","dropPlaceholderInnerClass","dropPlaceholderWrapperClass","dropPlaceholderFlexContainerClass","getIntersectionOnAxis","rect1","rect2","axis","left","Math","max","top","right","min","bottom","getContainerRect","element","_rect","getBoundingClientRect","rect","hasBiggerChild","isScrollingOrHidden","width","scrollWidth","height","scrollHeight","getScrollingAxis","style","global","getComputedStyle","overflow","ScrollAxis","xy","overFlowX","xScroll","overFlowY","yScroll","x","y","isScrolling","overFlowAxis","concat","clientWidth","clientHeight","getVisibleRect","elementRect","currentElement","parentElement","getParentRelevantContainerElement","relevantContainers","current","_ret","container","some","p","v","_typeof","listenScrollParent","clb","scrollers","stop","forEach","removeEventListener","push","setScrollers","dispose","start","addEventListener","getParent","selector","matches","hasClass","cls","className","split","map","indexOf","addClass","classes","filter","unshift","join","removeClass","removeChildAt","parent","index","removeChild","children","addChildAt","child","length","appendChild","insertBefore","isMobile","window","navigator","userAgent","match","clearSelection","getSelection","empty","removeAllRanges","document","selection","getElementCursor","cursor","isVisible","_src_constants__WEBPACK_IMPORTED_MODULE_0__","_src_container__WEBPACK_IMPORTED_MODULE_1__","_src_dropHandlers__WEBPACK_IMPORTED_MODULE_2__","deprecetedDefaultExport","options","console","warn","undefined","dropHandler","wrapChild","defaultOptions","groupName","behaviour","orientation","getChildPayload","animationDuration","autoScrollEnabled","shouldAcceptDrop","shouldAnimateDrop","_constants__WEBPACK_IMPORTED_MODULE_0__","_defaults__WEBPACK_IMPORTED_MODULE_1__","_dropHandlers__WEBPACK_IMPORTED_MODULE_2__","_layoutManager__WEBPACK_IMPORTED_MODULE_3__","_mediator__WEBPACK_IMPORTED_MODULE_4__","_utils__WEBPACK_IMPORTED_MODULE_5__","setAnimation","add","arguments","transitionDuration","removeProperty","isDragRelevant","_ref","sourceContainer","payload","getOptions","sourceOptions","wrapChildren","draggables","Array","prototype","call","nodeType","Node","ELEMENT_NODE","wrapper","smoothDnD","div","createElement","findDraggebleAtPos","_ref2","layout","pos","withRespectToMiddlePoints","find","startIndex","endIndex","_layout$getBeginEnd","getBeginEnd","begin","end","middleIndex","floor","_layout$getBeginEnd2","handleDrop","_ref4","draggablesReset","_ref3","setTranslation","setVisibility","parentNode","resetDraggables","domDropHandler","draggableInfo","_ref5","addedIndex","removedIndex","forDispose","targetElement","removeOnDropOut","dropHandlerParams","onDrop","getContainerProps","initialOptions","props","Object","assign","initOptions","layoutManager","getRemovedItem","_ref6","prevRemovedIndex","_ref7","elementIndex","setRemovedItemVisibilty","_ref8","_ref9","dragResult","getPosition","_ref10","_ref11","hitElement","elementFromPoint","position","getElementSize","_ref12","elementSize","_ref13","getSize","size","handleTargetContainer","_ref14","_ref15","set","setTargetContainer","getDragInsertionIndexForDropZone","_ref18","getShadowBeginEndForDropZone","_ref19","prevAddedIndex","_ref20","_layout$getBeginEndOf","getBeginEndOfContainer","shadowBeginEnd","getTopLeftOfElementBegin","drawDropPreview","_ref21","_ref22","_ref22$dragResult","dropPlaceholderContainer","dropPlaceholder","_ref23","showOnTop","innerElement","flex","transition","setSize","pointerEvents","firstElementChild","dropArea","setBegin","invalidateShadowBeginEndIfNeeded","params","shadowBoundsGetter","getShadowBeginEnd","_ref24","invalidateShadow","getNextAddedIndex","getIndexForPos","_ref16","findDraggable","_ref17","_ref17$dragResult","beginAdjustment","getDragInsertionIndex","_ref25","resetShadowAdjustment","lastAddedIndex","_ref26","_ref26$dragResult","handleInsertionSizeChange","_ref27","strectherElement","_ref28","_ref28$dragResult","containerBeginEnd","containerEnd","getScrollSize","getScrollValue","lastDraggableEnd","stretcherSize","containerBoxChanged","toRemove","calculateTranslations","_ref29","_ref30","_ref30$dragResult","draggable","translate","_ref31","_ref32","beforeIndex","dropAreaBegin","dropAreaEnd","afterBounds","beforeBounds","beforeSize","threshold","afterIndex","afterSize","getContainerRectangles","shadowRectTopLeft","handleFirstInsertShadowAdjustment","_ref33","_ref33$dragResult","fireDragEnterLeaveEvents","_ref34","wasDragIn","_ref35","isDragIn","onDragLeave","dragLeft","onDragEnter","fireOnDropReady","_ref36","_ref37","_ref37$dragResult","_ref37$draggableInfo","onDropReady","adjustedAddedIndex","getDragHandler","compose","_len","functions","_key","hydratedFunctions","result","reduce","fn","Container","lastDraggableInfo","dragHandler","scrollListener","invalidateRects","processLastDraggableInfo","setDraggables","newDraggables","i","pop","prepareDrag","handleDrag","setTimeout","fireRemoveElement","getDragResult","getTranslateCalculator","dragresult","onTranslated","containerIniter","Mediator","register","unregister","verticalWrapperClass","display","horizontalWrapperClass","vertical-align","css","_defineProperty","_css","min-height","min-width","box-sizing","pointer-events","touch-actions","-ms-touch-actions","-webkit-touch-callout","-webkit-user-select","-khtml-user-select","-moz-user-select","-ms-user-select","user-select","justify-content","align-items","background-color","border","convertToCssString","keys","styleString","propName","propValue","addStyleToHead","head","getElementsByTagName","id","cssString","type","styleSheet","cssText","createTextNode","addCursorStyleToBody","body *","removeStyle","styleElement","reactDropHandler","_utils__WEBPACK_IMPORTED_MODULE_0__","_constants__WEBPACK_IMPORTED_MODULE_1__","dropResult","droppedElement","removedWrapper","splice","handler","_scroller__WEBPACK_IMPORTED_MODULE_2__","_styles__WEBPACK_IMPORTED_MODULE_4__","grabEvents","moveEvents","releaseEvents","dragListeningContainers","grabbedElement","ghostInfo","containers","isDragging","handleScroll","sourceContainerLockAxis","cursorStyleElement","containerRectableWatcher","animationHandle","requestAnimationFrame","cancelAnimationFrame","watchRectangles","Utils","listenEvents","e","onMouseDown","passive","getGhostParent","ghostParent","body","handleDragStartConditions","startEvent","delay","timer","moveThreshold","maxMoveInDelay","onMove","event","_getPointerEvent","getPointerEvent","currentX","clientX","currentY","clientY","abs","deregisterEvent","callCallback","onUp","onHTMLDrag","clearTimeout","_startEvent","_delay","_clb","button","target","constants","containerElement","dragHandleSelector","nonDragAreaSelector","startDrag","onMouseUp","dragBeginDelay","initiateDrag","onMouseMove","reset","callback","endDrop","ghost","animateGhostToPosition","duration","dropClass","disappearAnimation","opacity","transform","_container$getOptions","rectangles","visibleRect","lastVisibleRect","prevDraggableEnd","handleDropAnimation","fireOnDragStartEnd","containerToCallDrop","shift","touches","targetContainers","getScrollHandler","dragScroller","isStart","onDragStart","onDragEnd","isSource","willAcceptDrop","lockAxis","toLowerCase","draggableElement","draggableIndex","draggableRect","offsetHeight","offsetWidth","mousePosition","getDraggableInfo","wrapperElement","_wrapperElement$getBo","midX","midY","cloneNode","zIndex","boxSizing","userSelect","dragClass","dragCursor","centerDelta","positionDelta","getGhostElement","preventDefault","containerOptions","beginEnd","getBeginEndOfContainerVisibleRect","beginBoundary","endBoundary","positionInBoundary","registerContainer","indexInDragListeners","unregisterContainer","dropHandlers","_this","_classCallCheck","this","_getPrototypeOf","_assertThisInitialized","React","createRef","getContainerOptions","bind","getContainer","prevContainer","Component","render","containerRef","react__WEBPACK_IMPORTED_MODULE_0___default","a","ref","functionProps","PropTypes","oneOf","string","object","number","bool","func","oneOfType","shape","Draggable","cloneElement","clsName","_extends","_utils__WEBPACK_IMPORTED_MODULE_1__","horizontalMap","distanceToParent","dragPosition","scrollSize","offsetSize","scrollValue","scale","setters","val","verticalMap","_animationDuration","propMapper","get","obj","prop","value","orientationDependentProps","values","translation","invalidateContainerRectangles","invalidate","scaleX","scaleY","invalidateContainerScale","htmlElement","tagName","getAxisValue","getBeginEndOfDOMRect","getDistanceToOffsetParent","getTranslation","visibility","isInVisibleRect","_values$visibleRect","containerRect","setScrollValue","getScrollParams","scrollerSize","moveDistance","direction","speedFactor","createAnimator","isAnimating","request","startTime","speed","animate","_direction","_speed","timestamp","timeDiff","distanceDiff","scrollLeft","scrollTop","scrollBy","addScrollValue","rectangleGetter","animatorInfos","acc","filteredAnimators","scrollerAnimators","scrollingAxis","axisAnimations","animator","getRect","scrollerElement","getScrollerAnimator","q","_toConsumableArray","scrollParams","cachedRect","setScrollParams","_animator$axisAnimati","_x$scrollParams","_y$scrollParams","overlappingAnimators","topScrollerAnimator","scrollAnimator","getTopmostScrollAnimator","constructor","Element","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","s","ownerDocument","querySelectorAll","item","defineProperty","node","nodes","childNodes","fun","TypeError","t","len","thisArg","itemCls","margin","textAlign","applyDrag","arr","toConsumableArray","itemToAdd","generateItems","count","creator","Simple","classCallCheck","possibleConstructorReturn","getPrototypeOf","state","items","data","_this2","react_default","react_smooth_dnd","setState","key","SimpleScroller","_this3","_this4","groupStyle","overflowX","SimpleHorizontal","marginLeft","Groups","items1","items2","items3","items4","justifyContent","marginTop","marginRight","Copy","Nested","containerOnDrop","assertThisInitialized","containerOnDrop2","containerOnDrop3","padding","marginBottom","backgroundColor","j","newItems","id1","id2","form","label","name","cols","rows","selected","Form","generateForm","paddingBottom","lorem","columnNames","cardColors","pickColor","rand","random","Cards","onColumnDrop","onCardDrop","getCardPayload","scene","toFixed","slice","column","log","dropPlaceholderAnimationDuration","card","columnId","columnIndex","newColumn","LockAxis","DragDelay","DragHandle","float","DragClass","TransitionDuration","getUrl","pagename","pages","title","page","url","simples","App","toggleNav","renderMenu","openCode","navOpen","selectedPage","Page","onClick","src","alt","section","open","ReactDOM","demo_app","getElementById"],"mappings":"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","file":"static/js/main.8fe29bc0.chunk.js","sourcesContent":["import Container from './src/Container';\r\nimport Draggable from './src/Draggable';\r\n\r\nexport * from 'smooth-dnd';\r\n\r\nexport {\r\n  Container,\r\n  Draggable\r\n}","export const containerInstance = 'smooth-dnd-container-instance';\r\n\r\nexport const defaultGroupName = '@@smooth-dnd-default-group@@';\r\nexport const wrapperClass = 'smooth-dnd-draggable-wrapper';\r\nexport const defaultGrabHandleClass = 'smooth-dnd-default-grap-handle';\r\nexport const animationClass = 'animated';\r\nexport const translationValue = '__smooth_dnd_draggable_translation_value';\r\nexport const visibilityValue = '__smooth_dnd_draggable_visibility_value';\r\nexport const ghostClass = 'smooth-dnd-ghost';\r\n\r\nexport const containerClass = 'smooth-dnd-container';\r\n\r\nexport const extraSizeForInsertion = 'smooth-dnd-extra-size-for-insertion';\r\nexport const stretcherElementClass = 'smooth-dnd-stretcher-element';\r\nexport const stretcherElementInstance = 'smooth-dnd-stretcher-instance';\r\n\r\nexport const isDraggableDetached = 'smoth-dnd-is-draggable-detached';\r\n\r\nexport const disbaleTouchActions = 'smooth-dnd-disable-touch-action';\r\nexport const noUserSelectClass = 'smooth-dnd-no-user-select';\r\n\r\nexport const preventAutoScrollClass = 'smooth-dnd-prevent-auto-scroll-class';\r\n\r\nexport const dropPlaceholderDefaultClass = 'smooth-dnd-drop-preview-default-class';\r\nexport const dropPlaceholderInnerClass = 'smooth-dnd-drop-preview-inner-class';\r\nexport const dropPlaceholderWrapperClass = 'smooth-dnd-drop-preview-constant-class'\r\nexport const dropPlaceholderFlexContainerClass = 'smooth-dnd-drop-preview-flex-container-class'\r\n","import { Rect, Axis, ElementX, ScrollAxis, IContainer } from './interfaces';\r\nimport { containerInstance } from './constants';\r\n\r\ndeclare const global: any;\r\n\r\nexport const getIntersection = (rect1: Rect, rect2: Rect) => {\r\n  return {\r\n    left: Math.max(rect1.left, rect2.left),\r\n    top: Math.max(rect1.top, rect2.top),\r\n    right: Math.min(rect1.right, rect2.right),\r\n    bottom: Math.min(rect1.bottom, rect2.bottom),\r\n  };\r\n};\r\n\r\nexport const getIntersectionOnAxis = (rect1: Rect, rect2: Rect, axis: Axis) => {\r\n  if (axis === 'x') {\r\n    return {\r\n      left: Math.max(rect1.left, rect2.left),\r\n      top: rect1.top,\r\n      right: Math.min(rect1.right, rect2.right),\r\n      bottom: rect1.bottom,\r\n    };\r\n  } else {\r\n    return {\r\n      left: rect1.left,\r\n      top: Math.max(rect1.top, rect2.top),\r\n      right: rect1.right,\r\n      bottom: Math.min(rect1.bottom, rect2.bottom),\r\n    };\r\n  }\r\n};\r\n\r\nexport const getContainerRect = (element: HTMLElement): Rect => {\r\n  const _rect = element.getBoundingClientRect();\r\n  const rect = {\r\n    left: _rect.left,\r\n    right: _rect.right,\r\n    top: _rect.top,\r\n    bottom: _rect.bottom,\r\n  };\r\n\r\n  if (hasBiggerChild(element, 'x') && !isScrollingOrHidden(element, 'x')) {\r\n    const width = rect.right - rect.left;\r\n    rect.right = rect.right + element.scrollWidth - width;\r\n  }\r\n\r\n  if (hasBiggerChild(element, 'y') && !isScrollingOrHidden(element, 'y')) {\r\n    const height = rect.bottom - rect.top;\r\n    rect.bottom = rect.bottom + element.scrollHeight - height;\r\n  }\r\n\r\n  return rect;\r\n};\r\n\r\nexport const getScrollingAxis = (element: HTMLElement): ScrollAxis | null => {\r\n  const style = global.getComputedStyle(element);\r\n  const overflow = style['overflow'];\r\n  const general = overflow === 'auto' || overflow === 'scroll';\r\n  if (general) return ScrollAxis.xy;\r\n  const overFlowX = style[`overflow-x`];\r\n  const xScroll = overFlowX === 'auto' || overFlowX === 'scroll';\r\n  const overFlowY = style[`overflow-y`];\r\n  const yScroll = overFlowY === 'auto' || overFlowY === 'scroll';\r\n\r\n  if (xScroll && yScroll) return ScrollAxis.xy;\r\n  if (xScroll) return ScrollAxis.x;\r\n  if (yScroll) return ScrollAxis.y;\r\n  return null;\r\n};\r\n\r\nexport const isScrolling = (element: HTMLElement, axis: Axis) => {\r\n  const style = global.getComputedStyle(element);\r\n  const overflow = style['overflow'];\r\n  const overFlowAxis = style[`overflow-${axis}`];\r\n  const general = overflow === 'auto' || overflow === 'scroll';\r\n  const dimensionScroll = overFlowAxis === 'auto' || overFlowAxis === 'scroll';\r\n  return general || dimensionScroll;\r\n};\r\n\r\nexport const isScrollingOrHidden = (element: HTMLElement, axis: Axis) => {\r\n  const style = global.getComputedStyle(element);\r\n  const overflow = style['overflow'];\r\n  const overFlowAxis = style[`overflow-${axis}`];\r\n  const general = overflow === 'auto' || overflow === 'scroll' || overflow === 'hidden';\r\n  const dimensionScroll = overFlowAxis === 'auto' || overFlowAxis === 'scroll' || overFlowAxis === 'hidden';\r\n  return general || dimensionScroll;\r\n};\r\n\r\nexport const hasBiggerChild = (element: HTMLElement, axis: Axis) => {\r\n  if (axis === 'x') {\r\n    return element.scrollWidth > element.clientWidth;\r\n  } else {\r\n    return element.scrollHeight > element.clientHeight;\r\n  }\r\n};\r\n\r\nexport const hasScrollBar = (element: HTMLElement, axis: Axis) => {\r\n  return hasBiggerChild(element, axis) && isScrolling(element, axis);\r\n};\r\n\r\nexport const getVisibleRect = (element: HTMLElement, elementRect: Rect) => {\r\n  let currentElement = element;\r\n  let rect = elementRect || getContainerRect(element);\r\n  currentElement = element.parentElement!;\r\n  while (currentElement) {\r\n    if (hasBiggerChild(currentElement, 'x') && isScrollingOrHidden(currentElement, 'x')) {\r\n      rect = getIntersectionOnAxis(rect, currentElement.getBoundingClientRect(), 'x');\r\n    }\r\n\r\n    if (hasBiggerChild(currentElement, 'y') && isScrollingOrHidden(currentElement, 'y')) {\r\n      rect = getIntersectionOnAxis(rect, currentElement.getBoundingClientRect(), 'y');\r\n    }\r\n\r\n    currentElement = currentElement.parentElement!;\r\n  }\r\n\r\n  return rect;\r\n};\r\n\r\nexport const getParentRelevantContainerElement = (element: Element, relevantContainers: IContainer[]) => {\r\n  let current: ElementX = element as ElementX;\r\n\r\n  while (current) {\r\n    if ((current as ElementX)[containerInstance]) {\r\n      const container = current[containerInstance];\r\n      if (relevantContainers.some(p => p === container)) {\r\n        return container;\r\n      }\r\n    }\r\n    current = current.parentElement as ElementX;\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nexport const listenScrollParent = (element: HTMLElement, clb: () => void) => {\r\n  let scrollers: HTMLElement[] = [];\r\n\r\n  setScrollers();\r\n\r\n  function setScrollers() {\r\n    let currentElement = element;\r\n    while (currentElement) {\r\n      if (isScrolling(currentElement, 'x') || isScrolling(currentElement, 'y')) {\r\n        scrollers.push(currentElement);\r\n      }\r\n      currentElement = currentElement.parentElement!;\r\n    }\r\n  }\r\n\r\n  function dispose() {\r\n    stop();\r\n    scrollers = null!;\r\n  };\r\n\r\n  function start() {\r\n    if (scrollers) {\r\n      scrollers.forEach(p => p.addEventListener('scroll', clb));\r\n      global.addEventListener('scroll', clb);\r\n    }\r\n  }\r\n\r\n  function stop() {\r\n    if (scrollers) {\r\n      scrollers.forEach(p => p.removeEventListener('scroll', clb));\r\n      global.removeEventListener('scroll', clb);\r\n    }\r\n  }\r\n\r\n  return {\r\n    dispose,\r\n    start,\r\n    stop\r\n  };\r\n};\r\n\r\nexport const hasParent = (element: HTMLElement, parent: HTMLElement) => {\r\n  let current: HTMLElement | null = element;\r\n  while (current) {\r\n    if (current === parent) {\r\n      return true;\r\n    }\r\n    current = current.parentElement;\r\n  }\r\n  return false;\r\n};\r\n\r\nexport const getParent = (element: Element | null, selector: string) => {\r\n  let current: Element | null = element;\r\n  while (current) {\r\n    if (current.matches(selector)) {\r\n      return current;\r\n    }\r\n    current = current.parentElement;\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nexport const hasClass = (element: HTMLElement, cls: string) => {\r\n  return (\r\n    element.className\r\n      .split(' ')\r\n      .map(p => p)\r\n      .indexOf(cls) > -1\r\n  );\r\n};\r\n\r\nexport const addClass = (element: Element | null | undefined, cls: string) => {\r\n  if (element) {\r\n    const classes = element.className.split(' ').filter(p => p);\r\n    if (classes.indexOf(cls) === -1) {\r\n      classes.unshift(cls);\r\n      element.className = classes.join(' ');\r\n    }\r\n  }\r\n};\r\n\r\nexport const removeClass = (element: HTMLElement, cls: string) => {\r\n  if (element) {\r\n    const classes = element.className.split(' ').filter(p => p && p !== cls);\r\n    element.className = classes.join(' ');\r\n  }\r\n};\r\n\r\nexport const debounce = (fn: Function, delay: number, immediate: boolean) => {\r\n  let timer: any = null;\r\n  return (...params: any[]) => {\r\n    if (timer) {\r\n      clearTimeout(timer);\r\n    }\r\n    if (immediate && !timer) {\r\n      fn.call(null, ...params);\r\n    } else {\r\n      timer = setTimeout(() => {\r\n        timer = null;\r\n        fn.call(null, ...params);\r\n      }, delay);\r\n    }\r\n  };\r\n};\r\n\r\nexport const removeChildAt = (parent: HTMLElement, index: number) => {\r\n  return parent.removeChild(parent.children[index]);\r\n};\r\n\r\nexport const addChildAt = (parent: HTMLElement, child: HTMLElement, index: number) => {\r\n  if (index >= parent.children.length) {\r\n    parent.appendChild(child);\r\n  } else {\r\n    parent.insertBefore(child, parent.children[index]);\r\n  }\r\n};\r\n\r\nexport const isMobile = () => {\r\n  if (typeof window !== 'undefined') {\r\n    if (\r\n      global.navigator.userAgent.match(/Android/i) ||\r\n      global.navigator.userAgent.match(/webOS/i) ||\r\n      global.navigator.userAgent.match(/iPhone/i) ||\r\n      global.navigator.userAgent.match(/iPad/i) ||\r\n      global.navigator.userAgent.match(/iPod/i) ||\r\n      global.navigator.userAgent.match(/BlackBerry/i) ||\r\n      global.navigator.userAgent.match(/Windows Phone/i)\r\n    ) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n  return false;\r\n};\r\n\r\nexport const clearSelection = () => {\r\n  if (global.getSelection) {\r\n    if (global.getSelection().empty) {\r\n      // Chrome\r\n      global.getSelection().empty();\r\n    } else if (global.getSelection().removeAllRanges) {\r\n      // Firefox\r\n      global.getSelection().removeAllRanges();\r\n    }\r\n  } else if (global.document.selection) {\r\n    // IE?\r\n    global.document.selection.empty();\r\n  }\r\n};\r\n\r\nexport const getElementCursor = (element: Element | null) => {\r\n  if (element) {\r\n    const style = global.getComputedStyle(element);\r\n    if (style) {\r\n      return style.cursor;\r\n    }\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\n\r\nexport const getDistanceToParent = (parent: HTMLElement, child: HTMLElement): number | null => {\r\n  let current: Element | null = child;\r\n  let dist = 0;\r\n  while (current) {\r\n    if (current === parent) {\r\n      return dist;\r\n    }\r\n    dist++;\r\n    current = current.parentElement;\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nexport function isVisible(rect: Rect): boolean {\r\n  return !(rect.bottom <= rect.top || rect.right <= rect.left);\r\n}","import * as constants from './src/constants';\r\nimport container from './src/container';\r\nimport * as dropHandlers from './src/dropHandlers';\r\nimport { SmoothDnDCreator, ContainerOptions } from './src/exportTypes';\r\nimport { ElementX } from './src/interfaces';\r\n\r\nexport * from './src/exportTypes';\r\n\r\nexport {\r\n    container as smoothDnD,\r\n    constants,\r\n    dropHandlers,\r\n};\r\n\r\nconst deprecetedDefaultExport: SmoothDnDCreator = function(element: ElementX, options?: ContainerOptions) {\r\n    console.warn('default export is deprecated. please use named export \"smoothDnD\"');\r\n\r\n    if (deprecetedDefaultExport.dropHandler !== undefined) {\r\n        container.dropHandler = deprecetedDefaultExport.dropHandler;\r\n    }\r\n\r\n    if (deprecetedDefaultExport.wrapChild !== undefined) {\r\n        container.wrapChild = deprecetedDefaultExport.wrapChild;\r\n    }\r\n\r\n    return container(element, options);\r\n};\r\n\r\nexport default deprecetedDefaultExport;\r\n","import layoutManager from './layoutManager';\r\nimport { ContainerOptions } from './exportTypes';\r\n\r\nexport type Position = { x: number; y: number };\r\nexport type MousePosition = { clientX: number; clientY: number };\r\nexport interface Rect {\r\n  left: number;\r\n  right: number;\r\n  top: number;\r\n  bottom: number;\r\n}\r\n\r\nexport type OffsetSize = { offsetWidth: number; offsetHeight: number }\r\n\r\nexport type Axis = 'x' | 'y';\r\nexport enum ScrollAxis {\r\n  x = 'x',\r\n  y = 'y',\r\n  xy = 'xy'\r\n}\r\nexport type Boundary = { begin: number; end: number };\r\nexport type TopLeft = { top: number; left: number };\r\n\r\nexport type Dictionary = { [key: string]: any };\r\nexport type Orientation = 'horizontal' | 'vertical';\r\nexport type ElementX = HTMLElement & Dictionary;\r\n\r\nexport interface ScrolableInfo {\r\n  element: HTMLElement;\r\n  getRect: () => Rect;\r\n  descendants: ScrolableInfo[];\r\n  axis: Axis;\r\n}\r\n\r\n\r\nexport interface DragInfo {\r\n  dragResult: DragResult;\r\n  draggableInfo: DraggableInfo;\r\n}\r\n\r\nexport interface DragResult {\r\n  pos: number;\r\n  addedIndex: number | null;\r\n  removedIndex: number | null;\r\n  elementSize: number;\r\n  shadowBeginEnd: Boundary & { beginAdjustment: number; rect?: TopLeft, dropArea?: Boundary };\r\n  dragLeft?: boolean;\r\n  containerBoxChanged?: boolean;\r\n  dropPlaceholderContainer?: HTMLDivElement;\r\n}\r\n\r\nexport interface DraggableInfo {\r\n  invalidateShadow: boolean | null;\r\n  targetElement: HTMLElement | null;\r\n  payload?: any;\r\n  element?: HTMLElement;\r\n  size: OffsetSize;\r\n  container: IContainer;\r\n  elementIndex: number;\r\n  position: Position;\r\n  mousePosition: Position;\r\n  groupName?: string;\r\n  ghostParent: HTMLElement | null;\r\n  relevantContainers: IContainer[];\r\n}\r\n\r\nexport interface ContainerProps {\r\n  element: ElementX;\r\n  draggables: ElementX[];\r\n  options: ContainerOptions;\r\n  layout: ReturnType<typeof layoutManager>;\r\n}\r\n\r\nexport interface IContainer {\r\n  element: HTMLElement;\r\n  draggables: HTMLElement[];\r\n  layout: ReturnType<typeof layoutManager>;\r\n  isDragRelevant: (sourceContainer: IContainer, payload: any) => boolean;\r\n  dispose: (container: IContainer) => void;\r\n  prepareDrag: (container: IContainer, relevantContainer: IContainer[]) => void;\r\n  handleDrag: (draggableInfo: DraggableInfo) => DragResult | null;\r\n  handleDrop: (draggableInfo: DraggableInfo) => void;\r\n  getDragResult: () => DragResult | null;\r\n  getTranslateCalculator: (info: { dragResult: DragResult }) => any;\r\n  onTranslated: () => void;\r\n  getOptions: () => ContainerOptions;\r\n  setDraggables: () => void;\r\n  fireRemoveElement: () => void;\r\n}\r\n\r\nexport interface GhostInfo {\r\n  ghost: HTMLElement;\r\n  centerDelta: Position;\r\n  positionDelta: { left: number; top: number };\r\n}\r\n","import { ContainerOptions } from \"./exportTypes\";\r\n\r\nexport const defaultOptions: ContainerOptions = {\r\n\tgroupName: undefined,\r\n\tbehaviour: 'move', // move | copy\r\n\torientation: 'vertical', // vertical | horizontal\r\n\tgetChildPayload: undefined,\r\n\tanimationDuration: 250,\r\n\tautoScrollEnabled: true,\r\n\tshouldAcceptDrop: undefined,\r\n\tshouldAnimateDrop: undefined,\r\n};","import { animationClass, containerClass, containerInstance, dropPlaceholderFlexContainerClass, dropPlaceholderInnerClass, dropPlaceholderWrapperClass, stretcherElementClass, stretcherElementInstance, translationValue, wrapperClass, dropPlaceholderDefaultClass } from './constants';\r\nimport { defaultOptions } from './defaults';\r\nimport { domDropHandler } from './dropHandlers';\r\nimport { ContainerOptions, SmoothDnD, SmoothDnDCreator } from './exportTypes';\r\nimport { ContainerProps, DraggableInfo, DragInfo, DragResult, ElementX, IContainer } from './interfaces';\r\nimport layoutManager from './layoutManager';\r\nimport Mediator from './mediator';\r\nimport { addClass, getParent, getParentRelevantContainerElement, hasClass, listenScrollParent, removeClass } from './utils';\r\n\r\nfunction setAnimation(element: HTMLElement, add: boolean, animationDuration = defaultOptions.animationDuration) {\r\n  if (add) {\r\n    addClass(element, animationClass);\r\n    element.style.transitionDuration = animationDuration + 'ms';\r\n  } else {\r\n    removeClass(element, animationClass);\r\n    element.style.removeProperty('transition-duration');\r\n  }\r\n}\r\n\r\nfunction initOptions(props = defaultOptions): ContainerOptions {\r\n  return Object.assign({}, defaultOptions, props);\r\n}\r\n\r\nfunction isDragRelevant({ element, options }: ContainerProps) {\r\n  return function (sourceContainer: IContainer, payload: any) {\r\n    if (options.shouldAcceptDrop) {\r\n      return options.shouldAcceptDrop(sourceContainer.getOptions(), payload);\r\n    }\r\n    const sourceOptions = sourceContainer.getOptions();\r\n    if (options.behaviour === 'copy') return false;\r\n\r\n    const parentWrapper = getParent(element, '.' + wrapperClass);\r\n    if (parentWrapper === sourceContainer.element) {\r\n      return false;\r\n    }\r\n\r\n    if (sourceContainer.element === element) return true;\r\n    if (sourceOptions.groupName && sourceOptions.groupName === options.groupName) return true;\r\n\r\n    return false;\r\n  };\r\n}\r\n\r\nfunction wrapChild(child: HTMLElement) {\r\n  if (smoothDnD.wrapChild) {\r\n    const div = global.document.createElement('div');\r\n    div.className = `${wrapperClass}`;\r\n    child.parentElement!.insertBefore(div, child);\r\n    div.appendChild(child);\r\n    return div;\r\n  }\r\n\r\n  return child;\r\n}\r\n\r\nfunction wrapChildren(element: HTMLElement) {\r\n  const draggables: ElementX[] = [];\r\n  Array.prototype.forEach.call(element.children, (child: ElementX) => {\r\n    if (child.nodeType === Node.ELEMENT_NODE) {\r\n      let wrapper = child;\r\n      if (!hasClass(child, wrapperClass)) {\r\n        wrapper = wrapChild(child);\r\n      }\r\n      wrapper[translationValue] = 0;\r\n      draggables.push(wrapper);\r\n    } else {\r\n      element.removeChild(child);\r\n    }\r\n  });\r\n  return draggables;\r\n}\r\n\r\nfunction unwrapChildren(element: HTMLElement) {\r\n  if (smoothDnD.wrapChild) {\r\n    Array.prototype.forEach.call(element.children, (child: HTMLElement) => {\r\n      if (child.nodeType === Node.ELEMENT_NODE) {\r\n        if (hasClass(child, wrapperClass)) {\r\n          element.insertBefore(child.firstElementChild as HTMLElement, child);\r\n          element.removeChild(child);\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction findDraggebleAtPos({ layout }: { layout: ReturnType<typeof layoutManager> }) {\r\n  const find = (\r\n    draggables: HTMLElement[],\r\n    pos: number,\r\n    startIndex: number,\r\n    endIndex: number,\r\n    withRespectToMiddlePoints = false\r\n  ): number | null => {\r\n    if (endIndex < startIndex) {\r\n      return startIndex;\r\n    }\r\n    // binary serach draggable\r\n    if (startIndex === endIndex) {\r\n      let { begin, end } = layout.getBeginEnd(draggables[startIndex]);\r\n      // mouse pos is inside draggable\r\n      // now decide which index to return\r\n      if (pos > begin && pos <= end) {\r\n        if (withRespectToMiddlePoints) {\r\n          return pos < (end + begin) / 2 ? startIndex : startIndex + 1;\r\n        } else {\r\n          return startIndex;\r\n        }\r\n      } else {\r\n        return null;\r\n      }\r\n    } else {\r\n      const middleIndex = Math.floor((endIndex + startIndex) / 2);\r\n      const { begin, end } = layout.getBeginEnd(draggables[middleIndex]);\r\n      if (pos < begin) {\r\n        return find(draggables, pos, startIndex, middleIndex - 1, withRespectToMiddlePoints);\r\n      } else if (pos > end) {\r\n        return find(draggables, pos, middleIndex + 1, endIndex, withRespectToMiddlePoints);\r\n      } else {\r\n        if (withRespectToMiddlePoints) {\r\n          return pos < (end + begin) / 2 ? middleIndex : middleIndex + 1;\r\n        } else {\r\n          return middleIndex;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  return (draggables: HTMLElement[], pos: number, withRespectToMiddlePoints = false) => {\r\n    return find(draggables, pos, 0, draggables.length - 1, withRespectToMiddlePoints);\r\n  };\r\n}\r\n\r\nfunction resetDraggables({ element, draggables, layout }: ContainerProps) {\r\n  return function () {\r\n    draggables.forEach((p: ElementX) => {\r\n      setAnimation(p, false);\r\n      layout.setTranslation(p, 0);\r\n      layout.setVisibility(p, true);\r\n    });\r\n\r\n    if (element[stretcherElementInstance]) {\r\n      element[stretcherElementInstance].parentNode.removeChild(element[stretcherElementInstance]);\r\n      element[stretcherElementInstance] = null;\r\n    }\r\n  };\r\n}\r\n\r\nfunction setTargetContainer(draggableInfo: DraggableInfo, element: HTMLElement, set = true) {\r\n  if (element && set) {\r\n    draggableInfo.targetElement = element;\r\n  } else {\r\n    if (draggableInfo.targetElement === element) {\r\n      draggableInfo.targetElement = null;\r\n    }\r\n  }\r\n}\r\n\r\nfunction handleDrop({ element, draggables, layout, options }: ContainerProps) {\r\n  const draggablesReset = resetDraggables({ element, draggables, layout, options });\r\n  const dropHandler = (smoothDnD.dropHandler || domDropHandler)({ element, draggables, layout, options });\r\n  return function (draggableInfo: DraggableInfo, { addedIndex, removedIndex }: DragResult, forDispose: boolean = false) {\r\n    draggablesReset();\r\n    // if drop zone is valid => complete drag else do nothing everything will be reverted by draggablesReset()\r\n    if (draggableInfo.targetElement || options.removeOnDropOut || forDispose) {\r\n      let actualAddIndex =\r\n        addedIndex !== null ? (removedIndex !== null && removedIndex < addedIndex ? addedIndex - 1 : addedIndex) : null;\r\n      const dropHandlerParams = {\r\n        removedIndex,\r\n        addedIndex: actualAddIndex,\r\n        payload: draggableInfo.payload,\r\n        // droppedElement: draggableInfo.element.firstElementChild,\r\n      };\r\n      dropHandler(dropHandlerParams, options.onDrop);\r\n    }\r\n  };\r\n}\r\n\r\nfunction getContainerProps(element: HTMLElement, initialOptions?: ContainerOptions): ContainerProps {\r\n  const options = initOptions(initialOptions);\r\n  const draggables = wrapChildren(element);\r\n  // set flex classes before layout is inited for scroll listener\r\n  addClass(element, `${containerClass} ${options.orientation}`);\r\n  const layout = layoutManager(element, options.orientation!, options.animationDuration!);\r\n  return {\r\n    element,\r\n    draggables,\r\n    options,\r\n    layout,\r\n  };\r\n}\r\n\r\nfunction getRemovedItem({ element, options }: ContainerProps) {\r\n  let prevRemovedIndex: number | null = null;\r\n  return ({ draggableInfo }: DragInfo) => {\r\n    let removedIndex = prevRemovedIndex;\r\n    if (prevRemovedIndex == null && draggableInfo.container.element === element && options.behaviour !== 'copy') {\r\n      removedIndex = prevRemovedIndex = draggableInfo.elementIndex;\r\n    }\r\n\r\n    return { removedIndex };\r\n  };\r\n}\r\n\r\nfunction setRemovedItemVisibilty({ draggables, layout }: ContainerProps) {\r\n  return ({ dragResult }: DragInfo) => {\r\n    if (dragResult.removedIndex !== null) {\r\n      layout.setVisibility(draggables[dragResult.removedIndex], false);\r\n    }\r\n  };\r\n}\r\n\r\nfunction getPosition({ element, layout }: ContainerProps) {\r\n  return ({ draggableInfo }: DragInfo) => {\r\n    const hitElement = document.elementFromPoint(draggableInfo.position.x, draggableInfo.position.y);\r\n\r\n    if (hitElement) {\r\n      const container: IContainer = getParentRelevantContainerElement(hitElement, draggableInfo.relevantContainers);\r\n      if (container && container.element === element) {\r\n        return {\r\n          pos: layout.getPosition(draggableInfo.position),\r\n        }\r\n      }\r\n    }\r\n\r\n    return {\r\n      pos: null,\r\n    };\r\n  };\r\n}\r\n\r\nfunction getElementSize({ layout }: ContainerProps) {\r\n  let elementSize: number | null = null;\r\n  return ({ draggableInfo, dragResult }: DragInfo) => {\r\n    if (dragResult.pos === null) {\r\n      return (elementSize = null);\r\n    } else {\r\n      elementSize = elementSize || layout.getSize(draggableInfo.size);\r\n    }\r\n    return { elementSize };\r\n  };\r\n}\r\n\r\nfunction handleTargetContainer({ element }: ContainerProps) {\r\n  return ({ draggableInfo, dragResult }: DragInfo) => {\r\n    setTargetContainer(draggableInfo, element, !!dragResult.pos);\r\n  };\r\n}\r\n\r\nfunction getDragInsertionIndex({ draggables, layout }: ContainerProps) {\r\n  const findDraggable = findDraggebleAtPos({ layout });\r\n  return ({ dragResult: { shadowBeginEnd, pos } }: { dragResult: DragResult }) => {\r\n    if (!shadowBeginEnd) {\r\n      const index = findDraggable(draggables, pos, true);\r\n      return index !== null ? index : draggables.length;\r\n    } else {\r\n      if (shadowBeginEnd.begin + shadowBeginEnd.beginAdjustment <= pos && shadowBeginEnd.end >= pos) {\r\n        // position inside ghost\r\n        return null;\r\n      }\r\n    }\r\n\r\n    if (pos < shadowBeginEnd.begin + shadowBeginEnd.beginAdjustment) {\r\n      return findDraggable(draggables, pos);\r\n    } else if (pos > shadowBeginEnd.end) {\r\n      return findDraggable(draggables, pos)! + 1;\r\n    } else {\r\n      return draggables.length;\r\n    }\r\n  };\r\n}\r\n\r\nfunction getDragInsertionIndexForDropZone() {\r\n  return ({ dragResult: { pos } }: DragInfo) => {\r\n    return pos !== null ? { addedIndex: 0 } : { addedIndex: null };\r\n  };\r\n}\r\n\r\nfunction getShadowBeginEndForDropZone({ draggables, layout }: ContainerProps) {\r\n  let prevAddedIndex: number | null = null;\r\n  return ({ dragResult: { addedIndex } }: DragInfo) => {\r\n    if (addedIndex !== prevAddedIndex) {\r\n      prevAddedIndex = addedIndex;\r\n      const { begin, end } = layout.getBeginEndOfContainer();\r\n      return {\r\n        shadowBeginEnd: {\r\n          rect: layout.getTopLeftOfElementBegin(begin),\r\n        },\r\n      };\r\n    }\r\n\r\n    return null;\r\n  };\r\n}\r\n\r\nfunction drawDropPreview({ layout, element, options }: ContainerProps) {\r\n  let prevAddedIndex: number | null = null;\r\n  return ({ dragResult: {elementSize, shadowBeginEnd, addedIndex, dropPlaceholderContainer }}: DragInfo) => {\r\n    if (options.dropPlaceholder) {\r\n      const { animationDuration, className, showOnTop } = typeof options.dropPlaceholder === 'boolean' ? {} as any : options.dropPlaceholder;\r\n      if (addedIndex !== null) {\r\n        if (!dropPlaceholderContainer) {\r\n          const innerElement = document.createElement('div');\r\n          const flex = document.createElement('div');\r\n          flex.className = dropPlaceholderFlexContainerClass;\r\n          innerElement.className = `${dropPlaceholderInnerClass} ${className || dropPlaceholderDefaultClass}`\r\n          dropPlaceholderContainer = document.createElement('div') as HTMLDivElement;\r\n          dropPlaceholderContainer.className = `${dropPlaceholderWrapperClass}`;\r\n          dropPlaceholderContainer.style.position = 'absolute';\r\n\r\n          if (animationDuration !== undefined) {\r\n            dropPlaceholderContainer.style.transition = `all ${animationDuration}ms ease`;\r\n          }\r\n\r\n          dropPlaceholderContainer.appendChild(flex);\r\n          flex.appendChild(innerElement);\r\n          layout.setSize(dropPlaceholderContainer.style, elementSize + 'px');\r\n\r\n          dropPlaceholderContainer.style.pointerEvents = 'none';\r\n\r\n          if (showOnTop) {\r\n            element.appendChild(dropPlaceholderContainer);\r\n          } else {\r\n            element.insertBefore(dropPlaceholderContainer, element.firstElementChild);\r\n          }\r\n        }\r\n\r\n        if (prevAddedIndex !== addedIndex && shadowBeginEnd.dropArea) {\r\n           layout.setBegin(dropPlaceholderContainer.style, (shadowBeginEnd.dropArea.begin) - layout.getBeginEndOfContainer().begin + 'px');\r\n        }\r\n        prevAddedIndex = addedIndex;\r\n\r\n        return {\r\n          dropPlaceholderContainer\r\n        }\r\n      } else {\r\n        if (dropPlaceholderContainer && prevAddedIndex !== null) {\r\n          element.removeChild(dropPlaceholderContainer!);\r\n        }\r\n        prevAddedIndex = null;\r\n\r\n        return {\r\n          dropPlaceholderContainer: undefined\r\n        }\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n}\r\n\r\nfunction invalidateShadowBeginEndIfNeeded(params: ContainerProps) {\r\n  const shadowBoundsGetter = getShadowBeginEnd(params);\r\n  return ({ draggableInfo, dragResult }: DragInfo) => {\r\n    if (draggableInfo.invalidateShadow) {\r\n      return shadowBoundsGetter({ draggableInfo, dragResult });\r\n    }\r\n    return null;\r\n  };\r\n}\r\n\r\nfunction getNextAddedIndex(params: ContainerProps) {\r\n  const getIndexForPos = getDragInsertionIndex(params);\r\n  return ({ dragResult }: DragInfo) => {\r\n    let index = null;\r\n    if (dragResult.pos !== null) {\r\n      index = getIndexForPos({ dragResult });\r\n      if (index === null) {\r\n        index = dragResult.addedIndex;\r\n      }\r\n    }\r\n    return {\r\n      addedIndex: index,\r\n    };\r\n  };\r\n}\r\n\r\nfunction resetShadowAdjustment() {\r\n  let lastAddedIndex: number | null = null;\r\n  return ({ dragResult: { addedIndex, shadowBeginEnd } }: DragInfo) => {\r\n    if (addedIndex !== lastAddedIndex && lastAddedIndex !== null && shadowBeginEnd) {\r\n      shadowBeginEnd.beginAdjustment = 0;\r\n    }\r\n    lastAddedIndex = addedIndex;\r\n  };\r\n}\r\n\r\nfunction handleInsertionSizeChange({ element, draggables, layout, options }: ContainerProps) {\r\n  let strectherElement: HTMLElement | null = null;\r\n  return function ({ dragResult: { addedIndex, removedIndex, elementSize } }: DragInfo) {\r\n    if (removedIndex === null) {\r\n      if (addedIndex !== null) {\r\n        if (!strectherElement) {\r\n          const containerBeginEnd = layout.getBeginEndOfContainer();\r\n          containerBeginEnd.end = containerBeginEnd.begin + layout.getSize(element);\r\n          const hasScrollBar = layout.getScrollSize(element) > layout.getSize(element);\r\n          const containerEnd = hasScrollBar\r\n            ? containerBeginEnd.begin + layout.getScrollSize(element) - layout.getScrollValue(element)\r\n            : containerBeginEnd.end;\r\n          const lastDraggableEnd =\r\n            draggables.length > 0\r\n              ? layout.getBeginEnd(draggables[draggables.length - 1]).end - draggables[draggables.length - 1][translationValue]\r\n              : containerBeginEnd.begin;\r\n          if (lastDraggableEnd + elementSize > containerEnd) {\r\n            strectherElement = global.document.createElement('div') as HTMLElement;\r\n            strectherElement.className = stretcherElementClass + ' ' + options.orientation;\r\n            const stretcherSize = draggables.length > 0 ? elementSize + lastDraggableEnd - containerEnd : elementSize;\r\n            layout.setSize(strectherElement.style, `${stretcherSize}px`);\r\n            element.appendChild(strectherElement);\r\n            element[stretcherElementInstance] = strectherElement;\r\n            return {\r\n              containerBoxChanged: true,\r\n            };\r\n          }\r\n        }\r\n      } else {\r\n        if (strectherElement) {\r\n          layout.setTranslation(strectherElement, 0);\r\n          let toRemove = strectherElement;\r\n          strectherElement = null;\r\n          element.removeChild(toRemove);\r\n          element[stretcherElementInstance] = null;\r\n          return {\r\n            containerBoxChanged: true,\r\n          };\r\n        }\r\n      }\r\n    }\r\n\r\n    return undefined;\r\n  };\r\n}\r\n\r\nfunction calculateTranslations({ draggables, layout }: ContainerProps) {\r\n  let prevAddedIndex: number | null = null;\r\n  let prevRemovedIndex: number | null = null;\r\n  return function ({ dragResult: { addedIndex, removedIndex, elementSize } }: { dragResult: DragResult }) {\r\n    if (addedIndex !== prevAddedIndex || removedIndex !== prevRemovedIndex) {\r\n      for (let index = 0; index < draggables.length; index++) {\r\n        if (index !== removedIndex) {\r\n          const draggable = draggables[index];\r\n          let translate = 0;\r\n          if (removedIndex !== null && removedIndex < index) {\r\n            translate -= elementSize;\r\n          }\r\n          if (addedIndex !== null && addedIndex <= index) {\r\n            translate += elementSize;\r\n          }\r\n          layout.setTranslation(draggable, translate);\r\n        }\r\n      }\r\n\r\n      prevAddedIndex = addedIndex;\r\n      prevRemovedIndex = removedIndex;\r\n\r\n      return { addedIndex, removedIndex };\r\n    }\r\n\r\n    return undefined;\r\n  };\r\n}\r\n\r\nfunction getShadowBeginEnd({ draggables, layout }: ContainerProps) {\r\n  let prevAddedIndex: number | null = null;\r\n  return ({ draggableInfo, dragResult }: DragInfo) => {\r\n    const { addedIndex, removedIndex, elementSize, pos, shadowBeginEnd } = dragResult;\r\n    if (pos !== null) {\r\n      if (addedIndex !== null && (draggableInfo.invalidateShadow || addedIndex !== prevAddedIndex)) {\r\n        // if (prevAddedIndex) prevAddedIndex = addedIndex;\r\n        let beforeIndex = addedIndex - 1;\r\n        let begin = 0;\r\n        let dropAreaBegin = 0;\r\n        let dropAreaEnd = 0;\r\n        let afterBounds = null;\r\n        let beforeBounds = null;\r\n        if (beforeIndex === removedIndex) {\r\n          beforeIndex--;\r\n        }\r\n        if (beforeIndex > -1) {\r\n          const beforeSize = layout.getSize(draggables[beforeIndex]);\r\n          beforeBounds = layout.getBeginEnd(draggables[beforeIndex]);\r\n          if (elementSize < beforeSize) {\r\n            const threshold = (beforeSize - elementSize) / 2;\r\n            begin = beforeBounds.end - threshold;\r\n          } else {\r\n            begin = beforeBounds.end;\r\n          }\r\n          dropAreaBegin = beforeBounds.end;\r\n        } else {\r\n          beforeBounds = { end: layout.getBeginEndOfContainer().begin };\r\n          dropAreaBegin = layout.getBeginEndOfContainer().begin;\r\n        }\r\n\r\n        let end = 10000;\r\n        let afterIndex = addedIndex;\r\n        if (afterIndex === removedIndex) {\r\n          afterIndex++;\r\n        }\r\n        if (afterIndex < draggables.length) {\r\n          const afterSize = layout.getSize(draggables[afterIndex]);\r\n          afterBounds = layout.getBeginEnd(draggables[afterIndex]);\r\n\r\n          if (elementSize < afterSize) {\r\n            const threshold = (afterSize - elementSize) / 2;\r\n            end = afterBounds.begin + threshold;\r\n          } else {\r\n            end = afterBounds.begin;\r\n          }\r\n          dropAreaEnd = afterBounds.begin;\r\n        } else {\r\n          afterBounds = { begin: layout.getContainerRectangles().rect.end };\r\n          dropAreaEnd = layout.getContainerRectangles().rect.end - layout.getContainerRectangles().rect.begin;\r\n        }\r\n\r\n        const shadowRectTopLeft = beforeBounds && afterBounds ? layout.getTopLeftOfElementBegin(beforeBounds.end) : null;\r\n\r\n        prevAddedIndex = addedIndex;\r\n        return {\r\n          shadowBeginEnd: {\r\n            dropArea: {\r\n              begin: dropAreaBegin,\r\n              end: dropAreaEnd,\r\n            },\r\n            begin,\r\n            end,\r\n            rect: shadowRectTopLeft,\r\n            beginAdjustment: shadowBeginEnd ? shadowBeginEnd.beginAdjustment : 0,\r\n          },\r\n        };\r\n\r\n      } else {\r\n        return null;\r\n      }\r\n    } else {\r\n      prevAddedIndex = null;\r\n      return {\r\n        shadowBeginEnd: null,\r\n      };\r\n    }\r\n  };\r\n}\r\n\r\nfunction handleFirstInsertShadowAdjustment() {\r\n  let lastAddedIndex: number | null = null;\r\n  return ({ dragResult: { pos, addedIndex, shadowBeginEnd } }: DragInfo) => {\r\n    if (pos !== null) {\r\n      if (addedIndex != null && lastAddedIndex === null) {\r\n        if (pos < shadowBeginEnd.begin) {\r\n          const beginAdjustment = pos - shadowBeginEnd.begin - 5;\r\n          shadowBeginEnd.beginAdjustment = beginAdjustment;\r\n        }\r\n        lastAddedIndex = addedIndex;\r\n      }\r\n    } else {\r\n      lastAddedIndex = null;\r\n    }\r\n  };\r\n}\r\n\r\nfunction fireDragEnterLeaveEvents({ options }: ContainerProps) {\r\n  let wasDragIn = false;\r\n  return ({ dragResult: { pos } }: DragInfo) => {\r\n    const isDragIn = !!pos;\r\n    if (isDragIn !== wasDragIn) {\r\n      wasDragIn = isDragIn;\r\n      if (isDragIn) {\r\n        options.onDragEnter && options.onDragEnter();\r\n      } else {\r\n        options.onDragLeave && options.onDragLeave();\r\n        return {\r\n          dragLeft: true,\r\n        };\r\n      }\r\n    }\r\n\r\n    return undefined;\r\n  };\r\n}\r\n\r\nfunction fireOnDropReady({ options }: ContainerProps) {\r\n  let lastAddedIndex: number | null = null;\r\n  return ({ dragResult: { addedIndex, removedIndex }, draggableInfo: { payload, element } }: DragInfo) => {\r\n    if (options.onDropReady && addedIndex !== null && lastAddedIndex !== addedIndex) {\r\n      lastAddedIndex = addedIndex;\r\n      let adjustedAddedIndex = addedIndex;\r\n\r\n      if (removedIndex !== null && addedIndex > removedIndex) {\r\n        adjustedAddedIndex--;\r\n      }\r\n\r\n      options.onDropReady({\r\n        addedIndex: adjustedAddedIndex,\r\n        removedIndex,\r\n        payload,\r\n        element: element ? element.firstElementChild as HTMLElement : undefined,\r\n      });\r\n    }\r\n  };\r\n}\r\n\r\nfunction getDragHandler(params: any) {\r\n  if (params.options.behaviour === 'drop-zone') {\r\n    // sorting is disabled in container, addedIndex will always be 0 if dropped in\r\n    return compose(params)(\r\n      getRemovedItem,\r\n      setRemovedItemVisibilty,\r\n      getPosition,\r\n      getElementSize,\r\n      handleTargetContainer,\r\n      getDragInsertionIndexForDropZone,\r\n      getShadowBeginEndForDropZone,\r\n      fireDragEnterLeaveEvents,\r\n      fireOnDropReady\r\n    );\r\n  } else {\r\n    return compose(params)(\r\n      getRemovedItem,\r\n      setRemovedItemVisibilty,\r\n      getPosition,\r\n      getElementSize,\r\n      handleTargetContainer,\r\n      invalidateShadowBeginEndIfNeeded,\r\n      getNextAddedIndex,\r\n      resetShadowAdjustment,\r\n      handleInsertionSizeChange,\r\n      calculateTranslations,\r\n      getShadowBeginEnd,\r\n      drawDropPreview,\r\n      handleFirstInsertShadowAdjustment,\r\n      fireDragEnterLeaveEvents,\r\n      fireOnDropReady\r\n    );\r\n  }\r\n}\r\n\r\nfunction getDefaultDragResult() {\r\n  return {\r\n    addedIndex: null,\r\n    removedIndex: null,\r\n    elementSize: null,\r\n    pos: null,\r\n    shadowBeginEnd: null,\r\n  };\r\n}\r\n\r\nfunction compose(params: any) {\r\n  return (...functions: any[]) => {\r\n    const hydratedFunctions = functions.map(p => p(params));\r\n    let result: DragResult | null = null;\r\n    return (draggableInfo: DraggableInfo) => {\r\n      result = hydratedFunctions.reduce((dragResult, fn) => {\r\n        return Object.assign(dragResult, fn({ draggableInfo, dragResult }));\r\n      }, result || getDefaultDragResult());\r\n      return result;\r\n    };\r\n  };\r\n}\r\n\r\n// Container definition begin\r\nfunction Container(element: HTMLElement): (options?: ContainerOptions) => any {\r\n  return function (options?: ContainerOptions) {\r\n    let dragResult: DragResult | null = null;\r\n    let lastDraggableInfo: DraggableInfo | null = null;\r\n    const props = getContainerProps(element, options);\r\n    let dragHandler = getDragHandler(props);\r\n    let dropHandler = handleDrop(props);\r\n    let scrollListener = listenScrollParent(element, onScroll);\r\n\r\n    function processLastDraggableInfo() {\r\n      if (lastDraggableInfo !== null) {\r\n        lastDraggableInfo.invalidateShadow = true;\r\n        dragResult = dragHandler(lastDraggableInfo!);\r\n        lastDraggableInfo.invalidateShadow = false;\r\n      }\r\n    }\r\n\r\n    function setDraggables(draggables: HTMLElement[], element: HTMLElement) {\r\n      const newDraggables = wrapChildren(element);\r\n      for (let i = 0; i < newDraggables.length; i++) {\r\n        draggables[i] = newDraggables[i];\r\n      }\r\n\r\n      for (let i = 0; i < draggables.length - newDraggables.length; i++) {\r\n        draggables.pop();\r\n      }\r\n    }\r\n\r\n    function prepareDrag(container: IContainer, relevantContainers: IContainer[]) {\r\n      const element = container.element;\r\n      const draggables = props.draggables;\r\n      const options = container.getOptions();\r\n      setDraggables(draggables, element);\r\n      container.layout.invalidateRects();\r\n      draggables.forEach(p => setAnimation(p, true, options.animationDuration));\r\n      scrollListener.start();\r\n    }\r\n\r\n    function onScroll() {\r\n      props.layout.invalidateRects();\r\n      processLastDraggableInfo();\r\n    };\r\n\r\n    function handleDragLeftDeferedTranslation() {\r\n      if (dragResult && dragResult.dragLeft && props.options.behaviour !== 'drop-zone') {\r\n        dragResult.dragLeft = false;\r\n        setTimeout(() => {\r\n          if (dragResult) {\r\n            calculateTranslations(props)({ dragResult });\r\n          }\r\n        }, 20);\r\n      }\r\n    }\r\n\r\n    function dispose(container: IContainer) {\r\n      scrollListener.dispose();\r\n      unwrapChildren(container.element);\r\n    }\r\n\r\n    const container: IContainer = {\r\n      element,\r\n      draggables: props.draggables,\r\n      isDragRelevant: isDragRelevant(props),\r\n      layout: props.layout,\r\n      dispose,\r\n      prepareDrag,\r\n      handleDrag(draggableInfo: DraggableInfo) {\r\n        lastDraggableInfo = draggableInfo;\r\n        dragResult = dragHandler(draggableInfo);\r\n        handleDragLeftDeferedTranslation();\r\n        return dragResult;\r\n      },\r\n      handleDrop(draggableInfo: DraggableInfo) {\r\n        scrollListener.stop();\r\n        if (dragResult && dragResult.dropPlaceholderContainer) {\r\n          element.removeChild(dragResult.dropPlaceholderContainer);\r\n        }\r\n        lastDraggableInfo = null;\r\n        dragHandler = getDragHandler(props);\r\n        dropHandler(draggableInfo, dragResult!);\r\n        dragResult = null;\r\n      },\r\n      fireRemoveElement() {\r\n        // will be called when container is disposed while dragging so ignore addedIndex\r\n        dropHandler(lastDraggableInfo!, Object.assign({}, dragResult!, { addedIndex: null }), true);\r\n        dragResult = null;\r\n      },\r\n      getDragResult() {\r\n        return dragResult;\r\n      },\r\n      getTranslateCalculator(dragresult: { dragResult: DragResult }) {\r\n        return calculateTranslations(props)(dragresult);\r\n      },\r\n      onTranslated: () => {\r\n        processLastDraggableInfo();\r\n      },\r\n      getOptions: () => props.options,\r\n      setDraggables: () => {\r\n        setDraggables(props.draggables, element);\r\n      },\r\n    };\r\n\r\n    return container;\r\n  };\r\n}\r\n\r\n// const options: ContainerOptions = {\r\n//   behaviour: 'move',\r\n//   groupName: 'bla bla', // if not defined => container will not interfere with other containers\r\n//   orientation: 'vertical',\r\n//   dragHandleSelector: undefined,\r\n//   nonDragAreaSelector: 'some selector',\r\n//   dragBeginDelay: 0,\r\n//   animationDuration: 180,\r\n//   autoScrollEnabled: true,\r\n//   lockAxis: 'x',\r\n//   dragClass: undefined,\r\n//   dropClass: undefined,\r\n//   onDragStart: (index, payload) => {},\r\n//   onDrop: ({ removedIndex, addedIndex, payload, element }) => {},\r\n//   getChildPayload: index => null,\r\n//   shouldAnimateDrop: (sourceContainerOptions, payload) => true,\r\n//   shouldAcceptDrop: (sourceContainerOptions, payload) => true,\r\n//   onDragEnter: () => {},\r\n//   onDragLeave: () => { },\r\n//   onDropReady: ({ removedIndex, addedIndex, payload, element }) => { },\r\n// };\r\n\r\n// exported part of container\r\nconst smoothDnD: SmoothDnDCreator = function (element: HTMLElement, options?: ContainerOptions): SmoothDnD {\r\n  const containerIniter = Container(element);\r\n  const container = containerIniter(options);\r\n  (element as ElementX)[containerInstance] = container;\r\n  Mediator.register(container);\r\n  return {\r\n    dispose() {\r\n      Mediator.unregister(container);\r\n      container.dispose(container);\r\n    },\r\n  };\r\n};\r\n\r\n// wrap all draggables by default \r\n// in react,vue,angular this value will be set to false\r\nsmoothDnD.wrapChild = true;\r\n\r\nexport default smoothDnD;\r\n","import { containerClass, disbaleTouchActions, dropPlaceholderFlexContainerClass, dropPlaceholderInnerClass, dropPlaceholderWrapperClass, ghostClass, noUserSelectClass, stretcherElementClass, wrapperClass, dropPlaceholderDefaultClass } from './constants';\r\nimport { Dictionary } from './interfaces';\r\ndeclare const global: any;\r\n\r\nconst verticalWrapperClass = {\r\n\t'overflow': 'hidden',\r\n\t'display': 'block'\r\n}\r\n\r\nconst horizontalWrapperClass = {\r\n\t'height': '100%',\r\n\t'display': 'table-cell',\r\n\t'vertical-align': 'top',\r\n}\r\n\r\nconst stretcherElementHorizontalClass = {\r\n\t'display': 'inline-block'\r\n}\r\n\r\nconst css = {\r\n\t[`.${containerClass}`]: {\r\n\t\t'position': 'relative',\r\n\t\t'min-height': '30px',\r\n\t\t'min-width': '30px'\r\n\t},\r\n\t[`.${containerClass}.horizontal`]: {\r\n\t\t'display': 'table',\r\n\t},\r\n\t[`.${containerClass}.horizontal > .${stretcherElementClass}`]: stretcherElementHorizontalClass,\r\n\t[`.${containerClass}.horizontal > .${wrapperClass}`]: horizontalWrapperClass,\r\n\t[`.${containerClass}.vertical > .${wrapperClass}`]: verticalWrapperClass,\r\n\t[`.${wrapperClass}`]: {\r\n\t\t'box-sizing': 'border-box'\r\n\t},\r\n\t[`.${wrapperClass}.horizontal`]: horizontalWrapperClass,\r\n\t[`.${wrapperClass}.vertical`]: verticalWrapperClass,\r\n\t[`.${wrapperClass}.animated`]: {\r\n\t\t'transition': 'transform ease',\r\n\t},\r\n\t[`.${ghostClass}.animated`]: {\r\n\t\t'transition': 'all ease-in-out'\r\n\t},\r\n\t[`.${ghostClass} *`]: {\r\n\t\t'pointer-events': 'none'\r\n\t},\r\n\t[`.${disbaleTouchActions} *`]: {\r\n\t\t'touch-actions': 'none',\r\n\t\t'-ms-touch-actions': 'none'\r\n\t},\r\n\t[`.${noUserSelectClass}`]: {\r\n\t\t'-webkit-touch-callout': 'none',\r\n\t\t'-webkit-user-select': 'none',\r\n\t\t'-khtml-user-select': 'none',\r\n\t\t'-moz-user-select': 'none',\r\n\t\t'-ms-user-select': 'none',\r\n\t\t'user-select': 'none'\r\n\t},\r\n\t[`.${dropPlaceholderInnerClass}`]: {\r\n\t\t'flex': '1'\r\n\t},\r\n\t[`.${containerClass}.horizontal > .${dropPlaceholderWrapperClass}`]: {\r\n\t\t'height': '100%',\r\n\t\t'overflow': 'hidden',\r\n\t\t'display': 'table-cell',\r\n\t\t'vertical-align': 'top',\r\n\t},\r\n\t[`.${containerClass}.vertical > .${dropPlaceholderWrapperClass}`]: {\r\n\t\t'overflow': 'hidden',\r\n\t\t'display': 'block',\r\n\t\t'width': '100%',\r\n\t},\r\n\t[`.${dropPlaceholderFlexContainerClass}`]: {\r\n\t\t'width': '100%',\r\n\t\t'height': '100%',\r\n\t\t'display': 'flex',\r\n\t\t'justify-content': 'stretch',\r\n\t\t'align-items': 'stretch'\r\n\t},\r\n\t[`.${dropPlaceholderDefaultClass}`]: {\r\n\t\t'background-color': 'rgba(150, 150, 150, 0.1)',\r\n  \t'border': '1px solid #ccc',\r\n\t}\r\n};\r\n\r\nfunction convertToCssString(css: Dictionary): string {\r\n\treturn Object.keys(css).reduce((styleString, propName) => {\r\n\t\tconst propValue = css[propName];\r\n\t\tif (typeof (propValue) === 'object') {\r\n\t\t\treturn `${styleString}${propName}{${convertToCssString(propValue)}}`;\r\n\t\t}\r\n\t\treturn `${styleString}${propName}:${propValue};`;\r\n\t}, '');\r\n}\r\n\r\nfunction addStyleToHead() {\r\n\tif (typeof (window) !== 'undefined') {\r\n\t\tconst head = global.document.head || global.document.getElementsByTagName(\"head\")[0];\r\n\t\tconst style = global.document.createElement(\"style\");\r\n\t\tstyle.id = 'smooth-dnd-style-definitions';\r\n\t\tconst cssString = convertToCssString(css);\r\n\t\tstyle.type = 'text/css';\r\n\t\tif (style.styleSheet) {\r\n\t\t\tstyle.styleSheet.cssText = cssString;\r\n\t\t} else {\r\n\t\t\tstyle.appendChild(global.document.createTextNode(cssString));\r\n\t\t}\r\n\r\n\t\thead.appendChild(style);\r\n\t}\r\n}\r\n\r\nfunction addCursorStyleToBody(cursor: string) {\r\n\tif (cursor && typeof (window) !== 'undefined') {\r\n\t\tconst head = global.document.head || global.document.getElementsByTagName(\"head\")[0];\r\n\t\tconst style = global.document.createElement(\"style\");\r\n\t\tconst cssString = convertToCssString({\r\n\t\t\t'body *': {\r\n\t\t\t\tcursor: `${cursor} !important`\r\n\t\t\t}\r\n\t\t});\r\n\t\tstyle.type = 'text/css';\r\n\t\tif (style.styleSheet) {\r\n\t\t\tstyle.styleSheet.cssText = cssString;\r\n\t\t} else {\r\n\t\t\tstyle.appendChild(global.document.createTextNode(cssString));\r\n\t\t}\r\n\r\n\t\thead.appendChild(style);\r\n\r\n\t\treturn style;\r\n\t}\r\n\r\n\treturn null;\r\n}\r\n\r\nfunction removeStyle(styleElement: HTMLStyleElement) {\r\n\tif (styleElement && typeof (window) !== 'undefined') {\r\n\t\tconst head = global.document.head || global.document.getElementsByTagName(\"head\")[0];\r\n\t\thead.removeChild(styleElement);\r\n\t}\r\n}\r\n\r\nexport { addStyleToHead, addCursorStyleToBody, removeStyle };\r\n\r\n","import { addChildAt, removeChildAt } from './utils';\r\nimport {\r\n\twrapperClass,\r\n} from './constants';\r\nimport { ContainerProps } from './interfaces';\r\nimport { DropCallback, DropResult } from './exportTypes';\r\n\r\n\r\nexport function domDropHandler({ element, draggables }: ContainerProps) {\r\n\treturn (dropResult: DropResult, onDrop: DropCallback) => {\r\n\t\tconst { removedIndex, addedIndex, droppedElement } = dropResult as any;\r\n\t\tlet removedWrapper = null;\r\n\t\tif (removedIndex !== null) {\r\n\t\t\tremovedWrapper = removeChildAt(element, removedIndex);\r\n\t\t\tdraggables.splice(removedIndex, 1);\r\n\t\t}\r\n\r\n\t\tif (addedIndex !== null) {\r\n\t\t\tconst wrapper = global.document.createElement('div');\r\n\t\t\twrapper.className = `${wrapperClass}`;\r\n\t\t\twrapper.appendChild(removedWrapper && removedWrapper.firstElementChild ? removedWrapper.firstElementChild : droppedElement);\r\n\t\t\taddChildAt(element, wrapper, addedIndex);\r\n\t\t\tif (addedIndex >= draggables.length) {\r\n\t\t\t\tdraggables.push(wrapper);\r\n\t\t\t} else {\r\n\t\t\t\tdraggables.splice(addedIndex, 0, wrapper);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (onDrop) {\r\n\t\t\tonDrop(dropResult);\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function reactDropHandler() {\r\n\tconst handler = () => {\r\n\t\treturn (dropResult: DropResult, onDrop: DropCallback) => {\r\n\t\t\tif (onDrop) {\r\n\t\t\t\tonDrop(dropResult);\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\treturn {\r\n\t\thandler\r\n\t};\r\n}\r\n","import * as constants from './constants';\r\nimport { defaultOptions } from './defaults';\r\nimport dragScroller from './scroller';\r\nimport { Axis, DraggableInfo, ElementX, GhostInfo, IContainer, MousePosition, Position, TopLeft } from './interfaces';\r\nimport './polyfills';\r\nimport { addCursorStyleToBody, addStyleToHead, removeStyle } from './styles';\r\nimport * as Utils from './utils';\r\nimport { ContainerOptions } from './exportTypes';\r\n\r\nconst grabEvents = ['mousedown', 'touchstart'];\r\nconst moveEvents = ['mousemove', 'touchmove'];\r\nconst releaseEvents = ['mouseup', 'touchend'];\r\n\r\nlet dragListeningContainers: IContainer[] = null!;\r\nlet grabbedElement: ElementX | null = null;\r\nlet ghostInfo: GhostInfo = null!;\r\nlet draggableInfo: DraggableInfo = null!;\r\nlet containers: IContainer[] = [];\r\nlet isDragging = false;\r\n\r\nlet handleDrag: (info: DraggableInfo) => void = null!;\r\nlet handleScroll: (props: { draggableInfo?: DraggableInfo; reset?: boolean }) => void = null!;\r\nlet sourceContainerLockAxis: Axis | null = null;\r\nlet cursorStyleElement: HTMLStyleElement | null = null;\r\nconst containerRectableWatcher = watchRectangles();\r\n\r\n// Utils.addClass(document.body, 'clearfix');\r\n\r\nconst isMobile = Utils.isMobile();\r\n\r\nfunction listenEvents() {\r\n  if (typeof window !== 'undefined') {\r\n    addGrabListeners();\r\n  }\r\n}\r\n\r\nfunction addGrabListeners() {\r\n  grabEvents.forEach(e => {\r\n    global.document.addEventListener(e, onMouseDown, { passive: false });\r\n  });\r\n}\r\n\r\nfunction addMoveListeners() {\r\n  moveEvents.forEach(e => {\r\n    global.document.addEventListener(e, onMouseMove, { passive: false });\r\n  });\r\n}\r\n\r\nfunction removeMoveListeners() {\r\n  moveEvents.forEach(e => {\r\n    global.document.removeEventListener(e, onMouseMove, { passive: false });\r\n  });\r\n}\r\n\r\nfunction addReleaseListeners() {\r\n  releaseEvents.forEach(e => {\r\n    global.document.addEventListener(e, onMouseUp, { passive: false });\r\n  });\r\n}\r\n\r\nfunction removeReleaseListeners() {\r\n  releaseEvents.forEach(e => {\r\n    global.document.removeEventListener(e, onMouseUp, { passive: false });\r\n  });\r\n}\r\n\r\nfunction getGhostParent() {\r\n  if (draggableInfo && draggableInfo.ghostParent) {\r\n    return draggableInfo.ghostParent;\r\n  }\r\n\r\n  if (grabbedElement) {\r\n    return grabbedElement.parentElement || global.document.body;\r\n  } else {\r\n    return global.document.body;\r\n  }\r\n}\r\n\r\nfunction getGhostElement(wrapperElement: HTMLElement, { x, y }: Position, container: IContainer, cursor: string): GhostInfo {\r\n  const { left, top, right, bottom } = wrapperElement.getBoundingClientRect();\r\n  const midX = left + (right - left) / 2;\r\n  const midY = top + (bottom - top) / 2;\r\n  const ghost: HTMLElement = wrapperElement.cloneNode(true) as HTMLElement;\r\n  ghost.style.zIndex = '1000';\r\n  ghost.style.boxSizing = 'border-box';\r\n  ghost.style.position = 'fixed';\r\n  ghost.style.left = left + 'px';\r\n  ghost.style.top = top + 'px';\r\n  ghost.style.width = right - left + 'px';\r\n  ghost.style.height = bottom - top + 'px';\r\n  ghost.style.overflow = 'visible';\r\n  ghost.style.transition = null!;\r\n  ghost.style.removeProperty('transition');\r\n  ghost.style.pointerEvents = 'none';\r\n  ghost.style.userSelect = 'none';\r\n\r\n  if (container.getOptions().dragClass) {\r\n    setTimeout(() => {\r\n      Utils.addClass(ghost.firstElementChild as HTMLElement, container.getOptions().dragClass!);\r\n      const dragCursor = global.getComputedStyle(ghost.firstElementChild).cursor;\r\n      cursorStyleElement = addCursorStyleToBody(dragCursor);\r\n    });\r\n  } else {\r\n    cursorStyleElement = addCursorStyleToBody(cursor);\r\n  }\r\n  Utils.addClass(ghost, container.getOptions().orientation || 'vertical');\r\n  Utils.addClass(ghost, constants.ghostClass);\r\n\r\n  return {\r\n    ghost: ghost,\r\n    centerDelta: { x: midX - x, y: midY - y },\r\n    positionDelta: { left: left - x, top: top - y },\r\n  };\r\n}\r\n\r\nfunction getDraggableInfo(draggableElement: HTMLElement): DraggableInfo {\r\n  const container = containers.filter(p => draggableElement.parentElement === p.element)[0];\r\n  const draggableIndex = container.draggables.indexOf(draggableElement);\r\n  const getGhostParent = container.getOptions().getGhostParent;\r\n  const draggableRect = draggableElement.getBoundingClientRect();\r\n  return {\r\n    container,\r\n    element: draggableElement,\r\n    size: {\r\n      offsetHeight: draggableRect.bottom - draggableRect.top,\r\n      offsetWidth: draggableRect.right - draggableRect.left,\r\n    },\r\n    elementIndex: draggableIndex,\r\n    payload: container.getOptions().getChildPayload ? container.getOptions().getChildPayload!(draggableIndex) : undefined,\r\n    targetElement: null,\r\n    position: { x: 0, y: 0 },\r\n    groupName: container.getOptions().groupName,\r\n    ghostParent: getGhostParent ? getGhostParent() : null,\r\n    invalidateShadow: null,\r\n    mousePosition: null!,\r\n    relevantContainers: null!\r\n  };\r\n}\r\n\r\nfunction handleDropAnimation(callback: Function) {\r\n  function endDrop() {\r\n    Utils.removeClass(ghostInfo.ghost, 'animated');\r\n    ghostInfo!.ghost.style.transitionDuration = null!;\r\n    getGhostParent().removeChild(ghostInfo.ghost);\r\n    callback();\r\n  }\r\n\r\n  function animateGhostToPosition({ top, left }: TopLeft, duration: number, dropClass: string | undefined) {\r\n    Utils.addClass(ghostInfo.ghost, 'animated');\r\n    if (dropClass) {\r\n      Utils.addClass(ghostInfo.ghost.firstElementChild, dropClass);\r\n    }\r\n    ghostInfo.ghost.style.transitionDuration = duration + 'ms';\r\n    ghostInfo.ghost.style.left = left + 'px';\r\n    ghostInfo.ghost.style.top = top + 'px';\r\n    setTimeout(function() {\r\n      endDrop();\r\n    }, duration + 20);\r\n  }\r\n\r\n  function shouldAnimateDrop(options: ContainerOptions) {\r\n    return options.shouldAnimateDrop\r\n      ? options.shouldAnimateDrop(draggableInfo.container.getOptions(), draggableInfo.payload)\r\n      : true;\r\n  }\r\n\r\n  function disappearAnimation(duration: number, clb: Function) {\r\n    Utils.addClass(ghostInfo.ghost, 'animated');\r\n    ghostInfo.ghost.style.transitionDuration = duration + 'ms';\r\n    ghostInfo.ghost.style.opacity = '0';\r\n    ghostInfo.ghost.style.transform = 'scale(0.90)';\r\n    setTimeout(function () {\r\n      clb();\r\n    }, duration);\r\n  }\r\n\r\n  if (draggableInfo.targetElement) {\r\n    const container = containers.filter(p => p.element === draggableInfo.targetElement)[0];\r\n    if (shouldAnimateDrop(container.getOptions())) {\r\n      const dragResult = container.getDragResult()!;\r\n      animateGhostToPosition(\r\n        dragResult.shadowBeginEnd.rect!,\r\n        Math.max(150, container.getOptions().animationDuration! / 2),\r\n        container.getOptions().dropClass\r\n      );\r\n    } else {\r\n      endDrop();\r\n    }\r\n  } else {\r\n    const container = containers.filter(p => p === draggableInfo.container)[0];\r\n    if (container) {\r\n      const { behaviour, removeOnDropOut } = container.getOptions();\r\n      if (behaviour === 'move' && !removeOnDropOut && container.getDragResult()) {\r\n        const rectangles = container.layout.getContainerRectangles();\r\n\r\n        // container is hidden somehow\r\n        // move ghost back to last seen position\r\n        if (!Utils.isVisible(rectangles.visibleRect) && Utils.isVisible(rectangles.lastVisibleRect)) {\r\n          animateGhostToPosition(\r\n            {\r\n              top: rectangles.lastVisibleRect.top,\r\n              left: rectangles.lastVisibleRect.left\r\n            },\r\n            container.getOptions().animationDuration!,\r\n            container.getOptions().dropClass\r\n          );\r\n        } else {\r\n          const { removedIndex, elementSize } = container.getDragResult()!;\r\n          const layout = container.layout;\r\n          // drag ghost to back\r\n          container.getTranslateCalculator({\r\n            dragResult: {\r\n              removedIndex,\r\n              addedIndex: removedIndex,\r\n              elementSize,\r\n              pos: undefined!,\r\n              shadowBeginEnd: undefined!,\r\n            },\r\n          });\r\n          const prevDraggableEnd =\r\n            removedIndex! > 0\r\n              ? layout.getBeginEnd(container.draggables[removedIndex! - 1]).end\r\n              : layout.getBeginEndOfContainer().begin;\r\n          animateGhostToPosition(\r\n            layout.getTopLeftOfElementBegin(prevDraggableEnd),\r\n            container.getOptions().animationDuration!,\r\n            container.getOptions().dropClass\r\n          );\r\n        }\r\n      } else {\r\n        disappearAnimation(container.getOptions().animationDuration!, endDrop);\r\n      }\r\n    } else {\r\n      // container is disposed due to removal\r\n      disappearAnimation(defaultOptions.animationDuration!, endDrop);\r\n    }\r\n  }\r\n}\r\n\r\nconst handleDragStartConditions = (function handleDragStartConditions() {\r\n  let startEvent: { clientX: number; clientY: number };\r\n  let delay: number;\r\n  let clb: Function;\r\n  let timer: any = null!;\r\n  const moveThreshold = 1;\r\n  const maxMoveInDelay = 5;\r\n\r\n  function onMove(event: MouseEvent & TouchEvent) {\r\n    const { clientX: currentX, clientY: currentY } = getPointerEvent(event);\r\n    if (!delay) {\r\n      if (Math.abs(startEvent.clientX - currentX) > moveThreshold || Math.abs(startEvent.clientY - currentY) > moveThreshold) {\r\n        return callCallback();\r\n      }\r\n    } else {\r\n      if (Math.abs(startEvent.clientX - currentX) > maxMoveInDelay || Math.abs(startEvent.clientY - currentY) > maxMoveInDelay) {\r\n        deregisterEvent();\r\n      }\r\n    }\r\n  }\r\n\r\n  function onUp() {\r\n    deregisterEvent();\r\n  }\r\n  function onHTMLDrag() {\r\n    deregisterEvent();\r\n  }\r\n\r\n  function registerEvents() {\r\n    if (delay) {\r\n      timer = setTimeout(callCallback, delay);\r\n    }\r\n\r\n    moveEvents.forEach(e => global.document.addEventListener(e, onMove), {\r\n      passive: false,\r\n    });\r\n    releaseEvents.forEach(e => global.document.addEventListener(e, onUp), {\r\n      passive: false,\r\n    });\r\n    global.document.addEventListener('drag', onHTMLDrag, {\r\n      passive: false,\r\n    });\r\n  }\r\n\r\n  function deregisterEvent() {\r\n    clearTimeout(timer);\r\n    moveEvents.forEach(e => global.document.removeEventListener(e, onMove), {\r\n      passive: false,\r\n    });\r\n    releaseEvents.forEach(e => global.document.removeEventListener(e, onUp), {\r\n      passive: false,\r\n    });\r\n    global.document.removeEventListener('drag', onHTMLDrag, {\r\n      passive: false,\r\n    });\r\n  }\r\n\r\n  function callCallback() {\r\n    clearTimeout(timer);\r\n    deregisterEvent();\r\n    clb();\r\n  }\r\n\r\n  return function(_startEvent: MouseEvent & TouchEvent, _delay: number, _clb: Function) {\r\n    startEvent = getPointerEvent(_startEvent);\r\n    delay = typeof _delay === 'number' ? _delay : isMobile ? 200 : 0;\r\n    clb = _clb;\r\n\r\n    registerEvents();\r\n  };\r\n})();\r\n\r\nfunction onMouseDown(event: MouseEvent & TouchEvent) {\r\n  const e = getPointerEvent(event);\r\n  if (!isDragging && (e.button === undefined || e.button === 0)) {\r\n    grabbedElement = Utils.getParent(e.target as Element, '.' + constants.wrapperClass) as ElementX;\r\n    if (grabbedElement) {\r\n      const containerElement = Utils.getParent(grabbedElement, '.' + constants.containerClass);\r\n      const container = containers.filter(p => p.element === containerElement)[0];\r\n      const dragHandleSelector = container.getOptions().dragHandleSelector;\r\n      const nonDragAreaSelector = container.getOptions().nonDragAreaSelector;\r\n\r\n      let startDrag = true;\r\n      if (dragHandleSelector && !Utils.getParent(e.target as Element, dragHandleSelector)) {\r\n        startDrag = false;\r\n      }\r\n\r\n      if (nonDragAreaSelector && Utils.getParent(e.target as Element, nonDragAreaSelector)) {\r\n        startDrag = false;\r\n      }\r\n\r\n      if (startDrag) {\r\n        Utils.addClass(global.document.body, constants.disbaleTouchActions);\r\n        Utils.addClass(global.document.body, constants.noUserSelectClass);\r\n\r\n        const onMouseUp = () => {\r\n          Utils.removeClass(global.document.body, constants.disbaleTouchActions);\r\n          Utils.removeClass(global.document.body, constants.noUserSelectClass);\r\n          global.document.removeEventListener('mouseup', onMouseUp);\r\n        }\r\n\r\n        global.document.addEventListener('mouseup', onMouseUp);\r\n      }\r\n\r\n      if (startDrag) {\r\n        handleDragStartConditions(e, container.getOptions().dragBeginDelay!, () => {\r\n          Utils.clearSelection();\r\n          initiateDrag(e, Utils.getElementCursor(event.target as Element));\r\n          addMoveListeners();\r\n          addReleaseListeners();\r\n        });\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction onMouseUp() {\r\n  removeMoveListeners();\r\n  removeReleaseListeners();\r\n  handleScroll({ reset: true });\r\n\r\n  if (cursorStyleElement) {\r\n    removeStyle(cursorStyleElement);\r\n    cursorStyleElement = null;\r\n  }\r\n  if (draggableInfo) {\r\n    containerRectableWatcher.stop();\r\n    handleDropAnimation(() => {\r\n      isDragging = false;\r\n      fireOnDragStartEnd(false);\r\n      const containers = dragListeningContainers || [];\r\n      \r\n      let containerToCallDrop = containers.shift();\r\n      while (containerToCallDrop !== undefined) {\r\n        containerToCallDrop.handleDrop(draggableInfo);\r\n        containerToCallDrop = containers.shift();\r\n      }\r\n\r\n      dragListeningContainers = null!;\r\n      grabbedElement = null;\r\n      ghostInfo = null!;\r\n      draggableInfo = null!;\r\n      sourceContainerLockAxis = null;\r\n      handleDrag = null!;\r\n    });\r\n  }\r\n}\r\n\r\nfunction getPointerEvent(e: TouchEvent & MouseEvent): MouseEvent & TouchEvent {\r\n  return e.touches ? e.touches[0] : e as any;\r\n}\r\n\r\nfunction dragHandler(dragListeningContainers: IContainer[]) {\r\n  let targetContainers = dragListeningContainers;\r\n  return function(draggableInfo: DraggableInfo) {\r\n    let containerBoxChanged = false;\r\n    targetContainers.forEach((p: IContainer) => {\r\n      const dragResult = p.handleDrag(draggableInfo)!;\r\n      containerBoxChanged = !!dragResult.containerBoxChanged || false;\r\n      dragResult.containerBoxChanged = false;\r\n    });\r\n    handleScroll({ draggableInfo });\r\n\r\n    if (containerBoxChanged) {\r\n      containerBoxChanged = false;\r\n      setTimeout(() => {\r\n        containers.forEach(p => {\r\n          p.layout.invalidateRects();\r\n          p.onTranslated();\r\n        });\r\n      }, 10);\r\n    }\r\n  };\r\n}\r\n\r\nfunction getScrollHandler(container: IContainer, dragListeningContainers: IContainer[]) {\r\n  if (container.getOptions().autoScrollEnabled) {\r\n    return dragScroller(dragListeningContainers);\r\n  } else {\r\n    return (props: { draggableInfo?: DraggableInfo; reset?: boolean }) => null;\r\n  }\r\n}\r\n\r\nfunction fireOnDragStartEnd(isStart: boolean) {\r\n  containers.forEach(p => {\r\n    const fn = isStart ? p.getOptions().onDragStart : p.getOptions().onDragEnd;\r\n    if (fn) {\r\n      const options: any = {\r\n        isSource: p === draggableInfo.container,\r\n        payload: draggableInfo.payload,\r\n      };\r\n      if (p.isDragRelevant(draggableInfo.container, draggableInfo.payload)) {\r\n        options.willAcceptDrop = true;\r\n      } else {\r\n        options.willAcceptDrop = false;\r\n      }\r\n      fn(options);\r\n    }\r\n  });\r\n}\r\n\r\nfunction initiateDrag(position: MousePosition, cursor: string) {\r\n  if (grabbedElement !== null) {\r\n    isDragging = true;\r\n    const container = (containers.filter(p => grabbedElement!.parentElement === p.element)[0]) as IContainer;\r\n    container.setDraggables();\r\n    sourceContainerLockAxis = container.getOptions().lockAxis ? container.getOptions().lockAxis!.toLowerCase() as Axis : null;\r\n\r\n    draggableInfo = getDraggableInfo(grabbedElement);\r\n    ghostInfo = getGhostElement(\r\n      grabbedElement,\r\n      { x: position.clientX, y: position.clientY },\r\n      draggableInfo.container,\r\n      cursor\r\n    );\r\n    draggableInfo.position = {\r\n      x: position.clientX + ghostInfo.centerDelta.x,\r\n      y: position.clientY + ghostInfo.centerDelta.y,\r\n    };\r\n    draggableInfo.mousePosition = {\r\n      x: position.clientX,\r\n      y: position.clientY,\r\n    };\r\n\r\n    dragListeningContainers = containers.filter(p => p.isDragRelevant(container, draggableInfo.payload));\r\n    draggableInfo.relevantContainers = dragListeningContainers;\r\n    handleDrag = dragHandler(dragListeningContainers);\r\n    if (handleScroll) {\r\n      handleScroll({ reset: true, draggableInfo: undefined! });\r\n    }\r\n    handleScroll = getScrollHandler(container, dragListeningContainers);\r\n    dragListeningContainers.forEach(p => p.prepareDrag(p, dragListeningContainers));\r\n    fireOnDragStartEnd(true);\r\n    handleDrag(draggableInfo);\r\n    getGhostParent().appendChild(ghostInfo.ghost);\r\n\r\n    containerRectableWatcher.start();\r\n  }\r\n}\r\n\r\nfunction onMouseMove(event: MouseEvent & TouchEvent) {\r\n  event.preventDefault();\r\n  const e = getPointerEvent(event);\r\n  if (!draggableInfo) {\r\n    initiateDrag(e, Utils.getElementCursor(event.target as Element));\r\n  } else {\r\n    const containerOptions = draggableInfo.container.getOptions();\r\n    const isContainDrag = containerOptions.behaviour === 'contain';\r\n    if (isContainDrag) {\r\n      const beginEnd = draggableInfo.container.layout.getBeginEndOfContainerVisibleRect();\r\n      if (containerOptions.orientation === 'vertical') {\r\n        const beginBoundary = beginEnd.begin - (draggableInfo.size.offsetHeight / 2);\r\n        const endBoundary = beginEnd.end - (draggableInfo.size.offsetHeight / 2);\r\n        const positionInBoundary = Math.max(beginBoundary, Math.min(endBoundary, (e.clientY + ghostInfo.positionDelta.top)));\r\n\r\n        ghostInfo.ghost.style.top = `${positionInBoundary}px`;\r\n        draggableInfo.position.y = Math.max(beginEnd.begin + 1, Math.min(beginEnd.end - 1, (e.clientY + ghostInfo.centerDelta.y)));\r\n        draggableInfo.mousePosition.y = Math.max(beginEnd.begin + 1, Math.min(beginEnd.end - 1, e.clientY));\r\n      } else {\r\n        const beginBoundary = beginEnd.begin - (draggableInfo.size.offsetWidth / 2);\r\n        const endBoundary = beginEnd.end - (draggableInfo.size.offsetWidth / 2);\r\n        const positionInBoundary = Math.max(beginBoundary, Math.min(endBoundary, (e.clientX + ghostInfo.positionDelta.left)));\r\n\r\n        ghostInfo.ghost.style.left = `${positionInBoundary}px`;\r\n        draggableInfo.position.x = Math.max(beginEnd.begin + 1, Math.min(beginEnd.end - 1, (e.clientX + ghostInfo.centerDelta.x)));\r\n        draggableInfo.mousePosition.x = Math.max(beginEnd.begin + 1, Math.min(beginEnd.end - 1, e.clientX));\r\n      }\r\n    } else if (sourceContainerLockAxis) {\r\n      if (sourceContainerLockAxis === 'y') {\r\n        ghostInfo.ghost.style.top = `${e.clientY + ghostInfo.positionDelta.top}px`;\r\n        draggableInfo.position.y = e.clientY + ghostInfo.centerDelta.y;\r\n        draggableInfo.mousePosition.y = e.clientY;\r\n      } else if (sourceContainerLockAxis === 'x') {\r\n        ghostInfo.ghost.style.left = `${e.clientX + ghostInfo.positionDelta.left}px`;\r\n        draggableInfo.position.x = e.clientX + ghostInfo.centerDelta.x;\r\n        draggableInfo.mousePosition.x = e.clientX;\r\n      }\r\n    } else {\r\n      ghostInfo.ghost.style.left = `${e.clientX + ghostInfo.positionDelta.left}px`;\r\n      ghostInfo.ghost.style.top = `${e.clientY + ghostInfo.positionDelta.top}px`;\r\n      draggableInfo.position.x = e.clientX + ghostInfo.centerDelta.x;\r\n      draggableInfo.position.y = e.clientY + ghostInfo.centerDelta.y;\r\n      draggableInfo.mousePosition.x = e.clientX;\r\n      draggableInfo.mousePosition.y = e.clientY;\r\n    }\r\n\r\n    handleDrag(draggableInfo);\r\n  }\r\n}\r\n\r\nfunction registerContainer(container: IContainer) {\r\n  containers.push(container);\r\n\r\n  if (isDragging && draggableInfo) {\r\n    if (container.isDragRelevant(draggableInfo.container, draggableInfo.payload)) {\r\n      dragListeningContainers.push(container);\r\n      container.prepareDrag(container, dragListeningContainers);\r\n\r\n      if (handleScroll) {\r\n        handleScroll({ reset: true, draggableInfo: undefined! });\r\n      }\r\n      handleScroll = getScrollHandler(container, dragListeningContainers);\r\n      handleDrag = dragHandler(dragListeningContainers);\r\n      container.handleDrag(draggableInfo);\r\n    }\r\n  }\r\n}\r\n\r\nfunction unregisterContainer(container: IContainer) {\r\n  containers.splice(containers.indexOf(container), 1);\r\n\r\n  if (isDragging && draggableInfo) {\r\n    if (draggableInfo.container === container) {\r\n      container.fireRemoveElement();\r\n    }\r\n\r\n    if (draggableInfo.targetElement === container.element) {\r\n      draggableInfo.targetElement = null;\r\n    }\r\n\r\n    const indexInDragListeners = dragListeningContainers.indexOf(container);\r\n    if (indexInDragListeners > -1) {\r\n      dragListeningContainers.splice(indexInDragListeners, 1);\r\n      if (handleScroll) {\r\n        handleScroll({ reset: true, draggableInfo: undefined! });\r\n      }\r\n      handleScroll = getScrollHandler(container, dragListeningContainers);\r\n      handleDrag = dragHandler(dragListeningContainers);\r\n    }\r\n  }\r\n}\r\n\r\nfunction watchRectangles() {\r\n  let animationHandle: number | null = null;\r\n  function start() {\r\n    animationHandle = requestAnimationFrame(() => {\r\n      dragListeningContainers.forEach(p => p.layout.invalidateRects());\r\n      setTimeout(() => {\r\n        if (animationHandle !== null) start();\r\n      }, 50);\r\n    });\r\n  }\r\n\r\n  function stop() {\r\n    if (animationHandle !== null) {\r\n      cancelAnimationFrame(animationHandle);\r\n      animationHandle = null;\r\n    }\r\n  }\r\n\r\n  return {\r\n    start,\r\n    stop\r\n  }\r\n}\r\n\r\nfunction Mediator() {\r\n  listenEvents();\r\n  return {\r\n    register: function (container: IContainer) {\r\n      registerContainer(container);\r\n    },\r\n    unregister: function (container: IContainer) {\r\n      unregisterContainer(container);\r\n    },\r\n  };\r\n}\r\n\r\naddStyleToHead();\r\n\r\nexport default Mediator();\r\n","import React, { Component, CSSProperties } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { smoothDnD as container, ContainerOptions, SmoothDnD } from 'smooth-dnd';\r\nimport { dropHandlers } from 'smooth-dnd';\r\n\r\ncontainer.dropHandler = dropHandlers.reactDropHandler().handler;\r\ncontainer.wrapChild = false;\r\n\r\ninterface ContainerProps extends ContainerOptions {\r\n\trender?: (rootRef: React.RefObject<any>) => React.ReactElement;\r\n\tstyle?: CSSProperties;\r\n}\r\n\r\nclass Container extends Component<ContainerProps> {\r\n\tpublic static propTypes = {\r\n\t\tbehaviour: PropTypes.oneOf(['move', 'copy', 'drag-zone', 'contain']),\r\n\t\tgroupName: PropTypes.string,\r\n\t\torientation: PropTypes.oneOf(['horizontal', 'vertical']),\r\n\t\tstyle: PropTypes.object,\r\n\t\tdragHandleSelector: PropTypes.string,\r\n\t\tnonDragAreaSelector: PropTypes.string,\r\n\t\tdragBeginDelay: PropTypes.number,\r\n\t\tanimationDuration: PropTypes.number,\r\n\t\tautoScrollEnabled: PropTypes.bool,\r\n\t\tlockAxis: PropTypes.string,\r\n\t\tdragClass: PropTypes.string,\r\n\t\tdropClass: PropTypes.string,\r\n\t\tonDragStart: PropTypes.func,\r\n\t\tonDragEnd: PropTypes.func,\r\n\t\tonDrop: PropTypes.func,\r\n\t\tgetChildPayload: PropTypes.func,\r\n\t\tshouldAnimateDrop: PropTypes.func,\r\n\t\tshouldAcceptDrop: PropTypes.func,\r\n\t\tonDragEnter: PropTypes.func,\r\n\t\tonDragLeave: PropTypes.func,\r\n\t\trender: PropTypes.func,\r\n\t\tgetGhostParent: PropTypes.func,\r\n    removeOnDropOut: PropTypes.bool,\r\n    dropPlaceholder: PropTypes.oneOfType([\r\n      PropTypes.shape({\r\n        className: PropTypes.string,\r\n        animationDuration: PropTypes.number,\r\n        showOnTop: PropTypes.bool,\r\n      }),\r\n      PropTypes.bool,\r\n    ]),\r\n\t};\r\n\r\n\tpublic static defaultProps = {\r\n\t\tbehaviour: 'move',\r\n\t\torientation: 'vertical',\r\n\t};\r\n\r\n\tprevContainer: null;\r\n\tcontainer: SmoothDnD = null!;\r\n\tcontainerRef: React.RefObject<any> = React.createRef();\r\n  constructor(props: ContainerProps) {\r\n    super(props);\r\n\t\tthis.getContainerOptions = this.getContainerOptions.bind(this);\r\n\t\tthis.getContainer = this.getContainer.bind(this);\r\n    this.prevContainer = null;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.prevContainer = this.getContainer();\r\n    this.container = container(this.getContainer(), this.getContainerOptions());\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.container.dispose();\r\n    this.container = null!;\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    if (this.getContainer()) {\r\n      if (this.prevContainer && this.prevContainer !== this.getContainer()) {\r\n        this.container.dispose();\r\n        this.container = container(this.getContainer(), this.getContainerOptions());\r\n        this.prevContainer = this.getContainer();\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    if (this.props.render) {\r\n\t\t\treturn this.props.render(this.containerRef);\r\n    } else {\r\n      return (\r\n        <div style={this.props.style} ref={this.containerRef}>\r\n          {this.props.children}\r\n        </div>\r\n      );\r\n    }\r\n\t}\r\n\t\r\n\tgetContainer() {\r\n\t\treturn this.containerRef.current;\r\n\t}\r\n\r\n  getContainerOptions(): ContainerProps {\r\n    const functionProps: any = {};\r\n\r\n    if (this.props.onDragStart) {\r\n      functionProps.onDragStart = this.props.onDragStart.bind(null);\r\n    }\r\n\r\n    if (this.props.onDragEnd) {\r\n\t\t\tfunctionProps.onDragEnd = this.props.onDragEnd.bind(null);\r\n    }\r\n\r\n    if (this.props.onDrop) {\r\n      functionProps.onDrop = this.props.onDrop.bind(null);\r\n    }\r\n\r\n    if (this.props.getChildPayload) {\r\n      functionProps.getChildPayload = this.props.getChildPayload.bind(null);\r\n    }\r\n\r\n    if (this.props.shouldAnimateDrop) {\r\n      functionProps.shouldAnimateDrop = this.props.shouldAnimateDrop.bind(null);\r\n    }\r\n\r\n    if (this.props.shouldAcceptDrop) {\r\n      functionProps.shouldAcceptDrop = this.props.shouldAcceptDrop.bind(null);\r\n    }\r\n\r\n    if (this.props.onDragEnter) {\r\n      functionProps.onDragEnter = this.props.onDragEnter.bind(null);\r\n    }\r\n\r\n    if (this.props.onDragLeave) {\r\n      functionProps.onDragLeave = this.props.onDragLeave.bind(null);\r\n    }\r\n\r\n    if (this.props.render) {\r\n      functionProps.render = this.props.render.bind(null);\r\n    }\r\n\r\n    if (this.props.onDropReady) {\r\n      functionProps.onDropReady = this.props.onDropReady.bind(null);\r\n    }\r\n\r\n    if (this.props.getGhostParent) {\r\n      functionProps.getGhostParent = this.props.getGhostParent.bind(null);\r\n    }\r\n\r\n    return Object.assign({}, this.props, functionProps);\r\n  }\r\n}\r\n\r\nexport default Container;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { constants } from 'smooth-dnd';\r\nconst {\r\n\twrapperClass\r\n} = constants;\r\n\r\nexport interface DraggableProps {\r\n\trender?: () => React.ReactElement;\r\n\tclassName?: string;\r\n}\r\n\r\nclass Draggable extends Component<DraggableProps> {\r\n\tpublic static propsTypes = {\r\n\t\trender: PropTypes.func,\r\n\t\tclassName: PropTypes.string,\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.props.render) {\r\n\t\t\treturn React.cloneElement(this.props.render(), { className: wrapperClass });\r\n\t\t}\r\n\t\t\r\n\t\tconst clsName = `${this.props.className ? (this.props.className + ' ') : ''}`\r\n\t\treturn (\r\n\t\t\t<div {...this.props} className={`${clsName}${wrapperClass}`} >\r\n\t\t\t\t{this.props.children}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Draggable;","import { extraSizeForInsertion, translationValue, visibilityValue } from './constants';\r\nimport { Dictionary, ElementX, OffsetSize, Orientation, Position, Rect } from './interfaces';\r\nimport * as Utils from './utils';\r\n\r\nexport interface PropMap {\r\n\t[key: string]: any;\r\n}\r\n\r\nconst horizontalMap: PropMap = {\r\n\tsize: 'offsetWidth',\r\n\tdistanceToParent: 'offsetLeft',\r\n\ttranslate: 'transform',\r\n\tbegin: 'left',\r\n\tend: 'right',\r\n\tdragPosition: 'x',\r\n\tscrollSize: 'scrollWidth',\r\n\toffsetSize: 'offsetWidth',\r\n\tscrollValue: 'scrollLeft',\r\n\tscale: 'scaleX',\r\n\tsetSize: 'width',\r\n\tsetters: {\r\n\t\t'translate': (val: number) => `translate3d(${val}px, 0, 0)`\r\n\t}\r\n};\r\n\r\nconst verticalMap: PropMap = {\r\n\tsize: 'offsetHeight',\r\n\tdistanceToParent: 'offsetTop',\r\n\ttranslate: 'transform',\r\n\tbegin: 'top',\r\n\tend: 'bottom',\r\n\tdragPosition: 'y',\r\n\tscrollSize: 'scrollHeight',\r\n\toffsetSize: 'offsetHeight',\r\n\tscrollValue: 'scrollTop',\r\n\tscale: 'scaleY',\r\n\tsetSize: 'height',\r\n\tsetters: {\r\n\t\t'translate': (val: string) => `translate3d(0,${val}px, 0)`\r\n\t}\r\n};\r\n\r\nfunction orientationDependentProps(map: PropMap) {\r\n\tfunction get(obj: Dictionary, prop:string) {\r\n\t\tconst mappedProp = map[prop];\r\n\t\treturn obj[mappedProp || prop];\r\n\t}\r\n\r\n\tfunction set(obj: Dictionary, prop: string, value: any) {\r\n        requestAnimationFrame(() => {\r\n            obj[map[prop]] = map.setters[prop] ? map.setters[prop](value) : value;\r\n        });\r\n    }\r\n\r\n\treturn { get, set };\r\n}\r\n\r\n\r\n\r\nexport default function layoutManager(containerElement: ElementX, orientation: Orientation, _animationDuration: number) {\r\n\tcontainerElement[extraSizeForInsertion] = 0;\r\n\tconst animationDuration = _animationDuration;\r\n\tconst map = orientation === 'horizontal' ? horizontalMap : verticalMap;\r\n\tconst propMapper = orientationDependentProps(map);\r\n\tconst values: Dictionary = {\r\n\t\ttranslation: 0\r\n\t};\r\n\tlet registeredScrollListener: Function | null = null;\r\n\r\n\tglobal.addEventListener('resize', function() {\r\n\t\tinvalidateContainerRectangles(containerElement);\r\n\t\t// invalidateContainerScale(containerElement);\r\n\t});\r\n\r\n\tsetTimeout(() => {\r\n\t\tinvalidate();\r\n\t}, 10);\r\n\t// invalidate();\r\n\r\n\tconst scrollListener = Utils.listenScrollParent(containerElement, function() {\r\n\t\tinvalidateContainerRectangles(containerElement);\r\n\t\tregisteredScrollListener && registeredScrollListener();\r\n\t});\r\n\tfunction invalidate() {\r\n\t\tinvalidateContainerRectangles(containerElement);\r\n\t\tinvalidateContainerScale(containerElement);\r\n\t}\r\n\r\n\tfunction invalidateContainerRectangles(containerElement: ElementX) {\r\n\t\tvalues.rect = Utils.getContainerRect(containerElement);\r\n\t\tconst visibleRect = Utils.getVisibleRect(containerElement, values.rect);\r\n\t\tif (Utils.isVisible(visibleRect)) {\r\n\t\t\tvalues.lastVisibleRect = values.visibleRect;\r\n\t\t}\r\n\r\n\t\tvalues.visibleRect = visibleRect;\r\n\t}\r\n\r\n\tfunction invalidateContainerScale(containerElement: ElementX) {\r\n\t\tconst rect = containerElement.getBoundingClientRect();\r\n\t\tvalues.scaleX = containerElement.offsetWidth ? ((rect.right - rect.left) / containerElement.offsetWidth) : 1;\r\n\t\tvalues.scaleY = containerElement.offsetHeight ? ((rect.bottom - rect.top) / containerElement.offsetHeight) : 1;\r\n\t}\r\n\r\n\tfunction getContainerRectangles() {\r\n\t\treturn {\r\n\t\t\trect: values.rect,\r\n\t\t\tvisibleRect: values.visibleRect,\r\n\t\t\tlastVisibleRect: values.lastVisibleRect\r\n\t\t};\r\n\t}\r\n\r\n\tfunction getBeginEndOfDOMRect(rect: Rect) {\r\n\t\treturn {\r\n\t\t\tbegin: propMapper.get(rect, 'begin'),\r\n\t\t\tend: propMapper.get(rect, 'end')\r\n\t\t};\r\n\t}\r\n\r\n\tfunction getBeginEndOfContainer() {\r\n\t\tconst begin = propMapper.get(values.rect, 'begin') + values.translation;\r\n\t\tconst end = propMapper.get(values.rect, 'end') + values.translation;\r\n\t\treturn { begin, end };\r\n\t}\r\n\r\n\tfunction getBeginEndOfContainerVisibleRect() {\r\n\t\tconst begin = propMapper.get(values.visibleRect, 'begin') + values.translation;\r\n\t\tconst end = propMapper.get(values.visibleRect, 'end') + values.translation;\r\n\t\treturn { begin, end };\r\n\t}\r\n\r\n\tfunction getSize(element: HTMLElement | OffsetSize) {\r\n\t\tconst htmlElement = element as HTMLElement;\r\n\t\tif (htmlElement.tagName) {\r\n\t\t\tconst rect = htmlElement.getBoundingClientRect();\r\n\t\t\treturn orientation === 'vertical' ? rect.bottom - rect.top : rect.right - rect.left;\r\n\t\t}\r\n\r\n\t\treturn propMapper.get(element, 'size') * propMapper.get(values, 'scale');\r\n\t}\r\n\r\n\tfunction getDistanceToOffsetParent(element: ElementX) {\r\n\t\tconst distance = propMapper.get(element, 'distanceToParent') + (element[translationValue] || 0);\r\n\t\treturn distance * propMapper.get(values, 'scale');\r\n\t}\r\n\r\n\tfunction getBeginEnd(element: HTMLElement) {\r\n\t\tconst begin = getDistanceToOffsetParent(element) + (propMapper.get(values.rect, 'begin') + values.translation) - propMapper.get(containerElement, 'scrollValue');\r\n\t\treturn {\r\n\t\t\tbegin,\r\n\t\t\tend: begin + getSize(element) * propMapper.get(values, 'scale')\r\n\t\t};\r\n\t}\r\n\r\n\tfunction setSize(element: HTMLElement | CSSStyleDeclaration, size: string) {\r\n\t\tpropMapper.set(element, 'setSize', size);\r\n\t}\r\n\r\n\tfunction getAxisValue(position: Position) {\r\n\t\treturn propMapper.get(position, 'dragPosition');\r\n\t}\r\n\r\n\tfunction setTranslation(element: ElementX, translation: number) {\r\n\t\tif (!translation) {\r\n\t\t\telement.style.removeProperty('transform');\r\n\t\t} else {\r\n\t\t\tpropMapper.set(element.style, 'translate', translation);\r\n\t\t}\r\n\t\telement[translationValue] = translation;\r\n\t}\r\n\r\n\tfunction getTranslation(element: ElementX) {\r\n\t\treturn element[translationValue];\r\n\t}\r\n\r\n\tfunction setVisibility(element: ElementX, isVisible: boolean) {\r\n\t\tif (element[visibilityValue] === undefined || element[visibilityValue] !== isVisible) {\r\n\t\t\tif (isVisible) {\r\n\t\t\t\telement.style.removeProperty('visibility');\r\n\t\t\t} else {\r\n\t\t\t\telement.style.visibility = 'hidden';\r\n\t\t\t}\r\n\t\t\telement[visibilityValue] = isVisible;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction isVisible(element: ElementX) {\r\n\t\treturn element[visibilityValue] === undefined || element[visibilityValue];\r\n\t}\r\n\r\n\tfunction isInVisibleRect(x: number, y: number) {\r\n\t\tlet { left, top, right, bottom } = values.visibleRect;\r\n\r\n\t\t// if there is no wrapper in rect size will be 0 and wont accept any drop\r\n\t\t// so make sure at least there is 30px difference\r\n\t\tif (bottom - top < 2) {\r\n\t\t\tbottom = top + 30;\r\n\t\t}\r\n\t\tconst containerRect = values.rect;\r\n\t\tif (orientation === 'vertical') {\r\n\t\t\treturn x > containerRect.left && x < containerRect.right && y > top && y < bottom;\r\n\t\t} else {\r\n\t\t\treturn x > left && x < right && y > containerRect.top && y < containerRect.bottom;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getTopLeftOfElementBegin(begin: number) {\r\n\t\tlet top = 0;\r\n\t\tlet left = 0;\r\n\t\tif (orientation === 'horizontal') {\r\n\t\t\tleft = begin;\r\n\t\t\ttop = values.rect.top;\r\n\t\t} else {\r\n\t\t\tleft = values.rect.left;\r\n\t\t\ttop = begin;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttop, left\r\n\t\t};\r\n\t}\r\n\r\n\tfunction getScrollSize(element: HTMLElement) {\r\n\t\treturn propMapper.get(element, 'scrollSize');\r\n\t}\r\n\r\n\tfunction getScrollValue(element: HTMLElement) {\r\n\t\treturn propMapper.get(element, 'scrollValue');\r\n\t}\r\n\r\n\tfunction setScrollValue(element:HTMLElement, val: number) {\r\n\t\treturn propMapper.set(element, 'scrollValue', val);\r\n\t}\r\n\r\n\tfunction getPosition(position: Position) {\r\n\t\treturn getAxisValue(position);\r\n\t}\r\n\r\n\tfunction invalidateRects() {\r\n\t\tinvalidateContainerRectangles(containerElement);\r\n\t}\r\n\r\n\tfunction setBegin(style: CSSStyleDeclaration, value: string) {\r\n\t\tpropMapper.set(style, 'begin', value);\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetSize,\r\n\t\tgetContainerRectangles,\r\n\t\tgetBeginEndOfDOMRect,\r\n\t\tgetBeginEndOfContainer,\r\n\t\tgetBeginEndOfContainerVisibleRect,\r\n\t\tgetBeginEnd,\r\n\t\tgetAxisValue,\r\n\t\tsetTranslation,\r\n\t\tgetTranslation,\r\n\t\tsetVisibility,\r\n\t\tisVisible,\r\n\t\tisInVisibleRect,\r\n\t\tsetSize,\r\n\t\tgetTopLeftOfElementBegin,\r\n\t\tgetScrollSize,\r\n\t\tgetScrollValue,\r\n\t\tsetScrollValue,\r\n\t\tinvalidate,\r\n\t\tinvalidateRects,\r\n\t\tgetPosition,\r\n\t\tsetBegin,\r\n\t};\r\n}","import { DraggableInfo, IContainer, Axis, Rect, ScrollAxis, Position } from \"./interfaces\";\r\nimport { getScrollingAxis, hasClass, getVisibleRect } from \"./utils\";\r\nimport { preventAutoScrollClass } from \"./constants\";\r\n\r\ntype Direction = 'begin' | 'end';\r\n\r\nconst maxSpeed = 1500; // px/s\r\n\r\ninterface Animator {\r\n\tstop: () => void;\r\n\tanimate: (direnction: Direction, speed: number) => void;\r\n}\r\n\r\ninterface ScrollParams {\r\n\tdirection: Direction,\r\n\tspeedFactor: number;\r\n}\r\n\r\ninterface AnimationState {\r\n\tanimator: Animator;\r\n\tscrollParams?: ScrollParams | null;\r\n}\r\n\r\ninterface AxisAnimation {\r\n\tx?: AnimationState;\r\n\ty?: AnimationState;\r\n}\r\n\r\ninterface ScrollerAnimator {\r\n\taxisAnimations: AxisAnimation;\r\n\tscrollerElement: HTMLElement;\r\n\tgetRect: () => Rect;\r\n\tcachedRect?: Rect;\r\n}\r\n\r\nfunction getScrollParams(position: Position, axis: Axis, rect: Rect): ScrollParams | null {\r\n\tconst { left, right, top, bottom } = rect;\r\n\tconst { x, y } = position;\r\n\tif (x < left || x > right || y < top || y > bottom) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tlet begin;\r\n\tlet end;\r\n\tlet pos;\r\n\tif (axis === 'x') {\r\n\t\tbegin = left;\r\n\t\tend = right;\r\n\t\tpos = x;\r\n\t} else {\r\n\t\tbegin = top;\r\n\t\tend = bottom;\r\n\t\tpos = y;\r\n\t}\r\n\r\n\tconst scrollerSize = end - begin;\r\n\r\n\tconst moveDistance = scrollerSize > 400 ? 100 : scrollerSize / 4;\r\n\tif (end - pos < moveDistance) {\r\n\t\treturn {\r\n\t\t\tdirection: 'end',\r\n\t\t\tspeedFactor: (moveDistance - (end - pos)) / moveDistance\r\n\t\t};\r\n\t} else if (pos - begin < moveDistance) {\r\n\t\t// console.log(pos - begin);\r\n\t\treturn {\r\n\t\t\tdirection: 'begin',\r\n\t\t\tspeedFactor: (moveDistance - (pos - begin)) / moveDistance\r\n\t\t};\r\n\t}\r\n\r\n\treturn null;\r\n}\r\n\r\nfunction addScrollValue(element: HTMLElement | Window, axis: Axis, value: number) {\r\n\tif (element) {\r\n\t\tif (element !== window) {\r\n\t\t\tif (axis === 'x') {\r\n\t\t\t\t(element as HTMLElement).scrollLeft += value;\r\n\t\t\t} else {\r\n\t\t\t\t(element as HTMLElement).scrollTop += value;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (axis === 'x') {\r\n\t\t\t\telement.scrollBy(value, 0);\r\n\t\t\t} else {\r\n\t\t\t\telement.scrollBy(0, value);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst createAnimator = (element: HTMLElement, axis: Axis = 'y'): Animator => {\r\n\tlet isAnimating = false;\r\n\tlet request: number | null = null;\r\n\tlet startTime: number | null = null;\r\n\tlet direction: Direction | null = null;\r\n\tlet speed: number | null = null;\r\n\r\n\tfunction animate(_direction: Direction, _speed: number) {\r\n\t\tdirection = _direction;\r\n\t\tspeed = _speed;\r\n\t\tisAnimating = true;\r\n\t\tif (isAnimating) {\r\n\t\t\tstart();\r\n\t\t}\r\n\t}\r\n\r\n\tfunction start() {\r\n\t\tif (request === null) {\r\n\t\t\trequest = requestAnimationFrame((timestamp) => {\r\n\t\t\t\tif (startTime === null) { startTime = timestamp; }\r\n\t\t\t\tconst timeDiff = timestamp - startTime;\r\n\t\t\t\tstartTime = timestamp;\r\n\t\t\t\tlet distanceDiff = (timeDiff / 1000) * speed!;\r\n\t\t\t\tdistanceDiff = direction === 'begin' ? (0 - distanceDiff) : distanceDiff;\r\n\t\t\t\taddScrollValue(element, axis, distanceDiff);\r\n\t\t\t\trequest = null;\r\n\t\t\t\tstart();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction stop() {\r\n\t\tif (isAnimating) {\r\n\t\t\tcancelAnimationFrame(request!);\r\n\t\t\tisAnimating = false;\r\n\t\t\tstartTime = null;\r\n\t\t\trequest = null;\r\n\t\t}\r\n\t}\r\n\r\n\treturn {\r\n\t\tanimate,\r\n\t\tstop\r\n\t};\r\n}\r\n\r\nfunction rectangleGetter(element: HTMLElement) {\r\n\treturn () => {\r\n\t\treturn getVisibleRect(element, element.getBoundingClientRect())\r\n\t}\r\n}\r\n\r\nfunction getScrollerAnimator(container: IContainer): ScrollerAnimator[] {\r\n\tconst scrollerAnimators: ScrollerAnimator[] = [];\r\n\r\n\tlet current: HTMLElement | null = container.element;\r\n\r\n\twhile (current) {\r\n\t\tconst scrollingAxis = getScrollingAxis(current);\r\n\r\n\t\tif (scrollingAxis && !hasClass(current, preventAutoScrollClass)) {\r\n\r\n\t\t\tconst axisAnimations: AxisAnimation = {};\r\n\t\t\tswitch (scrollingAxis) {\r\n\t\t\t\tcase ScrollAxis.xy: {\r\n\t\t\t\t\taxisAnimations.x = {\r\n\t\t\t\t\t\tanimator: createAnimator(current, 'x'),\r\n\t\t\t\t\t}\r\n\t\t\t\t\taxisAnimations.y = {\r\n\t\t\t\t\t\tanimator: createAnimator(current, 'y'),\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase ScrollAxis.x: {\r\n\t\t\t\t\taxisAnimations.x = {\r\n\t\t\t\t\t\tanimator: createAnimator(current, 'x'),\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase ScrollAxis.y: {\r\n\t\t\t\t\taxisAnimations.y = {\r\n\t\t\t\t\t\tanimator: createAnimator(current, 'y'),\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t}\r\n\r\n\t\t\tscrollerAnimators.push({\r\n\t\t\t\taxisAnimations,\r\n\t\t\t\tgetRect: rectangleGetter(current),\r\n\t\t\t\tscrollerElement: current,\r\n\t\t\t})\r\n\t\t}\r\n\t\tcurrent = current.parentElement;\r\n\t}\r\n\treturn scrollerAnimators;\r\n}\r\n\r\nfunction setScrollParams(animatorInfos: ScrollerAnimator[], position: Position) {\r\n\tanimatorInfos.forEach((animator: ScrollerAnimator) => {\r\n\t\tconst { axisAnimations, getRect } = animator;\r\n\t\tconst rect = getRect();\r\n\t\tif (axisAnimations.x) {\r\n\t\t\taxisAnimations.x.scrollParams = getScrollParams(position, 'x', rect)\r\n\t\t\tanimator.cachedRect = rect;\r\n\t\t}\r\n\r\n\t\tif (axisAnimations.y) {\r\n\t\t\taxisAnimations.y.scrollParams = getScrollParams(position, 'y', rect)\r\n\t\t\tanimator.cachedRect = rect;\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction getTopmostScrollAnimator(animatorInfos: ScrollerAnimator[], position: Position): ScrollerAnimator | null{\r\n\tlet current = document.elementFromPoint(position.x, position.y);\r\n\t\r\n\twhile (current) {\r\n\t\tconst scrollAnimator = animatorInfos.find(p => p.scrollerElement === current);\r\n\t\tif (scrollAnimator) {\r\n\t\t\treturn scrollAnimator;\r\n\t\t}\r\n\r\n\t\tcurrent = current.parentElement;\r\n\t}\r\n\r\n\treturn null;\r\n}\r\n\r\nexport default (containers: IContainer[]) => {\r\n\tconst animatorInfos = containers.reduce((acc: ScrollerAnimator[], container: IContainer) => {\r\n\t\tconst filteredAnimators = getScrollerAnimator(container).filter(p => {\r\n\t\t\treturn !acc.find(q => q.scrollerElement === p.scrollerElement);\r\n\t\t});\r\n\t\treturn [...acc, ...filteredAnimators];\r\n\t}, []);\r\n\r\n\r\n\treturn ({ draggableInfo, reset }: { draggableInfo?: DraggableInfo; reset?: boolean }) => {\r\n\t\tif (reset) {\r\n\t\t\tanimatorInfos.forEach(p => {\r\n\t\t\t\tp.axisAnimations.x && p.axisAnimations.x.animator.stop();\r\n\t\t\t\tp.axisAnimations.y && p.axisAnimations.y.animator.stop();\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (draggableInfo) {\r\n\t\t\tsetScrollParams(animatorInfos, draggableInfo.mousePosition);\r\n\r\n\t\t\tanimatorInfos.forEach(animator => {\r\n\t\t\t\tconst { x, y } = animator.axisAnimations;\r\n\t\t\t\tif (x) {\r\n\t\t\t\t\tif (x.scrollParams) {\r\n\t\t\t\t\t\tconst { direction, speedFactor } = x.scrollParams;\r\n\t\t\t\t\t\tx.animator.animate(direction, speedFactor * maxSpeed);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tx.animator.stop();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (y) {\r\n\t\t\t\t\tif (y.scrollParams) {\r\n\t\t\t\t\t\tconst { direction, speedFactor } = y.scrollParams;\r\n\t\t\t\t\t\ty.animator.animate(direction, speedFactor * maxSpeed);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ty.animator.stop();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tconst overlappingAnimators = animatorInfos.filter(p => p.cachedRect);\r\n\t\t\tif (overlappingAnimators.length && overlappingAnimators.length > 1) {\r\n\t\t\t\t// stop animations except topmost\r\n\t\t\t\tconst topScrollerAnimator = getTopmostScrollAnimator(overlappingAnimators, draggableInfo.mousePosition);\r\n\r\n\t\t\t\tif (topScrollerAnimator) {\r\n\t\t\t\t\toverlappingAnimators.forEach(p => {\r\n\t\t\t\t\t\tif (p !== topScrollerAnimator) {\r\n\t\t\t\t\t\t\tp.axisAnimations.x && p.axisAnimations.x.animator.stop();\r\n\t\t\t\t\t\t\tp.axisAnimations.y && p.axisAnimations.y.animator.stop();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","declare var global: any;\r\n\r\n(function (constructor) {\r\n  if (constructor && constructor.prototype && !constructor.prototype.matches) {\r\n    constructor.prototype.matches =\r\n      constructor.prototype.matchesSelector ||\r\n      constructor.prototype.mozMatchesSelector ||\r\n      constructor.prototype.msMatchesSelector ||\r\n      constructor.prototype.oMatchesSelector ||\r\n      constructor.prototype.webkitMatchesSelector ||\r\n      function(s: string) {\r\n        var matches = (this.document || this.ownerDocument).querySelectorAll(s),\r\n          i = matches.length;\r\n        while (--i >= 0 && matches.item(i) !== this) {}\r\n        return i > -1;\r\n      };\r\n  }\r\n})(global.Node || global.Element);\r\n\r\n// Overwrites native 'firstElementChild' prototype.\r\n// Adds Document & DocumentFragment support for IE9 & Safari.\r\n// Returns array instead of HTMLCollection.\r\n(function(constructor) {\r\n  if (\r\n    constructor &&\r\n    constructor.prototype &&\r\n    constructor.prototype.firstElementChild == null\r\n  ) {\r\n    Object.defineProperty(constructor.prototype, \"firstElementChild\", {\r\n      get: function() {\r\n        var node,\r\n          nodes = this.childNodes,\r\n          i = 0;\r\n        while ((node = nodes[i++])) {\r\n          if (node.nodeType === 1) {\r\n            return node;\r\n          }\r\n        }\r\n        return null;\r\n      }\r\n    });\r\n  }\r\n})(global.Node || global.Element);\r\n\r\n// Production steps of ECMA-262, Edition 5, 15.4.4.17\r\n// Reference: http://es5.github.io/#x15.4.4.17\r\nif (!Array.prototype.some) {\r\n  Array.prototype.some = function(fun /*, thisArg*/) {\r\n    \"use strict\";\r\n\r\n    if (this == null) {\r\n      throw new TypeError(\"Array.prototype.some called on null or undefined\");\r\n    }\r\n\r\n    if (typeof fun !== \"function\") {\r\n      throw new TypeError();\r\n    }\r\n\r\n    var t = Object(this);\r\n    var len = t.length >>> 0;\r\n\r\n    var thisArg = arguments.length >= 2 ? arguments[1] : void 0;\r\n    for (var i = 0; i < len; i++) {\r\n      if (i in t && fun.call(thisArg, t[i], i, t)) {\r\n        return true;\r\n      }\r\n    }\r\n\r\n    return false;\r\n  };\r\n}\r\n","import React, { Component } from 'react';\r\nimport container from 'smooth-dnd';\r\n\r\nexport default class extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\titems: Array(50).fill().map((p, i) => i),\r\n\t\t\titems2: Array(50).fill().map((p, i) => i),\r\n\t\t};\r\n\r\n\t\tthis.dragStyle = {\r\n\t\t\theight: '50px',\r\n\t\t\ttextAlign: 'center',\r\n\t\t\tborder: '1px solid #ccc',\r\n\t\t\tvertialAlign: 'middle',\r\n\t\t\tlineHeight: '50px',\r\n\t\t\tbackgroundColor: 'white',\r\n\t\t\tmarginTop: '0px'\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\twindow.container = container(this.container, { groupName: '1', behaviour: 'copy' });\r\n\t\twindow.container2 = container(this.container2, { groupName: '1', dragHandleSelector: '.handle' });\r\n\t\twindow.container3 = container(this.container3, { groupName: '1', dragBeginDelay: 50, animationDuration: 300, dragClass: 'ghost' });\r\n\t\twindow.container4 = container(this.container4, { orientation: 'horizontal' });\r\n\t}\r\n\r\n\r\n\trender() {\r\n\t\tconst childs = this.state.items.map(p => (\r\n\t\t\t<div style={Object.assign({}, this.dragStyle, { height: `${50 + (Math.random() * 200)}px` })} key={p}>Draggable {p}</div>\r\n\t\t));\r\n\r\n\t\tconst horizontalChild = this.state.items.slice(0, 10).map(p => (\r\n\t\t\t<div style={Object.assign({}, this.dragStyle, {height: '100px', width: '150px' })} key={p}>Draggable {p}</div>\r\n\t\t));\r\n\r\n\t\t// childs.push(<div style={Object.assign({}, this.dragStyle, { height: `0px` })} key={'asdasds'}></div>);\r\n\t\t// horizontalChild.push(<div style={Object.assign({}, this.dragStyle, { width: `0px` })} key={'qqqqqqqq'}></div>);\r\n\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<div style={{ display: 'flex', flexDirection: 'row' }}>\r\n\t\t\t\t\t<div style={{ float: 'none', width: '510px', transform: 'scale3d(1,1,1)', backgroundColor: '#ccc', margin: '50px', border: '1px solid #ccc' }}>\r\n\t\t\t\t\t\t<div style={{ float: 'none', position: 'relative', height: '800px', overflowY: 'auto' }} ref={e => { this.container = e; }}>\r\n\t\t\t\t\t\t\t{childs}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={{ width: '510px', height: '800px', overflowY: 'auto', transform: 'scale3d(1,1,1)', backgroundColor: '#ccc', margin: '50px', border: '1px solid #ccc' }}>\r\n\t\t\t\t\t\t<div tabIndex=\"-1\" id=\"a\" style={{ float: 'none', position: 'relative' }} ref={e => { this.container2 = e; }}>\r\n\t\t\t\t\t\t\t{this.state.items.map(p => (\r\n\t\t\t\t\t\t\t\t<div style={Object.assign({}, this.dragStyle, { margin: '2px 50px', backgroundColor: '#abc', height: `${50 + (Math.random() * 0)}px` })} key={p}>\r\n\t\t\t\t\t\t\t\t\t<div className=\"handle\" style={{float: 'left',width: '30px', height:'30px', backgroundColor: '#345'}}></div>\t\r\n\t\t\t\t\t\t\t\t\tDraggable {p}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={{ float: 'none', width: '510px', height: '800px', overflowY: 'auto', transform: 'scale3d(1,1,1)', backgroundColor: '#ccc', margin: '50px', border: '1px solid #ccc' }}>\r\n\t\t\t\t\t\t<div style={{ float: 'none', position: 'relative', paddingBottom: '100px' }} ref={e => { this.container3 = e; }}>\r\n\t\t\t\t\t\t\t{this.state.items.map(p => (\r\n\t\t\t\t\t\t\t\t<div style={Object.assign({}, this.dragStyle, { height: `${50 + (Math.random() * 0)}px` })} key={p}>Draggable {p}</div>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div style={{ overflowX: 'auto', backgroundColor: '#ccc', border: '1px solid #ccc', margin: '100px' }}>\r\n\t\t\t\t\t<div ref={e => { this.container4 = e; }}>\r\n\t\t\t\t\t\t{horizontalChild}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\r\n\t\t\t\t{/* <div style={{ position: 'fixed', top: '100px', left: '100px', bottom: '100px', width: '300px', overflowY: 'auto', backgroundColor: '#ccc', border: '1px solid #ccc' }}>\r\n\t\t\t\t\t<div style={{ float: 'none', position: 'relative' }} ref={e => { this.container = e; }}>\r\n\t\t\t\t\t\t{childs}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style={{ marginLeft: '500px', width: '400px', paddingBottom: '200px', height: '800px', overflow: 'auto' }} ref={e => { this.container3 = e; }}>\r\n\t\t\t\t\t{this.state.items2.map(p => (\r\n\t\t\t\t\t\t<div style={Object.assign({}, this.dragStyle, { margin: '1px', height: `${50 + (Math.random() * 0)}px` })} key={p}>Draggable {p}</div>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div> */}\r\n\t\t\t</div>\r\n\t\t);\r\n\t\t// return (\r\n\t\t//   <div style={{ width: '510px', height: '800px', overflowY: 'auto', transform: 'scale3d(1,1,1)', backgroundColor: '#ccc', margin: '100px' }}>\r\n\t\t//     <div ref={e => this.container = e}>\r\n\t\t//       <div style={{ border: '1px solid #ccc', backgroundColor: '#fff', height: '30px' }}>D1</div>\r\n\t\t//       <div style={{ border: '1px solid #ccc', backgroundColor: '#fff', height: '100px' }}>D2</div>\r\n\t\t//       <div style={{ border: '1px solid #ccc', backgroundColor: '#fff', height: '30px' }}>D3</div>\r\n\t\t//     </div>\r\n\t\t//   </div>\r\n\t\t// )\r\n\t}\r\n}","import React, { Component } from 'react';\r\nimport { Container, Draggable } from 'react-smooth-dnd';\r\n\r\nconst itemCls = {\r\n\theight: '50px',\r\n\tborder: '1px solid #ccc',\r\n\tmargin: '5px',\r\n\ttextAlign: 'center'\r\n};\r\n\r\nclass Nested extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Container groupName=\"1\">\r\n\t\t\t\t\t\t<div style={itemCls}>Draggable</div>\r\n\t\t\t\t\t\t<div style={itemCls}>Draggable 1</div>\r\n\t\t\t\t\t\t<div style={itemCls}>Draggable 2</div>\r\n\t\t\t\t\t\t<div style={itemCls}>Draggable 3</div>\r\n\t\t\t\t\t\t<div style={itemCls}>Draggable 4</div>\r\n\t\t\t\t\t\t<div style={{padding: '10px', backgroundColor: '#bca'}}>\r\n\t\t\t\t\t\t\t<Container groupName=\"1\">\r\n\t\t\t\t\t\t\t\t<div style={itemCls}>Draggable 1</div>\r\n\t\t\t\t\t\t\t\t<div style={itemCls}>Draggable 1 1</div>\r\n\t\t\t\t\t\t\t\t<div style={itemCls}>Draggable 1 2</div>\r\n\t\t\t\t\t\t\t\t<div style={itemCls}>Draggable 1 3</div>\r\n\t\t\t\t\t\t\t\t<div style={itemCls}>Draggable 1 4</div>\r\n\t\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Container>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Nested;","import React, { Component } from 'react';\r\n\r\nexport default class extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div id=\"a\">\r\n\t\t\t\t<div id=\"b\" style={{\r\n\t\t\t\t\twidth: '500px',\r\n\t\t\t\t\theight: '1000px',\r\n\t\t\t\t\tfloat: 'left',\r\n\t\t\t\t\tbackgroundColor: 'yellow'\r\n\t\t\t\t}}>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n","\r\nexport const applyDrag = (arr, dragResult) => {\r\n  const { removedIndex, addedIndex, payload } = dragResult;\r\n  if (removedIndex === null && addedIndex === null) return arr;\r\n\r\n  const result = [...arr];\r\n  let itemToAdd = payload;\r\n\r\n  if (removedIndex !== null) {\r\n    itemToAdd = result.splice(removedIndex, 1)[0];\r\n  }\r\n\r\n  if (addedIndex !== null) {\r\n    result.splice(addedIndex, 0, itemToAdd);\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\nexport const generateItems = (count, creator) => {\r\n  const result = [];\r\n  for (let i = 0; i < count; i++) {\r\n    result.push(creator(i));\r\n  }\r\n  return result;\r\n};","import React, { Component } from 'react';\r\nimport { Container, Draggable } from 'react-smooth-dnd';\r\nimport { applyDrag, generateItems } from './utils';\r\n\r\nclass Simple extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      items: generateItems(50, (index) => {\r\n        return {\r\n          id: index,\r\n          data: 'Draggable' + index\r\n        };\r\n      })\r\n    };\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"simple-page\">\r\n          <Container onDrop={e => this.setState({ items: applyDrag(this.state.items, e) })}>\r\n            {this.state.items.map(p => {\r\n              return (\r\n                <Draggable key={p.id}>\r\n                  <div className=\"draggable-item\">\r\n                    {p.data}\r\n                  </div>\r\n                </Draggable>\r\n              );\r\n            })}\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass SimpleScroller extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      items: generateItems(50, (index) => {\r\n        return {\r\n          id: index,\r\n          data: 'Draggable' + index\r\n        };\r\n      })\r\n    };\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"simple-page-scroller\">\r\n          <Container onDrop={e => this.setState({ items: applyDrag(this.state.items, e) })}>\r\n            {this.state.items.map(p => {\r\n              return (\r\n                <Draggable key={p.id}>\r\n                  <div className=\"draggable-item\">\r\n                    {p.data}\r\n                  </div>\r\n                </Draggable>\r\n              );\r\n            })}\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport {\r\n  Simple,\r\n  SimpleScroller\r\n};","import React, { Component } from 'react';\r\nimport { Container, Draggable } from 'react-smooth-dnd';\r\nimport { applyDrag, generateItems } from './utils';\r\n\r\nconst groupStyle = {\r\n  margin: '50px',\r\n  overflowX: 'auto',\r\n  // border: '1px solid #ccc'\r\n};\r\n\r\nclass SimpleHorizontal extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      items: generateItems(15, (i) => ({ id: '2' + i, data: `Draggable - ${i}` })),\r\n    };\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div style={groupStyle}>\r\n          <Container orientation=\"horizontal\" onDrop={e => this.setState({ items: applyDrag(this.state.items, e) })}>\r\n            {\r\n              this.state.items.map(p => {\r\n                return (\r\n                  <Draggable key={p.id}>\r\n                    <div className=\"draggable-item-horizontal\">\r\n                      {p.data}\r\n                    </div>\r\n                  </Draggable>\r\n                );\r\n              })\r\n            }\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SimpleHorizontal;","import React, { Component } from 'react';\r\nimport { Container, Draggable } from 'react-smooth-dnd';\r\nimport { applyDrag, generateItems } from './utils';\r\nconst groupStyle = {\r\n  marginLeft: '50px',\r\n  flex: 1\r\n};\r\n\r\nclass Groups extends Component {\r\n  constructor() {\r\n    super();\r\n\r\n    this.state = {\r\n      items1: generateItems(15, (i) => ({ id: '1' + i, data: `Draggable 1 - ${i}` })),\r\n      items2: generateItems(15, (i) => ({ id: '2' + i, data: `Draggable 2 - ${i}` })),\r\n      items3: generateItems(15, (i) => ({ id: '3' + i, data: `Draggable 3 - ${i}` })),\r\n      items4: generateItems(15, (i) => ({ id: '4' + i, data: `Draggable 4 - ${i}` })),\r\n    };\r\n  }\r\n  render() {\r\n    return (\r\n      <div style={{ display: 'flex', justifyContent: 'stretch', marginTop: '50px', marginRight: '50px' }}>\r\n        <div style={groupStyle}>\r\n          <Container groupName=\"1\" getChildPayload={i => this.state.items1[i]} onDrop={e => this.setState({ items1: applyDrag(this.state.items1, e) })}>\r\n            {\r\n              this.state.items1.map(p => {\r\n                return (\r\n                  <Draggable key={p.id}>\r\n                    <div className=\"draggable-item\">\r\n                      {p.data}\r\n                    </div>\r\n                  </Draggable>\r\n                );\r\n              })\r\n            }\r\n          </Container>\r\n        </div>\r\n        <div style={groupStyle}>\r\n          <Container groupName=\"1\" getChildPayload={i => this.state.items2[i]} onDrop={e => this.setState({ items2: applyDrag(this.state.items2, e) })}>\r\n            {\r\n              this.state.items2.map(p => {\r\n                return (\r\n                  <Draggable key={p.id}>\r\n                    <div className=\"draggable-item\">\r\n                      {p.data}\r\n                    </div>\r\n                  </Draggable>\r\n                );\r\n              })\r\n            }\r\n          </Container>\r\n        </div>\r\n        <div style={groupStyle}>\r\n          <Container groupName=\"1\" getChildPayload={i => this.state.items3[i]} onDrop={e => this.setState({ items3: applyDrag(this.state.items3, e) })}>\r\n            {\r\n              this.state.items3.map(p => {\r\n                return (\r\n                  <Draggable key={p.id}>\r\n                    <div className=\"draggable-item\">\r\n                      {p.data}\r\n                    </div>\r\n                  </Draggable>\r\n                );\r\n              })\r\n            }\r\n          </Container>\r\n        </div>\r\n        <div style={groupStyle}>\r\n          <Container groupName=\"1\" getChildPayload={i => this.state.items4[i]} onDrop={e => this.setState({ items4: applyDrag(this.state.items4, e) })}>\r\n            {\r\n              this.state.items4.map(p => {\r\n                return (\r\n                  <Draggable key={p.id}>\r\n                    <div className=\"draggable-item\">\r\n                      {p.data}\r\n                    </div>\r\n                  </Draggable>\r\n                );\r\n              })\r\n            }\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nGroups.propTypes = {\r\n\r\n};\r\n\r\nexport default Groups;","import React, { Component } from 'react';\r\nimport { Container, Draggable } from 'react-smooth-dnd';\r\nimport { applyDrag, generateItems } from './utils';\r\n\r\nconst groupStyle = {\r\n  marginLeft: '50px',\r\n  flex: 1\r\n}\r\n\r\nclass Copy extends Component {\r\n  constructor() {\r\n    super();\r\n\r\n    this.state = {\r\n      items1: generateItems(15, (i) => ({ id: '1' + i, data: `Source Draggable - ${i}` })),\r\n      items2: generateItems(15, (i) => ({ id: '2' + i, data: `Draggable 2 - ${i}` })),\r\n      items3: generateItems(15, (i) => ({ id: '3' + i, data: `Draggable 3 - ${i}` })),\r\n      items4: generateItems(15, (i) => ({ id: '4' + i, data: `Draggable 4 - ${i}` })),\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <div style={{ display: 'flex', justifyContent: 'stretch', marginTop: '50px', marginRight: '50px' }}>\r\n        <div style={groupStyle}>\r\n          <Container groupName=\"1\" behaviour=\"copy\" getChildPayload={i => this.state.items1[i]} onDrop={e => this.setState({ items1: applyDrag(this.state.items1, e) })}>\r\n            {\r\n              this.state.items1.map((p,i) => {\r\n                return (\r\n                  <Draggable key={i}>\r\n                    <div className=\"draggable-item\">\r\n                      {p.data}\r\n                    </div>\r\n                  </Draggable>\r\n                );\r\n              })\r\n            }\r\n          </Container>\r\n        </div>\r\n        <div style={groupStyle}>\r\n          <Container groupName=\"1\" getChildPayload={i => this.state.items2[i]} onDrop={e => this.setState({ items2: applyDrag(this.state.items2, e) })}>\r\n            {\r\n              this.state.items2.map((p, i) => {\r\n                return (\r\n                  <Draggable key={i}>\r\n                    <div className=\"draggable-item\">\r\n                      {p.data}\r\n                    </div>\r\n                  </Draggable>\r\n                );\r\n              })\r\n            }\r\n          </Container>\r\n        </div>        \r\n        <div style={groupStyle}>\r\n          <Container groupName=\"1\" getChildPayload={i => this.state.items3[i]} onDrop={e => this.setState({ items3: applyDrag(this.state.items3, e) })}>\r\n            {\r\n              this.state.items3.map(p => {\r\n                return (\r\n                  <Draggable key={p.id}>\r\n                    <div className=\"draggable-item\">\r\n                      {p.data}\r\n                    </div>\r\n                  </Draggable>\r\n                );\r\n              })\r\n            }\r\n          </Container>\r\n        </div>        \r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nCopy.propTypes = {\r\n\r\n};\r\n\r\nexport default Copy;","import React, { Component } from 'react';\r\nimport { Container, Draggable } from 'react-smooth-dnd';\r\nimport { applyDrag, generateItems } from './utils';\r\n\r\nconst groupStyle = {\r\n  margin: '50px',\r\n  overflowX: 'auto',\r\n  // border: '1px solid #ccc'\r\n};\r\n\r\nclass Horizontal extends Component {\r\n  constructor() {\r\n    super();\r\n\r\n    this.state = {\r\n      items1: generateItems(5, (i) => ({ id: '1' + i, data: `Draggable 1 - ${i}` })),\r\n      items2: generateItems(15, (i) => ({ id: '2' + i, data: `Draggable 2 - ${i}` })),\r\n      items3: generateItems(15, (i) => ({ id: '3' + i, data: `Draggable 3 - ${i}` })),\r\n      items4: generateItems(15, (i) => ({ id: '4' + i, data: `Draggable 4 - ${i}` })),\r\n    };\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Container groupName=\"1\" orientation=\"horizontal\" style={groupStyle} getChildPayload={i => this.state.items1[i]} onDrop={e => this.setState({ items1: applyDrag(this.state.items1, e) })}>\r\n          {\r\n            this.state.items1.map(p => {\r\n              return (\r\n                <Draggable key={p.id}>\r\n                  <div className=\"draggable-item-horizontal\">\r\n                    {p.data}\r\n                  </div>\r\n                </Draggable>\r\n              );\r\n            })\r\n          }\r\n        </Container>\r\n        <div style={groupStyle}>\r\n          <Container groupName=\"1\" orientation=\"horizontal\" getChildPayload={i => this.state.items2[i]} onDrop={e => this.setState({ items2: applyDrag(this.state.items2, e) })}>\r\n            {\r\n              this.state.items2.map(p => {\r\n                return (\r\n                  <Draggable key={p.id}>\r\n                    <div className=\"draggable-item-horizontal\">\r\n                      {p.data}\r\n                    </div>\r\n                  </Draggable>\r\n                );\r\n              })\r\n            }\r\n          </Container>\r\n        </div>\r\n        <div style={groupStyle}>\r\n          <Container groupName=\"1\" orientation=\"horizontal\" getChildPayload={i => this.state.items3[i]} onDrop={e => this.setState({ items3: applyDrag(this.state.items3, e) })}>\r\n            {\r\n              this.state.items3.map(p => {\r\n                return (\r\n                  <Draggable key={p.id}>\r\n                    <div className=\"draggable-item-horizontal\">\r\n                      {p.data}\r\n                    </div>\r\n                  </Draggable>\r\n                );\r\n              })\r\n            }\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nHorizontal.propTypes = {\r\n\r\n};\r\n\r\nexport default Horizontal;","import React, { Component } from \"react\";\r\nimport { Container, Draggable } from \"react-smooth-dnd\";\r\nimport { applyDrag, generateItems } from \"./utils\";\r\n\r\nclass Nested extends Component {\r\n  constructor() {\r\n    super();\r\n\r\n    this.containerOnDrop = this.containerOnDrop.bind(this);\r\n    this.containerOnDrop2 = this.containerOnDrop2.bind(this);\r\n    this.containerOnDrop3 = this.containerOnDrop3.bind(this);\r\n\r\n    const items = generateItems(30, i => ({\r\n      id: i,\r\n      type: \"draggable\",\r\n      data: `Container 1 Draggable - ${i}`\r\n    }));\r\n\r\n    const items2 = generateItems(10, i => ({\r\n      id: i,\r\n      type: \"draggable\",\r\n      data: `Container 2 Draggable - ${i}`\r\n    }));\r\n\r\n    items2[3] = {\r\n      id: 3,\r\n      type: \"container\",\r\n      items: generateItems(4, i => ({\r\n        id: i,\r\n        type: \"draggable\",\r\n        data: `Container 4 Draggable - ${i}`\r\n      }))\r\n    };\r\n\r\n    const items3 = generateItems(4, i => ({\r\n      id: i,\r\n      type: \"draggable\",\r\n      data: `Container 3 Draggable - ${i}`\r\n    }));\r\n\r\n    items[5] = {\r\n      id: 5,\r\n      type: \"container\",\r\n      items: items2\r\n    };\r\n\r\n    items[9] = {\r\n      id: 9,\r\n      type: \"container\",\r\n      items: items3\r\n    };\r\n\r\n    this.state = {\r\n      items\r\n    };\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"simple-page\">\r\n          <Container onDrop={this.containerOnDrop}>\r\n            {this.state.items.map((p, i) => {\r\n              if (p.type === \"draggable\") {\r\n                return (\r\n                  <Draggable key={i}>\r\n                    <div className=\"draggable-item\">{p.data}</div>\r\n                  </Draggable>\r\n                );\r\n              } else {\r\n                return (\r\n                  <Draggable key={i}>\r\n                    <div\r\n                      style={{\r\n                        padding: \"20px 20px\",\r\n                        marginTop: \"2px\",\r\n                        marginBottom: \"2px\",\r\n                        border: \"1px solid rgba(0,0,0,.125)\",\r\n                        backgroundColor: \"#fff\",\r\n                        cursor: \"move\"\r\n                      }}\r\n                    >\r\n                      <h4 style={{ textAlign: \"center\" }}>\r\n                        Nested Sortable List - {p.id}\r\n                      </h4>\r\n                      <div style={{ cursor: \"default\" }}>\r\n                        <Container onDrop={e => this.containerOnDrop2(i, e)}>\r\n                          {p.items.map((q, j) => {\r\n                            if (q.type === \"draggable\") {\r\n                              return (\r\n                                <Draggable key={j}>\r\n                                  <div\r\n                                    className=\"draggable-item\"\r\n                                    style={{ backgroundColor: \"cornsilk\" }}\r\n                                  >\r\n                                    {q.data}\r\n                                  </div>\r\n                                </Draggable>\r\n                              );\r\n                            } else {\r\n                              return (\r\n                                <Draggable key={j}>\r\n                                  <div\r\n                                    style={{\r\n                                      padding: \"20px 20px\",\r\n                                      marginTop: \"2px\",\r\n                                      marginBottom: \"2px\",\r\n                                      border: \"1px solid rgba(0,0,0,.125)\",\r\n                                      backgroundColor: \"cornsilk\",\r\n                                      cursor: \"move\"\r\n                                    }}\r\n                                  >\r\n                                    <h4\r\n                                      style={{\r\n                                        textAlign: \"center\"\r\n                                      }}\r\n                                    >\r\n                                      Nested Sortable List - {q.id}\r\n                                    </h4>\r\n                                    <div style={{ cursor: \"default\" }}>\r\n                                      <Container\r\n                                        onDrop={e =>\r\n                                          this.containerOnDrop3(i, j, e)\r\n                                        }\r\n                                      >\r\n                                        {q.items.map((t, y) => {\r\n                                          return (\r\n                                            <Draggable key={y}>\r\n                                              <div\r\n                                                className=\"draggable-item\"\r\n                                                style={{\r\n                                                  backgroundColor: \"ghostwhite\"\r\n                                                }}\r\n                                              >\r\n                                                {t.data}\r\n                                              </div>\r\n                                            </Draggable>\r\n                                          );\r\n                                        })}\r\n                                      </Container>\r\n                                    </div>\r\n                                  </div>\r\n                                </Draggable>\r\n                              );\r\n                            }\r\n                          })}\r\n                        </Container>\r\n                      </div>\r\n                    </div>\r\n                  </Draggable>\r\n                );\r\n              }\r\n            })}\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  containerOnDrop(e) {\r\n    this.setState({\r\n      items: applyDrag(this.state.items, e)\r\n    });\r\n  }\r\n\r\n  containerOnDrop2(id, e) {\r\n    const newItems = [...this.state.items];\r\n    newItems[id].items = applyDrag(newItems[id].items, e);\r\n    this.setState({\r\n      items: newItems\r\n    });\r\n  }\r\n\r\n  containerOnDrop3(id1, id2, e) {\r\n    const newItems = [...this.state.items];\r\n    newItems[id1].items[id2].items = applyDrag(\r\n      newItems[id1].items[id2].items,\r\n      e\r\n    );\r\n    this.setState({\r\n      items: newItems\r\n    });\r\n  }\r\n}\r\n\r\nNested.propTypes = {};\r\n\r\nexport default Nested;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Container, Draggable } from 'react-smooth-dnd';\r\nimport { applyDrag } from './utils';\r\n\r\nconst form = [\r\n  {\r\n    id: 0,\r\n    element: <h2>Form Header</h2>\r\n  }, {\r\n    id: 1,\r\n    label: 'Full Name',\r\n    element: <div className=\"field-group\"><input type=\"text\" /><input type=\"text\" /></div>\r\n  }, {\r\n    id: 2,\r\n    label: 'Email',\r\n    element: <input type=\"email\" />\r\n  }, {\r\n    id: 3,\r\n    label: 'Address',\r\n    element: <textarea name=\"address\" id=\"\" cols=\"30\" rows=\"10\" />\r\n  },\r\n  {\r\n    id: 5,\r\n    label: 'Radio',\r\n    element: (\r\n      <div>\r\n        <div><label><input type=\"radio\" name=\"r\" /> option 1</label></div>\r\n        <div><label><input type=\"radio\" name=\"r\" /> option 2</label></div>\r\n        <div><label><input type=\"radio\" name=\"r\" /> option 3</label></div>\r\n        <div><label><input type=\"radio\" name=\"r\" /> option 4</label></div>\r\n        <div><label><input type=\"radio\" name=\"r\" /> option 5</label></div>\r\n      </div>\r\n    )\r\n  }, {\r\n    id: 4,\r\n    label: 'Options',\r\n    element: (<select>\r\n      <option value=\"1\">Option 1</option>\r\n      <option value=\"2\" selected>Option 2</option>\r\n      <option value=\"3\">Option 3</option>\r\n      <option value=\"4\">Option 4</option>\r\n    </select>)\r\n  }\r\n  , {\r\n    id: 6,\r\n    label: 'Checkbox',\r\n    element: (\r\n      <div>\r\n        <div><label><input type=\"checkbox\" name=\"r\" /> option 1</label></div>\r\n        <div><label><input type=\"checkbox\" name=\"r\" /> option 2</label></div>\r\n        <div><label><input type=\"checkbox\" name=\"r\" /> option 3</label></div>\r\n        <div><label><input type=\"checkbox\" name=\"r\" /> option 4</label></div>\r\n        <div><label><input type=\"checkbox\" name=\"r\" /> option 5</label></div>\r\n      </div>\r\n    )\r\n  }, {\r\n    id: 7,\r\n    element: (\r\n      <div>\r\n        <button className=\"form-submit-button\">Submit</button>\r\n      </div>\r\n    )\r\n  }\r\n];\r\n\r\nclass Form extends Component {\r\n  constructor() {\r\n    super();\r\n    this.generateForm = this.generateForm.bind(this);\r\n    this.onDrop = this.onDrop.bind(this);\r\n\r\n    this.state = {\r\n      form\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"form-demo\">\r\n        <div className=\"form\">\r\n          <Container\r\n            style={{ paddingBottom: '200px' }}\r\n            dragClass=\"form-ghost\"\r\n            dropClass=\"form-ghost-drop\"\r\n            onDrop={this.onDrop}\r\n            nonDragAreaSelector=\".field\">\r\n            {this.generateForm(this.state.form)}\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  onDrop(dropResult) {\r\n    return this.setState({ form: applyDrag(this.state.form, dropResult) });\r\n  }\r\n\r\n  generateForm(form) {\r\n    return form.map((item) => {\r\n      return (\r\n        <Draggable key={item.id}>\r\n          <div\r\n            className={`form-line`}>\r\n            <div className=\"label\">\r\n              <span>{item.label}</span>\r\n            </div>\r\n            <div className=\"field\">\r\n              {item.element}\r\n            </div>\r\n          </div>\r\n        </Draggable >\r\n      );\r\n    });\r\n  }\r\n}\r\n\r\nexport default Form;","import React, { Component } from \"react\";\r\nimport { Container, Draggable } from \"react-smooth-dnd\";\r\nimport { applyDrag, generateItems } from \"./utils\";\r\n\r\nclass Nested extends Component {\r\n  constructor() {\r\n    super();\r\n\r\n    this.containerOnDrop = this.containerOnDrop.bind(this);\r\n    this.containerOnDrop2 = this.containerOnDrop2.bind(this);\r\n    this.containerOnDrop3 = this.containerOnDrop3.bind(this);\r\n\r\n    const items = generateItems(30, i => ({\r\n      id: 'item1 '+i,\r\n      type: \"draggable\",\r\n      data: `Container 1 Draggable - ${i}`\r\n    }));\r\n\r\n    const items2 = generateItems(10, i => ({\r\n      id: 'item2 ' +i,\r\n      type: \"draggable\",\r\n      data: `Container 2 Draggable - ${i}`\r\n    }));\r\n\r\n    items2[3] = {\r\n      ...items2[3],\r\n      type: \"container\",\r\n      items: generateItems(4, i => ({\r\n        id: 'item2 sub' + i,\r\n        type: \"draggable\",\r\n        data: `Container 4 Draggable - ${i}`\r\n      }))\r\n    };\r\n\r\n    const items3 = generateItems(4, i => ({\r\n      id: 'item3 '+i,\r\n      type: \"draggable\",\r\n      data: `Container 3 Draggable - ${i}`\r\n    }));\r\n\r\n    items[5] = {\r\n      ...items[5],\r\n      type: \"container\",\r\n      items: items2\r\n    };\r\n\r\n    items[9] = {\r\n      ...items[9],\r\n      type: \"container\",\r\n      items: items3\r\n    };\r\n\r\n    this.state = {\r\n      items\r\n    };\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"simple-page\">\r\n          <Container groupName=\"1\" onDrop={this.containerOnDrop} getChildPayload={(i) => this.state.items[i]}>\r\n            {this.state.items.map((p, i) => {\r\n              if (p.type === \"draggable\") {\r\n                return (\r\n                  <Draggable key={i}>\r\n                    <div className=\"draggable-item\">{p.data}</div>\r\n                  </Draggable>\r\n                );\r\n              } else {\r\n                return (\r\n                  <Draggable key={i}>\r\n                    <div\r\n                      style={{\r\n                        padding: \"20px 20px\",\r\n                        marginTop: \"2px\",\r\n                        marginBottom: \"2px\",\r\n                        border: \"1px solid rgba(0,0,0,.125)\",\r\n                        backgroundColor: \"#fff\",\r\n                        cursor: \"move\"\r\n                      }}\r\n                    >\r\n                      <h4 style={{ textAlign: \"center\" }}>\r\n                        Nested Sortable List - {p.id}\r\n                      </h4>\r\n                      <div style={{ cursor: \"default\" }}>\r\n                        <Container groupName=\"1\" getChildPayload={(index) => this.state.items[i].items[index]} onDrop={e => this.containerOnDrop2(i, e)}>\r\n                          {p.items.map((q, j) => {\r\n                            if (q.type === \"draggable\") {\r\n                              return (\r\n                                <Draggable key={j}>\r\n                                  <div\r\n                                    className=\"draggable-item\"\r\n                                    style={{ backgroundColor: \"cornsilk\" }}\r\n                                  >\r\n                                    {q.data}\r\n                                  </div>\r\n                                </Draggable>\r\n                              );\r\n                            } else {\r\n                              return (\r\n                                <Draggable key={j}>\r\n                                  <div\r\n                                    style={{\r\n                                      padding: \"20px 20px\",\r\n                                      marginTop: \"2px\",\r\n                                      marginBottom: \"2px\",\r\n                                      border: \"1px solid rgba(0,0,0,.125)\",\r\n                                      backgroundColor: \"cornsilk\",\r\n                                      cursor: \"move\"\r\n                                    }}\r\n                                  >\r\n                                    <h4\r\n                                      style={{\r\n                                        textAlign: \"center\"\r\n                                      }}\r\n                                    >\r\n                                      Nested Sortable List - {q.id}\r\n                                    </h4>\r\n                                    <div style={{ cursor: \"default\" }}>\r\n                                      <Container\r\n                                        getChildPayload={(index) => this.state.items[i].items[j].items[index]}\r\n                                        groupName=\"1\"\r\n                                        onDrop={e =>\r\n                                          this.containerOnDrop3(i, j, e)\r\n                                        }\r\n                                      >\r\n                                        {q.items.map((t, y) => {\r\n                                          return (\r\n                                            <Draggable key={y}>\r\n                                              <div\r\n                                                className=\"draggable-item\"\r\n                                                style={{\r\n                                                  backgroundColor: \"ghostwhite\"\r\n                                                }}\r\n                                              >\r\n                                                {t.data}\r\n                                              </div>\r\n                                            </Draggable>\r\n                                          );\r\n                                        })}\r\n                                      </Container>\r\n                                    </div>\r\n                                  </div>\r\n                                </Draggable>\r\n                              );\r\n                            }\r\n                          })}\r\n                        </Container>\r\n                      </div>\r\n                    </div>\r\n                  </Draggable>\r\n                );\r\n              }\r\n            })}\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  containerOnDrop(e) {\r\n    console.log('level 1: Drop');\r\n    this.setState({\r\n      items: applyDrag(this.state.items, e)\r\n    });\r\n  }\r\n\r\n  containerOnDrop2(id, e) {\r\n    console.log('level 2: Drop');\r\n    const newItems = [...this.state.items];\r\n    newItems[id].items = applyDrag(newItems[id].items, e);\r\n    this.setState({\r\n      items: newItems\r\n    });\r\n  }\r\n\r\n  containerOnDrop3(id1, id2, e) {\r\n    console.log('level 3: Drop');\r\n    const newItems = [...this.state.items];\r\n    newItems[id1].items[id2].items = applyDrag(\r\n      newItems[id1].items[id2].items,\r\n      e\r\n    );\r\n    this.setState({\r\n      items: newItems\r\n    });\r\n  }\r\n}\r\n\r\nNested.propTypes = {};\r\n\r\nexport default Nested;\r\n","import React, { Component } from 'react';\r\nimport { Container, Draggable } from 'react-smooth-dnd';\r\nimport { applyDrag, generateItems } from './utils';\r\nimport container from 'smooth-dnd';\r\n\r\nconst groupStyle = {\r\n  margin: '50px',\r\n  overflowX: 'auto',\r\n  // border: '1px solid #ccc'\r\n};\r\n\r\nclass Nested extends Component {\r\n  constructor() {\r\n    super();\r\n\r\n    this.childContainers = [];\r\n\r\n    // this.containerOnDrop = this.containerOnDrop.bind(this);\r\n    // this.containerOnDrop2 = this.containerOnDrop2.bind(this);\r\n\r\n    const items = generateItems(30, (i) => ({\r\n      id: i, type: 'draggable', data: `Container 1 Draggable - ${i}`\r\n    }));\r\n\r\n    const items2 = generateItems(5, (i) => ({\r\n      id: i, type: 'draggable', data: `Container 2 Draggable - ${i}`\r\n    }));\r\n\r\n    const items3 = generateItems(4, (i) => ({\r\n      id: i, type: 'draggable', data: `Container 3 Draggable - ${i}`\r\n    }));\r\n\r\n    items[5] = {\r\n      id: 5, type: 'container', items: items2\r\n    };\r\n\r\n    items[9] = {\r\n      id: 9, type: 'container', items: items3\r\n    };\r\n\r\n    this.state = {\r\n      items\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    container(this.parentContainer);\r\n    this.childContainers.forEach(container);\r\n  }\r\n  \r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"simple-page\" style={{ border: '1px solid #ddd' }}>\r\n          <div ref={e => this.parentContainer = e}>\r\n            {this.state.items.map((p, i) => {\r\n              if (p.type === 'draggable') {\r\n                return (\r\n                  <div key={i}>\r\n                    <div className=\"draggable-item\">\r\n                      {p.data}\r\n                    </div>\r\n                  </div>\r\n                );\r\n              } else {\r\n                return (\r\n                  <div key={i}>\r\n                    <div style={{ padding: '20px 20px', backgroundColor: '#888' }}>\r\n                      <div ref={e => this.childContainers[i] = e}>\r\n                        {p.items.map((q, j) => {\r\n                          return (\r\n                            <div key={j}>\r\n                              <div className=\"draggable-item\">\r\n                                {q.data}\r\n                              </div>\r\n                            </div>\r\n                          );\r\n                        })}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              }\r\n            })}  \r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nNested.propTypes = {\r\n\r\n};\r\n\r\nexport default Nested;","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Container, Draggable } from 'react-smooth-dnd';\r\nimport { applyDrag, generateItems } from './utils';\r\n\r\n\r\nclass Height extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      items: generateItems(50, (index) => {\r\n        return {\r\n          id: index,\r\n          data: 'Draggable' + index,\r\n          height: `${(40 + Math.random() * 200).toFixed()}px`\r\n        };\r\n      })\r\n    };\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"simple-page\">\r\n          <Container onDrop={e => this.setState({ items: applyDrag(this.state.items, e) })}>\r\n            {this.state.items.map(p => {\r\n              return (\r\n                <Draggable key={p.id}>\r\n                  <div className=\"draggable-item\" style={{height: p.height}}>\r\n                    {p.data}\r\n                  </div>\r\n                </Draggable>\r\n              );\r\n            })}\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nHeight.propTypes = {\r\n\r\n};\r\n\r\nexport default Height;","import React, { Component } from \"react\";\r\nimport { Container, Draggable } from \"react-smooth-dnd\";\r\nimport { applyDrag, generateItems } from \"./utils\";\r\n\r\nconst lorem = `Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. \r\nExcepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. \r\nExcepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.`;\r\n\r\nconst columnNames = [\"Lorem\", \"Ipsum\", \"Consectetur\", \"Eiusmod\"];\r\n\r\nconst cardColors = [\r\n  \"azure\",\r\n  \"beige\",\r\n  \"bisque\",\r\n  \"blanchedalmond\",\r\n  \"burlywood\",\r\n  \"cornsilk\",\r\n  \"gainsboro\",\r\n  \"ghostwhite\",\r\n  \"ivory\",\r\n  \"khaki\"\r\n];\r\nconst pickColor = () => {\r\n  let rand = Math.floor(Math.random() * 10);\r\n  return cardColors[rand];\r\n};\r\n\r\nclass Cards extends Component {\r\n  constructor() {\r\n    super();\r\n\r\n    this.onColumnDrop = this.onColumnDrop.bind(this);\r\n    this.onCardDrop = this.onCardDrop.bind(this);\r\n    this.getCardPayload = this.getCardPayload.bind(this);\r\n    this.state = {\r\n      scene: {\r\n        type: \"container\",\r\n        props: {\r\n          orientation: \"horizontal\"\r\n        },\r\n        children: generateItems(4, i => ({\r\n          id: `column${i}`,\r\n          type: \"container\",\r\n          name: columnNames[i],\r\n          props: {\r\n            orientation: \"vertical\",\r\n            className: \"card-container\"\r\n          },\r\n          children: generateItems(+(Math.random() * 10).toFixed() + 5, j => ({\r\n            type: \"draggable\",\r\n            id: `${i}${j}`,\r\n            props: {\r\n              className: \"card\",\r\n              style: { backgroundColor: pickColor() }\r\n            },\r\n            data: lorem.slice(0, Math.floor(Math.random() * 150) + 30)\r\n          }))\r\n        }))\r\n      }\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"card-scene\">\r\n        <Container\r\n          orientation=\"horizontal\"\r\n          onDrop={this.onColumnDrop}\r\n          dragHandleSelector=\".column-drag-handle\"\r\n          dropPlaceholder={{\r\n            animationDuration: 150,\r\n            showOnTop: true,\r\n            className: 'cards-drop-preview'\r\n          }}\r\n        >\r\n          {this.state.scene.children.map(column => {\r\n            return (\r\n              <Draggable key={column.id}>\r\n                <div className={column.props.className}>\r\n                  <div className=\"card-column-header\">\r\n                    <span className=\"column-drag-handle\">&#x2630;</span>\r\n                    {column.name}\r\n                  </div>\r\n                  <Container\r\n                    {...column.props}\r\n                    groupName=\"col\"\r\n                    onDragStart={e => console.log(\"drag started\", e)}\r\n                    onDragEnd={e => console.log(\"drag end\", e)}\r\n                    onDrop={e => this.onCardDrop(column.id, e)}\r\n                    getChildPayload={index =>\r\n                      this.getCardPayload(column.id, index)\r\n                    }\r\n                    dragClass=\"card-ghost\"\r\n                    dropClass=\"card-ghost-drop\"\r\n                    onDragEnter={() => {\r\n                      console.log(\"drag enter:\", column.id);\r\n                    }}\r\n                    onDragLeave={() => {\r\n                      console.log(\"drag leave:\", column.id);\r\n                    }}\r\n                    onDropReady={p => console.log('Drop ready: ', p)}\r\n                    dropPlaceholder={{                      \r\n                      animationDuration: 150,\r\n                      showOnTop: true,\r\n                      className: 'drop-preview' \r\n                    }}\r\n                    dropPlaceholderAnimationDuration={200}\r\n                  >\r\n                    {column.children.map(card => {\r\n                      return (\r\n                        <Draggable key={card.id}>\r\n                          <div {...card.props}>\r\n                            <p>{card.data}</p>\r\n                          </div>\r\n                        </Draggable>\r\n                      );\r\n                    })}\r\n                  </Container>\r\n                </div>\r\n              </Draggable>\r\n            );\r\n          })}\r\n        </Container>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getCardPayload(columnId, index) {\r\n    return this.state.scene.children.filter(p => p.id === columnId)[0].children[\r\n      index\r\n    ];\r\n  }\r\n\r\n  onColumnDrop(dropResult) {\r\n    const scene = Object.assign({}, this.state.scene);\r\n    scene.children = applyDrag(scene.children, dropResult);\r\n    this.setState({\r\n      scene\r\n    });\r\n  }\r\n\r\n  onCardDrop(columnId, dropResult) {\r\n    if (dropResult.removedIndex !== null || dropResult.addedIndex !== null) {\r\n      const scene = Object.assign({}, this.state.scene);\r\n      const column = scene.children.filter(p => p.id === columnId)[0];\r\n      const columnIndex = scene.children.indexOf(column);\r\n\r\n      const newColumn = Object.assign({}, column);\r\n      newColumn.children = applyDrag(newColumn.children, dropResult);\r\n      scene.children.splice(columnIndex, 1, newColumn);\r\n\r\n      this.setState({\r\n        scene\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nexport default Cards;\r\n","import React, { Component } from 'react';\r\nimport { Container, Draggable } from 'react-smooth-dnd';\r\nimport { applyDrag, generateItems } from './utils';\r\n\r\nclass LockAxis extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      items: generateItems(50, (index) => {\r\n        return {\r\n          id: index,\r\n          data: 'Draggable' + index\r\n        };\r\n      })\r\n    };\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"simple-page\">\r\n          <Container lockAxis=\"y\" onDrop={e => this.setState({ items: applyDrag(this.state.items, e) })}>\r\n            {this.state.items.map(p => {\r\n              return (\r\n                <Draggable key={p.id}>\r\n                  <div className=\"draggable-item\">\r\n                    {p.data}\r\n                  </div>\r\n                </Draggable>\r\n              );\r\n            })}\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LockAxis;","import React, { Component } from 'react';\r\nimport { Container, Draggable } from 'react-smooth-dnd';\r\nimport { applyDrag, generateItems } from './utils';\r\n\r\nclass DragDelay extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      items: generateItems(50, (index) => {\r\n        return {\r\n          id: index,\r\n          data: 'Draggable' + index\r\n        };\r\n      })\r\n    };\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"simple-page\">\r\n          <Container dragBeginDelay={500} dragClass=\"form-ghost\" dropClass=\"form-ghost-drop\" onDrop={e => this.setState({ items: applyDrag(this.state.items, e) })}>\r\n            {this.state.items.map(p => {\r\n              return (\r\n                <Draggable key={p.id}>\r\n                  <div className=\"draggable-item\">\r\n                    {p.data}\r\n                  </div>\r\n                </Draggable>\r\n              );\r\n            })}\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DragDelay;","import React, { Component } from 'react';\r\nimport { Container, Draggable } from 'react-smooth-dnd';\r\nimport { applyDrag, generateItems } from './utils';\r\n\r\nclass DragHandle extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      items: generateItems(50, (index) => {\r\n        return {\r\n          id: index,\r\n          data: 'Draggable' + index\r\n        };\r\n      })\r\n    };\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"simple-page\">\r\n          <Container dragHandleSelector=\".column-drag-handle\" onDrop={e => this.setState({ items: applyDrag(this.state.items, e) })}>\r\n            {this.state.items.map(p => {\r\n              return (\r\n                <Draggable key={p.id}>\r\n                  <div className=\"draggable-item\">\r\n                    <span className=\"column-drag-handle\" style={{float:'left', padding:'0 10px'}}>&#x2630;</span>\r\n                    {p.data}\r\n                  </div>\r\n                </Draggable>\r\n              );\r\n            })}\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DragHandle;","import React, { Component } from 'react';\r\nimport { Container, Draggable } from 'react-smooth-dnd';\r\nimport { applyDrag, generateItems } from './utils';\r\n\r\nclass DragClass extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      items: generateItems(50, (index) => {\r\n        return {\r\n          id: index,\r\n          data: 'Draggable' + index\r\n        };\r\n      })\r\n    };\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"simple-page\">\r\n          <Container dragClass=\"opacity-ghost\" dropClass=\"opacity-ghost-drop\" onDrop={e => this.setState({ items: applyDrag(this.state.items, e) })}>\r\n            {this.state.items.map(p => {\r\n              return (\r\n                <Draggable key={p.id}>\r\n                  <div className=\"draggable-item\">\r\n                    {p.data}\r\n                  </div>\r\n                </Draggable>\r\n              );\r\n            })}\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DragClass;","import React, { Component } from 'react';\r\nimport { Container, Draggable } from 'react-smooth-dnd';\r\nimport { applyDrag, generateItems } from './utils';\r\n\r\nclass TransitionDuration extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      items: generateItems(50, (index) => {\r\n        return {\r\n          id: index,\r\n          data: 'Draggable' + index\r\n        };\r\n      })\r\n    };\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"simple-page\">\r\n          <Container animationDuration={500} onDrop={e => this.setState({ items: applyDrag(this.state.items, e) })}>\r\n            {this.state.items.map(p => {\r\n              return (\r\n                <Draggable key={p.id}>\r\n                  <div className=\"draggable-item\">\r\n                    {p.data}\r\n                  </div>\r\n                </Draggable>\r\n              );\r\n            })}\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TransitionDuration;","import React, { Component } from 'react';\r\nimport { Container, Draggable } from 'react-smooth-dnd';\r\nimport { applyDrag, generateItems } from './utils';\r\n\r\nconst groupStyle = {\r\n\tmarginLeft: '50px',\r\n\tflex: 1\r\n}\r\n\r\nclass ScrollBoth extends Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.state = {\r\n\t\t\titems1: generateItems(45, (i) => ({ id: '1' + i, data: `Source Draggable - ${i}` })),\r\n\t\t\titems2: generateItems(45, (i) => ({ id: '2' + i, data: `Draggable 2 - ${i}` })),\r\n\t\t\titems3: generateItems(45, (i) => ({ id: '3' + i, data: `Draggable 3 - ${i}` })),\r\n\t\t\titems4: generateItems(15, (i) => ({ id: '4' + i, data: `Draggable 4 - ${i}` })),\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div style={{ height: '600px', width: '600px', overflow:'auto'}}>\r\n\t\t\t\t<div style={{ display: 'flex', justifyContent: 'stretch', marginTop: '50px', marginRight: '50px', height: '1000px', width: '1000px', overflow: 'auto' }}>\r\n\t\t\t\t\t<div style={groupStyle}>\r\n\t\t\t\t\t\t<Container groupName=\"1\" behaviour=\"copy\" getChildPayload={i => this.state.items1[i]} onDrop={e => this.setState({ items1: applyDrag(this.state.items1, e) })}>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.state.items1.map((p, i) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<Draggable key={i}>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"draggable-item\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{p.data}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</Draggable>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={groupStyle}>\r\n\t\t\t\t\t\t<Container groupName=\"1\" getChildPayload={i => this.state.items2[i]} onDrop={e => this.setState({ items2: applyDrag(this.state.items2, e) })}>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.state.items2.map((p, i) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<Draggable key={i}>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"draggable-item\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{p.data}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</Draggable>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={groupStyle}>\r\n\t\t\t\t\t\t<Container groupName=\"1\" getChildPayload={i => this.state.items3[i]} onDrop={e => this.setState({ items3: applyDrag(this.state.items3, e) })}>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.state.items3.map(p => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<Draggable key={p.id}>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"draggable-item\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{p.data}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</Draggable>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nScrollBoth.propTypes = {\r\n\r\n};\r\n\r\nexport default ScrollBoth;","import React, { Component } from 'react';\r\nimport { Container, Draggable } from 'react-smooth-dnd';\r\nimport { applyDrag, generateItems } from './utils';\r\n\r\n\r\nclass DropZone extends Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.onDrop = this.onDrop.bind(this);\r\n\t\tthis.dragEnter = this.dragEnter.bind(this);\r\n\t\tthis.dragLeave = this.dragLeave.bind(this);\r\n\r\n\t\tthis.state = {\r\n\t\t\tzones: [1, 0, 0, 0],\r\n\t\t\tclasses: ['', '', '', '']\r\n\t\t};\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"drop-zone\">\r\n\t\t\t\t{this.state.zones.map((p, i) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div className={`drop-zone-container ${this.state.classes[i]}`}>\r\n\t\t\t\t\t\t\t<Container\r\n\t\t\t\t\t\t\t\tstyle={{ height: '100%' }}\r\n\t\t\t\t\t\t\t\tgroupName=\"1\"\r\n\t\t\t\t\t\t\t\tbehaviour=\"drop-zone\"\r\n\t\t\t\t\t\t\t\tonDrop={e => this.onDrop(i, e)}\r\n\t\t\t\t\t\t\t\tonDragEnter={() => this.dragEnter(i)}\r\n\t\t\t\t\t\t\t\tonDragLeave={() => this.dragLeave(i)}>\r\n\t\t\t\t\t\t\t\t{p ? (\r\n\t\t\t\t\t\t\t\t\t<Draggable>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"drop-zone-draggable\">\r\n\t\t\t\t\t\t\t\t\t\t\tDraggable\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</Draggable>\r\n\t\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tonDrop(containerIndex, dropresult) {\r\n\t\tconst { addedIndex, removedIndex, payload } = dropresult;\r\n\t\tif (addedIndex !== null || removedIndex !== null) {\r\n\t\t\tconst zones = [...this.state.zones];\r\n\t\t\tif (removedIndex !== null) {\r\n\t\t\t\tzones[containerIndex] = 0;\r\n\t\t\t}\r\n\t\t\tif (addedIndex !== null) {\r\n\t\t\t\tzones[containerIndex] = 1;\r\n\t\t\t}\r\n\t\t\tthis.setState({\r\n\t\t\t\tzones\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tconst classes = [...this.state.classes];\r\n\t\tclasses[containerIndex] = '';\r\n\t\tthis.setState({\r\n\t\t\tclasses\r\n\t\t});\r\n\t}\r\n\r\n\tdragEnter(i) {\r\n\t\tconst classes = [...this.state.classes];\r\n\t\tclasses[i] = 'hover';\r\n\t\tthis.setState({\r\n\t\t\tclasses\r\n\t\t});\r\n\t}\r\n\r\n\tdragLeave(i) {\r\n\t\tconst classes = [...this.state.classes];\r\n\t\tclasses[i] = '';\r\n\t\tthis.setState({\r\n\t\t\tclasses\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport default DropZone;","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Container, Draggable } from 'react-smooth-dnd';\r\n\r\nclass ChessBoard extends Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.initBoard = this.initBoard.bind(this);\r\n\t\tthis.onDrop = this.onDrop.bind(this);\r\n\t\tthis.shouldAcceptDrop = this.shouldAcceptDrop.bind(this);\r\n\t\tthis.renderPiece = this.renderPiece.bind(this);\r\n\t\tthis.onDragEnter = this.onDragEnter.bind(this);\r\n\t\tthis.onDragLeave = this.onDragLeave.bind(this);\r\n\r\n\t\tthis.state = {\r\n\t\t\tboard: this.initBoard()\r\n\t\t}\r\n\t}\r\n\r\n\tgetFirstPieceRow(side) {\r\n\t\treturn [\r\n\t\t\t{ type: 'rook', side, data: 9816 },\r\n\t\t\t{ type: 'knight', side, data: 9814 },\r\n\t\t\t{ type: 'bishop', side, data: 9815 },\r\n\t\t\t{ type: 'queen', side, data: 9813 },\r\n\t\t\t{ type: 'king', side, data: 9812 },\r\n\t\t\t{ type: 'bishop', side, data: 9815 },\r\n\t\t\t{ type: 'knight', side, data: 9814 },\r\n\t\t\t{ type: 'rook', side, data: 9816 },\r\n\t\t]\r\n\t}\r\n\r\n\tgetSecondPieceRow(side) {\r\n\t\treturn [\r\n\t\t\t{ type: 'pawn', side, data: 9817 },\r\n\t\t\t{ type: 'pawn', side, data: 9817 },\r\n\t\t\t{ type: 'pawn', side, data: 9817 },\r\n\t\t\t{ type: 'pawn', side, data: 9817 },\r\n\t\t\t{ type: 'pawn', side, data: 9817 },\r\n\t\t\t{ type: 'pawn', side, data: 9817 },\r\n\t\t\t{ type: 'pawn', side, data: 9817 },\r\n\t\t\t{ type: 'pawn', side, data: 9817 },\r\n\t\t]\r\n\t}\r\n\r\n\tinitBoard() {\r\n\t\tconst board = [];\r\n\t\tfor (let i = 0; i < 8; i++) {\r\n\t\t\tif (i === 0) {\r\n\t\t\t\tboard.push(this.getFirstPieceRow('black'));\r\n\t\t\t} else if (i === 1) {\r\n\t\t\t\tboard.push(this.getSecondPieceRow('black'));\r\n\t\t\t} else if (i === 6) {\r\n\t\t\t\tboard.push(this.getSecondPieceRow('white'));\r\n\t\t\t} else if (i === 7) {\r\n\t\t\t\tboard.push(this.getFirstPieceRow('white'));\r\n\t\t\t} else {\r\n\t\t\t\tboard.push([{}, {}, {}, {}, {}, {}, {}, {}]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn board;\r\n\t}\r\n\r\n\trenderPiece(piece) {\r\n\t\tif (piece.side) {\r\n\t\t\tconst htmlcode = `&#${piece.data + (piece.side === 'black' ? 6 : 0)};`;\r\n\t\t\tconst hover = piece.hover ? ' hover' : '';\r\n\t\t\treturn (\r\n\t\t\t\t<Draggable>\r\n\t\t\t\t\t<div className={`piece${hover} ${piece.side}`}>\r\n\t\t\t\t\t\t<span dangerouslySetInnerHTML={{ __html: htmlcode }}></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Draggable>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"board\">\r\n\t\t\t\t{this.state.board.map((row, rowIndex) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div className=\"row\" key={rowIndex}>\r\n\t\t\t\t\t\t\t{row.map((piece, colIndex) => {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<div className={`square ${(rowIndex + colIndex) % 2 === 0 ? 'white' : 'black'}`} key={`${rowIndex}${colIndex}`}>\r\n\t\t\t\t\t\t\t\t\t\t<Container\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ height: '100%' }}\r\n\t\t\t\t\t\t\t\t\t\t\tbehaviour=\"drop-zone\"\r\n\t\t\t\t\t\t\t\t\t\t\tonDrop={(result) => this.onDrop(result, rowIndex, colIndex)}\r\n\t\t\t\t\t\t\t\t\t\t\tshouldAcceptDrop={(_, payload) => this.shouldAcceptDrop(payload, rowIndex, colIndex)}\r\n\t\t\t\t\t\t\t\t\t\t\tgetChildPayload={() => ({ colIndex, rowIndex, piece })}\r\n\t\t\t\t\t\t\t\t\t\t\tonDragEnter={() => this.onDragEnter(rowIndex, colIndex)}\r\n\t\t\t\t\t\t\t\t\t\t\tonDragLeave={() => this.onDragLeave(rowIndex, colIndex)}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{this.renderPiece(piece)}\r\n\t\t\t\t\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tshouldAcceptDrop(payload, rowIndex, colIndex) {\r\n\t\tconst { colIndex: fromCol, rowIndex: fromRow } = payload;\r\n\t\tconst fromPiece = this.state.board[fromRow][fromCol];\r\n\t\tconst piece = this.state.board[rowIndex][colIndex];\r\n\r\n\t\tif (fromPiece === piece) return true;\r\n\t\tif (fromPiece.side === piece.side) return false;\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tonDrop(dropResult, rowIndex, colIndex) {\r\n\t\tconst { addedIndex, removedIndex, payload } = dropResult;\r\n\r\n\t\tif (addedIndex !== null || removedIndex !== null) {\r\n\t\t\tif (removedIndex !== null) {\r\n\t\t\t\tthis.state.board[rowIndex][colIndex] = {};\r\n\t\t\t}\r\n\r\n\t\t\tif (addedIndex !== null) {\r\n\t\t\t\tthis.state.board[rowIndex][colIndex] = payload.piece;\r\n\t\t\t}\r\n\r\n\t\t\tthis.forceUpdate();\r\n\t\t}\r\n\t}\r\n\r\n\tonDragEnter(row, col) {\r\n\t\tthis.state.board[row][col].hover = true;\r\n\t\tthis.forceUpdate();\r\n\t}\r\n\r\n\tonDragLeave(row, col) {\r\n\t\tthis.state.board[row][col].hover = false;\r\n\t\tthis.forceUpdate();\r\n\t}\r\n}\r\n\r\nChessBoard.propTypes = {\r\n\r\n};\r\n\r\nexport default ChessBoard;","import * as simples from './simple';\r\nimport SimpleHorizontal from './simple-horizontal';\r\nimport Groups from './groups';\r\nimport Copy from './copy';\r\nimport Horizontal from './horizontal';\r\nimport Nested from './nested';\r\nimport NestedGroup from './nested-group';\r\nimport VanillaNested from './vanilla-nested';\r\nimport Height from './height';\r\nimport Form from './form';\r\nimport Cards from './cards';\r\nimport LockAxis from './lock-axis';\r\nimport DragDelay from './drag-delay';\r\nimport DragHandle from './drag-handle';\r\nimport DragClass from './drag-class';\r\nimport TransitionDuration from './transition-duration';\r\nimport DropZone from './drop-zone';\r\nimport Chess from './chess';\r\nimport ScrollBoth from './scroll-both';\r\nimport DynamicContainers from './dynamic-containers';\r\n\r\n\r\nconst getUrl = (pagename) => {\r\n  return `https://github.com/kutlugsahin/smooth-dnd-demo/blob/master/src/demo/pages/${pagename}`;\r\n};\r\n\r\n\r\nexport default [\r\n  {\r\n    title: 'Showcase',\r\n    pages: [\r\n      // {\r\n      //   title: 'Chess', page: Chess, url: getUrl('form.js')\r\n      // },\r\n      {\r\n        title: 'Card board', page: Cards, url:getUrl('cards.js')\r\n      },\r\n      {\r\n        title: 'Form elements', page: Form, url: getUrl('form.js')\r\n      }\r\n    ]\r\n  },{\r\n    title: 'Basic Sortables',\r\n    pages: [\r\n      {\r\n        title: 'Sortable with default options', page: simples.Simple, url: getUrl('simple.js')\r\n      },\r\n      {\r\n        title: 'Sortable inside scroller', page: simples.SimpleScroller, url: getUrl('simple.js')\t\r\n      }, {\r\n        title: 'Horizontal sortable', page: SimpleHorizontal, url: getUrl('horizontal.js')\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    title: 'Groups',\r\n    pages: [\r\n      {\r\n        title: 'DnD between groups', page: Groups, url: getUrl('groups.js')\r\n      },\r\n      {\r\n        title: 'Copy draggable', page: Copy, url: getUrl('copy.js')\r\n      },\r\n      // {\r\n      //   title: 'auto scroll', page: ScrollBoth, url: getUrl('copy.js')\r\n      // },\r\n      // {\r\n      //   title: 'Drop Zones', page: DropZone, url: getUrl('drop-zone.js')\r\n      // }\r\n    ]\r\n  },\r\n  {\r\n    title: 'Nested Groups',\r\n    pages: [\r\n      {\r\n        title: 'Nested vertical sortable', page: Nested, url: getUrl('nested.js')\r\n      },\r\n      // {\r\n      //   title: 'Drag-drop between parent/child', page: NestedGroup, url: getUrl('nested-group.js')\r\n      // }\r\n    ]\r\n  },\r\n  {\r\n    title: 'Advanced options',\r\n    pages: [\r\n      {\r\n        title: 'Lock axis', page: LockAxis, url: getUrl('lock-axis.js')\r\n      },\r\n      {\r\n        title: 'Drag begin delay of 500ms', page: DragDelay, url: getUrl('drag-delay.js')\r\n      },\r\n      {\r\n        title: 'Drag handle', page: DragHandle, url: getUrl('drag-handle.js')\r\n      },\r\n      {\r\n        title: 'Drag and Drop classses', page: DragClass, url: getUrl('drag-class.js')\r\n      },\r\n      {\r\n        title: 'Animation duration 500ms', page: TransitionDuration, url: getUrl('transition-duration.js')\r\n      },\r\n      // {\r\n      //   title: 'Dynamic add/remove Containers', page: DynamicContainers, url: getUrl('dynamic-containers.js')\r\n      // }\r\n    ]\r\n  }\r\n];","import React, { Component } from 'react';\r\nimport { Container, Draggable, constants } from 'react-smooth-dnd';\r\nimport { applyDrag, generateItems } from './utils';\r\n\r\nclass DynamicContainers extends Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.renderContainer = this.renderContainer.bind(this);\r\n\r\n\t\tthis.state = {\r\n\t\t\titems1: generateItems(45, (i) => ({ id: '1' + i, data: `Draggable 1 - ${i}` })),\r\n\t\t\titems2: generateItems(25, (i) => ({ id: '2' + i, data: `Draggable 2 - ${i}` })),\r\n\t\t\titems3: generateItems(25, (i) => ({ id: '3' + i, data: `Draggable 3 - ${i}` })),\r\n\t\t\titems4: generateItems(25, (i) => ({ id: '4' + i, data: `Draggable 4 - ${i}` })),\r\n\t\t\tpopup1Open: false,\r\n\t\t\tpopup2Open: false,\r\n\t\t};\r\n\t}\r\n\r\n\trenderContainer(listName, getList, autoScroll = true) {\r\n\t\treturn (\r\n\t\t\t<div className={`dynamic-container-holder`}>\r\n\t\t\t\t<Container autoScrollEnabled={autoScroll} getGhostParent={() => document.body} groupName=\"1\" getChildPayload={i => getList()[i]} onDrop={e => this.setState({ [listName]: applyDrag(getList(), e) })}>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tgetList().map(p => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<Draggable key={p.id}>\r\n\t\t\t\t\t\t\t\t\t<div className=\"draggable-item\">\r\n\t\t\t\t\t\t\t\t\t\t{p.data}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</Draggable>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t</Container>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div style={{ display: 'flex', justifyContent: 'stretch', height: '100%' }}>\r\n\t\t\t\t<div className=\"dynamic-left-pane\">\r\n\t\t\t\t\t{this.renderContainer('items1', () => this.state.items1)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"dynamic-right-pane\">\r\n\t\t\t\t\t<div className=\"dynamic-menu-container\">\r\n\t\t\t\t\t\t<div className=\"popup-container-button\"\r\n\t\t\t\t\t\t\tonMouseEnter={() => this.setState({ popup1Open: true })}\r\n\t\t\t\t\t\t\tonMouseLeave={() => this.setState({ popup1Open: false })}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tMake Container Visible\r\n\t\t\t\t\t\t\t<div className={`popup-container ${this.state.popup1Open ? 'open' : ''}  ${constants.preventAutoScrollClass}`}>\r\n\t\t\t\t\t\t\t\t{this.renderContainer('items2', () => this.state.items2)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"popup-container-button\"\r\n\t\t\t\t\t\t\tonMouseEnter={() => this.setState({ popup2Open: true })}\r\n\t\t\t\t\t\t\tonMouseLeave={() => this.setState({ popup2Open: false })}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tMount New Container\r\n\t\t\t\t\t\t\t{this.state.popup2Open ? <div className={`popup-container ${this.state.popup2Open ? 'open' : ''}`}>\r\n\t\t\t\t\t\t\t\t{this.renderContainer('items3', () => this.state.items3)}\r\n\t\t\t\t\t\t\t</div> : null}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"dynamic-right-content\">\r\n\t\t\t\t\t\t{this.renderContainer('items4', () => this.state.items4)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nDynamicContainers.propTypes = {\r\n\r\n};\r\n\r\nexport default DynamicContainers;","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './app.css';\r\nimport '../demo.css';\r\nimport pages from '../pages';\r\n\r\nclass App extends Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.toggleNav = this.toggleNav.bind(this);\r\n\t\tthis.renderMenu = this.renderMenu.bind(this);\r\n\t\tthis.openCode = this.openCode.bind(this);\r\n\t\tthis.state = {\r\n\t\t\tnavOpen: true,\r\n\t\t\tselectedPage: pages[0].pages[0]\r\n\t\t};\r\n\t}\r\n\trender() {\r\n\t\tconst Page = this.state.selectedPage.page;\r\n\t\treturn (\r\n\t\t\t<div className=\"app\">\r\n\t\t\t\t<div className={`nav-button ${this.state.navOpen ? 'open' : ''}`} onClick={this.toggleNav}>\r\n\t\t\t\t\t<span></span>\r\n\t\t\t\t\t<span></span>\r\n\t\t\t\t\t<span></span>\r\n\t\t\t\t\t<span></span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={`navigator ${this.state.navOpen ? '' : 'closed'}`}>\r\n\t\t\t\t\t<div className=\"navigator-content\">\r\n\t\t\t\t\t\t<div className=\"navigator-header\">\r\n\t\t\t\t\t\t\t<h3>react-smooth-dnd</h3>\r\n\t\t\t\t\t\t\t<div className=\"divider\"></div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{this.renderMenu()}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"content\">\r\n\t\t\t\t\t<div className={`header ${this.state.navOpen ? 'open' : ''}`}>\r\n\t\t\t\t\t\t{this.state.selectedPage.title}\r\n\t\t\t\t\t\t<div className=\"source-code\" onClick={this.openCode}>\r\n\t\t\t\t\t\t\t<img src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZml0PSIiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIG1lZXQiIGZvY3VzYWJsZT0iZmFsc2UiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgZD0iTTAgMGgyNHYyNEgwVjB6Ij48L3BhdGg+CiAgICA8cGF0aCBkPSJNOS40IDE2LjZMNC44IDEybDQuNi00LjZMOCA2bC02IDYgNiA2IDEuNC0xLjR6bTUuMiAwbDQuNi00LjYtNC42LTQuNkwxNiA2bDYgNi02IDYtMS40LTEuNHoiIGZpbGw9IiNGRkYiPjwvcGF0aD4KPC9zdmc+Cg==\" alt=\"\" />\t\r\n\t\t\t\t\t\t\t<span>source</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"demo\">\r\n\t\t\t\t\t\t<Page />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\trenderMenu() {\r\n\t\treturn pages.map(section => {\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"menu-section\">\r\n\t\t\t\t\t<h4>{section.title}</h4>\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t{section.pages.map(page => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<li className={`${this.state.selectedPage === page ? 'selected': ''}`} onClick={() => { this.setState({ selectedPage: page }); }}>{page.title}</li>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\ttoggleNav() {\r\n\t\tthis.setState({\r\n\t\t\tnavOpen: !this.state.navOpen\r\n\t\t});\r\n\t}\r\n\r\n\topenCode() {\r\n\t\tconst url = this.state.selectedPage.url;\r\n\t\twindow.open(url, 'none');\r\n\t}\r\n}\r\n\r\nApp.propTypes = {\r\n\r\n};\r\n\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport Vanilla from './Vanilla';\r\nimport Nested from './Nested';\r\nimport Tryout from './Tryout';\r\nimport Demo from './demo/app';\r\n\r\nReactDOM.render(<Demo />, document.getElementById('root'));\r\n"],"sourceRoot":""}