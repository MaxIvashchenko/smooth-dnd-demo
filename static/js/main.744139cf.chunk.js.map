{"version":3,"sources":["../../react-smooth-dnd/index.ts","../../smooth-dnd/src/constants.ts","../../smooth-dnd/src/utils.ts","../../smooth-dnd/index.ts","../../smooth-dnd/src/interfaces.ts","../../smooth-dnd/src/defaults.ts","../../smooth-dnd/src/layoutManager.ts","../../smooth-dnd/src/scroller.ts","../../smooth-dnd/src/styles.ts","../../smooth-dnd/src/mediator.ts","../../smooth-dnd/src/container.ts","../../smooth-dnd/src/dropHandlers.ts","../../react-smooth-dnd/src/Container.tsx","../../react-smooth-dnd/src/Draggable.tsx","../../smooth-dnd/src/polyfills.ts","Vanilla.js","Nested.js","Tryout.js","demo/pages/utils.js","demo/pages/simple.js","demo/pages/simple-horizontal.js","demo/pages/groups.js","demo/pages/copy.js","demo/pages/horizontal.js","demo/pages/nested.js","demo/pages/form.js","demo/pages/nested-group.js","demo/pages/vanilla-nested.js","demo/pages/height.js","demo/pages/cards.js","demo/pages/lock-axis.js","demo/pages/drag-delay.js","demo/pages/drag-handle.js","demo/pages/drag-class.js","demo/pages/transition-duration.js","demo/pages/scroll-both.js","demo/pages/drop-zone.js","demo/pages/chess.js","demo/pages/index.js","demo/pages/dynamic-containers.js","demo/app/index.js","index.js"],"names":["_src_Container__WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","d","__webpack_exports__","_src_Draggable__WEBPACK_IMPORTED_MODULE_1__","smooth_dnd__WEBPACK_IMPORTED_MODULE_2__","o","r","containerInstance","defaultGroupName","wrapperClass","defaultGrabHandleClass","animationClass","translationValue","visibilityValue","ghostClass","containerClass","extraSizeForInsertion","stretcherElementClass","stretcherElementInstance","isDraggableDetached","disbaleTouchActions","noUserSelectClass","preventAutoScrollClass","dropPlaceholderDefaultClass","dropPlaceholderInnerClass","dropPlaceholderWrapperClass","dropPlaceholderFlexContainerClass","getIntersection","rect1","rect2","left","Math","max","top","right","min","bottom","getIntersectionOnAxis","axis","getContainerRect","element","_rect","getBoundingClientRect","rect","hasBiggerChild","isScrollingOrHidden","width","scrollWidth","height","scrollHeight","getScrollingAxis","style","window","getComputedStyle","overflow","ScrollAxis","xy","overFlowX","xScroll","overFlowY","yScroll","x","y","isScrolling","overFlowAxis","concat","clientWidth","clientHeight","getVisibleRect","elementRect","currentElement","parentElement","getParentRelevantContainerElement","relevantContainers","current","_ret","container","some","p","v","_typeof","listenScrollParent","clb","scrollers","stop","forEach","removeEventListener","push","setScrollers","dispose","start","addEventListener","getParent","selector","matches","hasClass","cls","className","split","map","indexOf","addClass","classes","filter","unshift","join","removeClass","debounce","fn","delay","immediate","timer","_len","arguments","length","params","Array","_key","clearTimeout","call","apply","setTimeout","removeChildAt","parent","index","removeChild","children","addChildAt","child","appendChild","insertBefore","isMobile","navigator","userAgent","match","clearSelection","getSelection","empty","removeAllRanges","document","selection","getElementCursor","cursor","isVisible","_src_constants__WEBPACK_IMPORTED_MODULE_0__","_src_container__WEBPACK_IMPORTED_MODULE_1__","_src_dropHandlers__WEBPACK_IMPORTED_MODULE_2__","delegateProperty","from","to","propName","Object","defineProperty","set","val","get","deprecetedDefaultExport","options","console","warn","cancelDrag","isDragging","defaultOptions","groupName","undefined","behaviour","orientation","getChildPayload","animationDuration","autoScrollEnabled","shouldAcceptDrop","shouldAnimateDrop","horizontalMap","size","distanceToParent","translate","begin","end","dragPosition","scrollSize","offsetSize","scrollValue","scale","setSize","setters","verticalMap","layoutManager","containerElement","_animationDuration","propMapper","obj","prop","value","orientationDependentProps","values","translation","invalidate","invalidateContainerRectangles","scaleX","offsetWidth","scaleY","offsetHeight","invalidateContainerScale","Utils","visibleRect","lastVisibleRect","getSize","htmlElement","tagName","getAxisValue","position","getContainerRectangles","getBeginEndOfDOMRect","getBeginEndOfContainer","getBeginEndOfContainerVisibleRect","getBeginEnd","getDistanceToOffsetParent","setTranslation","removeProperty","getTranslation","setVisibility","visibility","isInVisibleRect","_values$visibleRect","containerRect","getTopLeftOfElementBegin","getScrollSize","getScrollValue","setScrollValue","invalidateRects","getPosition","setBegin","getScrollParams","pos","scrollerSize","moveDistance","direction","speedFactor","createAnimator","request","startTime","speed","animate","_direction","_speed","requestAnimationFrame","timestamp","timeDiff","distanceDiff","scrollLeft","scrollTop","scrollBy","addScrollValue","cancelAnimationFrame","rectangleGetter","scroller","containers","maxScrollSpeed","animatorInfos","reduce","acc","filteredAnimators","scrollerAnimators","scrollingAxis","axisAnimations","animator","getRect","scrollerElement","getScrollerAnimator","find","q","_toConsumableArray","_ref","draggableInfo","reset","scrollParams","cachedRect","setScrollParams","mousePosition","_animator$axisAnimati","_x$scrollParams","_y$scrollParams","overlappingAnimators","topScrollerAnimator","elementFromPoint","scrollAnimator","getTopmostScrollAnimator","verticalWrapperClass","display","horizontalWrapperClass","vertical-align","css","_defineProperty","_css","min-height","min-width","box-sizing","transition","pointer-events","touch-action","-ms-touch-action","-webkit-touch-callout","-webkit-user-select","-khtml-user-select","-moz-user-select","-ms-user-select","user-select","flex","justify-content","align-items","background-color","border","convertToCssString","keys","styleString","propValue","addCursorStyleToBody","head","getElementsByTagName","createElement","cssString","body *","type","styleSheet","cssText","createTextNode","grabEvents","moveEvents","releaseEvents","dragListeningContainers","grabbedElement","ghostInfo","isCanceling","dropAnimationStarted","missedDrag","handleDrag","handleScroll","sourceContainerLockAxis","cursorStyleElement","containerRectableWatcher","animationHandle","isStarted","_start","layout","watchRectangles","listenEvents","e","onMouseDown","passive","getGhostParent","ghostParent","body","handleDragStartConditions","startEvent","moveThreshold","maxMoveInDelay","onMove","event","_getPointerEvent","getPointerEvent","currentX","clientX","currentY","clientY","abs","deregisterEvent","callCallback","onUp","onHTMLDrag","_startEvent","_delay","_clb","button","target","constants","dragHandleSelector","getOptions","nonDragAreaSelector","startDrag","onMouseUp","dragBeginDelay","initiateDrag","onMouseMove","preventDefault","containerOptions","_ref4","mousePos","leftTop","beginEnd","beginBoundary","endBoundary","positionInBoundary","positionDelta","topLeft","centerDelta","handleMouseMoveForContainer","translateGhost","debouncedHandleMissedDragFrame","handleMissedDragFrame","handleDragImmediate","styleElement","callback","endDrop","ghost","transitionDuration","animateGhostToPosition","_ref2","duration","dropClass","firstElementChild","disappearAnimation","targetElement","payload","getDragResult","shadowBeginEnd","_container$getOptions","removeOnDropOut","rectangles","_ref3","removedIndex","elementSize","getTranslateCalculator","dragResult","addedIndex","prevDraggableEnd","draggables","handleDropAnimation","fireOnDragStartEnd","containerToCallDrop","shift","handleDrop","touches","containerBoxChanged","onTranslated","dragHandler","targetContainers","animationFrame","getScrollHandler","dragScroller","getScrollMaxSpeed","props","isStart","onDragStart","onDragEnd","isSource","isDragRelevant","willAcceptDrop","setDraggables","lockAxis","toLowerCase","draggableElement","draggableIndex","draggableRect","elementIndex","invalidateShadow","getDraggableInfo","wrapperElement","wrapperRect","wrapperVisibleRect","midX","midY","cloneNode","zIndex","boxSizing","transform","shouldUseTransformForGhost","pointerEvents","userSelect","dragClass","dragCursor","getGhostElement","prepareDrag","ghostAnimationFrame","translateDuration","fadeOut","_ghostInfo","_ghostInfo$topLeft","useTransform","transformString","opacity","outOfBoundsDraggableInfo","assign","Number","MAX_SAFE_INTEGER","cancelDrop","id","addStyleToHead","Mediator","register","registerContainer","unregister","splice","fireRemoveElement","indexInDragListeners","unregisterContainer","setAnimation","add","sourceContainer","sourceOptions","wrapChildren","prototype","nodeType","Node","ELEMENT_NODE","wrapper","smoothDnD","wrapChild","div","findDraggebleAtPos","withRespectToMiddlePoints","startIndex","endIndex","_layout$getBeginEnd","middleIndex","floor","_layout$getBeginEnd2","draggablesReset","parentNode","resetDraggables","dropHandler","domDropHandler","_ref5","forDispose","dropHandlerParams","onDrop","getRemovedItem","_ref6","prevRemovedIndex","_ref7","setRemovedItemVisibilty","_ref8","_ref9","_ref10","_ref11","hitElement","getElementSize","_ref12","_ref13","handleTargetContainer","_ref14","_ref15","setTargetContainer","getDragInsertionIndexForDropZone","_ref18","getShadowBeginEndForDropZone","_ref19","prevAddedIndex","_ref20","_layout$getBeginEndOf","drawDropPlaceholder","_ref21","_ref22","_ref22$dragResult","dropPlaceholderContainer","dropPlaceholder","_ref23","showOnTop","innerElement","dropArea","invalidateShadowBeginEndIfNeeded","shadowBoundsGetter","getShadowBeginEnd","_ref24","getNextAddedIndex","getIndexForPos","_ref16","findDraggable","_ref17","_ref17$dragResult","beginAdjustment","getDragInsertionIndex","_ref25","resetShadowAdjustment","lastAddedIndex","_ref26","_ref26$dragResult","handleInsertionSizeChange","_ref27","strectherElement","_ref28","_ref28$dragResult","containerBeginEnd","containerEnd","lastDraggableEnd","stretcherSize","toRemove","calculateTranslations","_ref29","_ref30","_ref30$dragResult","draggable","_ref31","_ref32","beforeIndex","MIN_SAFE_INTEGER","dropAreaBegin","dropAreaEnd","afterBounds","beforeBounds","beforeSize","threshold","afterIndex","afterSize","shadowRectTopLeft","handleFirstInsertShadowAdjustment","_ref33","_ref33$dragResult","fireDragEnterLeaveEvents","_ref34","wasDragIn","_ref35","isDragIn","onDragEnter","onDragLeave","fireOnDropReady","_ref36","_ref37","_ref37$dragResult","_ref37$draggableInfo","onDropReady","adjustedAddedIndex","getDragHandler","compose","functions","hydratedFunctions","result","Container","lastDraggableInfo","getContainerProps","scrollListener","processLastDraggableInfo","newDraggables","i","pop","dragresult","useTransformForGhost","setOptions","merge","containerIniter","reactDropHandler","_utils__WEBPACK_IMPORTED_MODULE_0__","_constants__WEBPACK_IMPORTED_MODULE_1__","dropResult","droppedElement","removedWrapper","handler","dropHandlers","_this","_classCallCheck","this","_getPrototypeOf","_assertThisInitialized","React","createRef","getContainerOptions","bind","getContainer","isObjectTypePropsChanged","prevContainer","Component","prevProps","_this$props","render","_objectWithoutProperties","key","hasOwnProperty","containerRef","react__WEBPACK_IMPORTED_MODULE_0___default","a","ref","_this2","optionName","PropTypes","oneOf","string","object","number","bool","func","oneOfType","shape","Draggable","cloneElement","clsName","_extends","constructor","Element","matchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector","s","ownerDocument","querySelectorAll","item","node","nodes","childNodes","fun","TypeError","t","len","thisArg","applyPolyfills","itemCls","margin","textAlign","applyDrag","arr","toConsumableArray","itemToAdd","generateItems","count","creator","Simple","classCallCheck","possibleConstructorReturn","getPrototypeOf","state","items","data","react_default","react_smooth_dnd","setState","SimpleScroller","_this3","_this4","groupStyle","overflowX","SimpleHorizontal","marginLeft","Groups","items1","items2","items3","items4","justifyContent","marginTop","marginRight","Copy","Nested","containerOnDrop","assertThisInitialized","containerOnDrop2","containerOnDrop3","padding","marginBottom","backgroundColor","j","newItems","id1","id2","form","label","name","cols","rows","selected","Form","generateForm","paddingBottom","lorem","columnNames","cardColors","pickColor","rand","random","Cards","onColumnDrop","onCardDrop","getCardPayload","scene","toFixed","slice","column","log","dropPlaceholderAnimationDuration","card","columnId","columnIndex","newColumn","LockAxis","DragDelay","DragHandle","float","DragClass","TransitionDuration","getUrl","pagename","pages","title","page","url","simples","App","toggleNav","renderMenu","openCode","navOpen","selectedPage","Page","onClick","src","alt","section","open","ReactDOM","demo_app","getElementById"],"mappings":"uFAAA,IAAAA,EAAAC,EAAA,IAAAA,EAAAC,EAAAC,EAAA,8BAAAH,EAAA,QAAAI,EAAAH,EAAA,IAAAA,EAAAC,EAAAC,EAAA,8BAAAC,EAAA,QAAAC,EAAAJ,EAAA,IAAAA,EAAAK,EAAAD,EAAA,cAAAJ,EAAAC,EAAAC,EAAA,8BAAAE,EAAA,0CCAAJ,EAAAM,EAAAJ,GAAAF,EAAAC,EAAAC,EAAA,sCAAAK,IAAAP,EAAAC,EAAAC,EAAA,qCAAAM,IAAAR,EAAAC,EAAAC,EAAA,iCAAAO,IAAAT,EAAAC,EAAAC,EAAA,2CAAAQ,IAAAV,EAAAC,EAAAC,EAAA,mCAAAS,IAAAX,EAAAC,EAAAC,EAAA,qCAAAU,IAAAZ,EAAAC,EAAAC,EAAA,oCAAAW,IAAAb,EAAAC,EAAAC,EAAA,+BAAAY,IAAAd,EAAAC,EAAAC,EAAA,mCAAAa,IAAAf,EAAAC,EAAAC,EAAA,0CAAAc,IAAAhB,EAAAC,EAAAC,EAAA,0CAAAe,IAAAjB,EAAAC,EAAAC,EAAA,6CAAAgB,IAAAlB,EAAAC,EAAAC,EAAA,wCAAAiB,IAAAnB,EAAAC,EAAAC,EAAA,wCAAAkB,IAAApB,EAAAC,EAAAC,EAAA,sCAAAmB,IAAArB,EAAAC,EAAAC,EAAA,2CAAAoB,IAAAtB,EAAAC,EAAAC,EAAA,gDAAAqB,IAAAvB,EAAAC,EAAAC,EAAA,8CAAAsB,IAAAxB,EAAAC,EAAAC,EAAA,gDAAAuB,IAAAzB,EAAAC,EAAAC,EAAA,sDAAAwB,IAAO,IAAMnB,EAAoB,gCAEpBC,EAAmB,+BACnBC,EAAe,+BACfC,EAAyB,iCACzBC,EAAiB,WACjBC,EAAmB,2CACnBC,EAAkB,0CAClBC,EAAa,mBAEbC,EAAiB,uBAEjBC,EAAwB,sCACxBC,EAAwB,+BACxBC,EAA2B,gCAE3BC,EAAsB,kCAEtBC,EAAsB,kCACtBC,EAAoB,4BAEpBC,EAAyB,uCAEzBC,EAA8B,wCAC9BC,EAA4B,sCAC5BC,EAA8B,yCAC9BC,EAAoC,62BCvB1C,IAAMC,EAAkB,SAACC,EAAaC,GAC3C,MAAO,CACLC,KAAMC,KAAKC,IAAIJ,EAAME,KAAMD,EAAMC,MACjCG,IAAKF,KAAKC,IAAIJ,EAAMK,IAAKJ,EAAMI,KAC/BC,MAAOH,KAAKI,IAAIP,EAAMM,MAAOL,EAAMK,OACnCE,OAAQL,KAAKI,IAAIP,EAAMQ,OAAQP,EAAMO,UAI5BC,EAAwB,SAACT,EAAaC,EAAaS,GAC9D,MAAa,MAATA,EACK,CACLR,KAAMC,KAAKC,IAAIJ,EAAME,KAAMD,EAAMC,MACjCG,IAAKL,EAAMK,IACXC,MAAOH,KAAKI,IAAIP,EAAMM,MAAOL,EAAMK,OACnCE,OAAQR,EAAMQ,QAGT,CACLN,KAAMF,EAAME,KACZG,IAAKF,KAAKC,IAAIJ,EAAMK,IAAKJ,EAAMI,KAC/BC,MAAON,EAAMM,MACbE,OAAQL,KAAKI,IAAIP,EAAMQ,OAAQP,EAAMO,UAK9BG,EAAmB,SAACC,GAC/B,IAAMC,EAAQD,EAAQE,wBAChBC,EAAO,CACXb,KAAMW,EAAMX,KACZI,MAAOO,EAAMP,MACbD,IAAKQ,EAAMR,IACXG,OAAQK,EAAML,QAGhB,GAAIQ,EAAeJ,EAAS,OAASK,EAAoBL,EAAS,KAAM,CACtE,IAAMM,EAAQH,EAAKT,MAAQS,EAAKb,KAChCa,EAAKT,MAAQS,EAAKT,MAAQM,EAAQO,YAAcD,EAGlD,GAAIF,EAAeJ,EAAS,OAASK,EAAoBL,EAAS,KAAM,CACtE,IAAMQ,EAASL,EAAKP,OAASO,EAAKV,IAClCU,EAAKP,OAASO,EAAKP,OAASI,EAAQS,aAAeD,EAGrD,OAAOL,GAGIO,EAAmB,SAACV,GAC/B,IAAMW,EAAQC,OAAOC,iBAAiBb,GAChCc,EAAWH,EAAK,SAEtB,GAD6B,SAAbG,GAAoC,WAAbA,EAC1B,OAAOC,IAAWC,GAC/B,IAAMC,EAAYN,EAAK,cACjBO,EAAwB,SAAdD,GAAsC,WAAdA,EAClCE,EAAYR,EAAK,cACjBS,EAAwB,SAAdD,GAAsC,WAAdA,EAExC,OAAID,GAAWE,EAAgBL,IAAWC,GACtCE,EAAgBH,IAAWM,EAC3BD,EAAgBL,IAAWO,EACxB,MAGIC,EAAc,SAACvB,EAAsBF,GAChD,IAAMa,EAAQC,OAAOC,iBAAiBb,GAChCc,EAAWH,EAAK,SAChBa,EAAeb,EAAK,YAAAc,OAAa3B,IAGvC,MAF6B,SAAbgB,GAAoC,WAAbA,IACE,SAAjBU,GAA4C,WAAjBA,IAIxCnB,EAAsB,SAACL,EAAsBF,GACxD,IAAMa,EAAQC,OAAOC,iBAAiBb,GAChCc,EAAWH,EAAK,SAChBa,EAAeb,EAAK,YAAAc,OAAa3B,IAGvC,MAF6B,SAAbgB,GAAoC,WAAbA,GAAsC,WAAbA,IACvB,SAAjBU,GAA4C,WAAjBA,GAA8C,WAAjBA,IAIrEpB,EAAiB,SAACJ,EAAsBF,GACnD,MAAa,MAATA,EACKE,EAAQO,YAAcP,EAAQ0B,YAE9B1B,EAAQS,aAAeT,EAAQ2B,cAQ7BC,EAAiB,SAAC5B,EAAsB6B,GACnD,IAAIC,EAAiB9B,EACjBG,EAAO0B,GAAe9B,EAAiBC,GAE3C,IADA8B,EAAiB9B,EAAQ+B,cAClBD,GACD1B,EAAe0B,EAAgB,MAAQzB,EAAoByB,EAAgB,OAC7E3B,EAAON,EAAsBM,EAAM2B,EAAe5B,wBAAyB,MAGzEE,EAAe0B,EAAgB,MAAQzB,EAAoByB,EAAgB,OAC7E3B,EAAON,EAAsBM,EAAM2B,EAAe5B,wBAAyB,MAG7E4B,EAAiBA,EAAeC,cAGlC,OAAO5B,GAGI6B,EAAoC,SAAChC,EAAkBiC,GAGlE,IAFA,IAAIC,EAAoBlC,EAEjBkC,GAAS,CACd,GAAKA,EAAqBnE,qBAAoB,KAAAoE,EAAA,WAC5C,IAAMC,EAAYF,EAAQnE,qBAC1B,GAAIkE,EAAmBI,KAAK,SAAAC,GAAC,OAAIA,IAAMF,IACrC,OAAAG,EAAOH,GAHmC,iBAAAI,EAAAL,GAAA,OAAAA,EAAAI,EAM9CL,EAAUA,EAAQH,cAGpB,OAAO,MAGIU,EAAqB,SAACzC,EAAsB0C,GACvD,IAAIC,EAA2B,GA0B/B,SAASC,IACHD,IACFA,EAAUE,QAAQ,SAAAP,GAAC,OAAIA,EAAEQ,oBAAoB,SAAUJ,KACvD9B,OAAOkC,oBAAoB,SAAUJ,IAIzC,OA7BA,WACE,IAAIZ,EAAiB9B,EACrB,KAAO8B,IACDP,EAAYO,EAAgB,MAAQP,EAAYO,EAAgB,OAClEa,EAAUI,KAAKjB,GAEjBA,EAAiBA,EAAeC,cARpCiB,GA+BO,CACLC,QApBF,WACEL,IACAD,EAAY,MAmBZO,MAhBF,WACMP,IACFA,EAAUE,QAAQ,SAAAP,GAAC,OAAIA,EAAEa,iBAAiB,SAAUT,KACpD9B,OAAOuC,iBAAiB,SAAUT,KAcpCE,SAeSQ,EAAY,SAACpD,EAAyBqD,GAEjD,IADA,IAAInB,EAA0BlC,EACvBkC,GAAS,CACd,GAAIA,EAAQoB,QAAQD,GAClB,OAAOnB,EAETA,EAAUA,EAAQH,cAGpB,OAAO,MAGIwB,EAAW,SAACvD,EAAsBwD,GAC7C,OACExD,EAAQyD,UACLC,MAAM,KACNC,IAAI,SAAArB,GAAC,OAAIA,IACTsB,QAAQJ,IAAQ,GAIVK,EAAW,SAAC7D,EAAqCwD,GAC5D,GAAIxD,EAAS,CACX,IAAM8D,EAAU9D,EAAQyD,UAAUC,MAAM,KAAKK,OAAO,SAAAzB,GAAC,OAAIA,KAC3B,IAA1BwB,EAAQF,QAAQJ,KAClBM,EAAQE,QAAQR,GAChBxD,EAAQyD,UAAYK,EAAQG,KAAK,QAK1BC,EAAc,SAAClE,EAAsBwD,GAChD,GAAIxD,EAAS,CACX,IAAM8D,EAAU9D,EAAQyD,UAAUC,MAAM,KAAKK,OAAO,SAAAzB,GAAC,OAAIA,GAAKA,IAAMkB,IACpExD,EAAQyD,UAAYK,EAAQG,KAAK,OAIxBE,EAAW,SAACC,EAAcC,EAAeC,GACpD,IAAIC,EAAa,KACjB,OAAO,WAAsB,QAAAC,EAAAC,UAAAC,OAAlBC,EAAkB,IAAAC,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAlBF,EAAkBE,GAAAJ,UAAAI,GACvBN,GACFO,aAAaP,GAEXD,IAAcC,EAChBH,EAAGW,KAAHC,MAAAZ,EAAE,CAAM,MAAN3C,OAAekD,IAEjBJ,EAAQU,WAAW,WACjBV,EAAQ,KACRH,EAAGW,KAAHC,MAAAZ,EAAE,CAAM,MAAN3C,OAAekD,KAChBN,KAKIa,EAAgB,SAACC,EAAqBC,GACjD,OAAOD,EAAOE,YAAYF,EAAOG,SAASF,KAG/BG,EAAa,SAACJ,EAAqBK,EAAoBJ,GAC9DA,GAASD,EAAOG,SAASZ,OAC3BS,EAAOM,YAAYD,GAEnBL,EAAOO,aAAaF,EAAOL,EAAOG,SAASF,KAIlCO,EAAW,WACtB,MAAsB,qBAAX/E,WAEPA,OAAOgF,UAAUC,UAAUC,MAAM,aACjClF,OAAOgF,UAAUC,UAAUC,MAAM,WACjClF,OAAOgF,UAAUC,UAAUC,MAAM,YACjClF,OAAOgF,UAAUC,UAAUC,MAAM,UACjClF,OAAOgF,UAAUC,UAAUC,MAAM,UACjClF,OAAOgF,UAAUC,UAAUC,MAAM,gBACjClF,OAAOgF,UAAUC,UAAUC,MAAM,oBAU1BC,EAAiB,WACxBnF,OAAOoF,aACLpF,OAAOoF,eAAeC,MAExBrF,OAAOoF,eAAeC,QACbrF,OAAOoF,eAAeE,iBAE/BtF,OAAOoF,eAAeE,kBAEdtF,OAAOuF,SAAiBC,WAEjCxF,OAAOuF,SAAiBC,UAAUH,SAI1BI,EAAmB,SAACrG,GAC/B,GAAIA,EAAS,CACX,IAAMW,EAAQC,OAAOC,iBAAiBb,GACtC,GAAIW,EACF,OAAOA,EAAM2F,OAIjB,OAAO,MAkBF,SAASC,EAAUpG,GACxB,QAASA,EAAKP,QAAUO,EAAKV,KAAOU,EAAKT,OAASS,EAAKb,uCCzTzD,IAAAkH,EAAAhJ,EAAA,GAAAA,EAAAC,EAAAC,EAAA,8BAAA8I,IAAA,IAAAC,EAAAjJ,EAAA,IAAAA,EAAAC,EAAAC,EAAA,8BAAA+I,EAAA,QAAAC,EAAAlJ,EAAA,IAAAA,EAAAC,EAAAC,EAAA,iCAAAgJ,IAAAlJ,EAAA,IAcA,SAASmJ,EAAiBC,EAAWC,EAAQC,GACzCC,OAAOC,eAAeJ,EAAME,EAAU,CAClCG,IAAK,SAACC,GACFL,EAAGC,GAAYI,GAEnBC,IAAK,kBAAMN,EAAGC,MAItB,IAAMM,EAA4C,SAASpH,EAAmBqH,GAE1E,OADAC,QAAQC,KAAK,qEACNnF,YAAUpC,EAASqH,IAG9BD,EAAwBI,WAAa,WACjCpF,IAAUoF,cAGdJ,EAAwBK,WAAa,WACjC,OAAOrF,IAAUqF,cAGrBd,EAAiBS,EAAyBhF,IAAW,wBACrDuE,EAAiBS,EAAyBhF,IAAW,kBACrDuE,EAAiBS,EAAyBhF,IAAW,aACrDuE,EAAiBS,EAAyBhF,IAAW,eAGtCgF,2CC5BR,IAAKrG,EAAZvD,EAAAC,EAAAC,EAAA,sBAAAqD,aAAYA,kFCZC2G,EAAmC,CAC/CC,eAAWC,EACXC,UAAW,OACXC,YAAa,WACbC,qBAAiBH,EACjBI,kBAAmB,IACnBC,mBAAmB,EACnBC,sBAAkBN,EAClBO,uBAAmBP,kBCFdQ,EAAyB,CAC9BC,KAAM,cACNC,iBAAkB,aAClBC,UAAW,YACXC,MAAO,OACPC,IAAK,QACLC,aAAc,IACdC,WAAY,cACZC,WAAY,cACZC,YAAa,aACbC,MAAO,SACPC,QAAS,QACTC,QAAS,CACRT,UAAa,SAACrB,GAAD,qBAAAzF,OAAgCyF,EAAhC,gBAIT+B,EAAuB,CAC5BZ,KAAM,eACNC,iBAAkB,YAClBC,UAAW,YACXC,MAAO,MACPC,IAAK,SACLC,aAAc,IACdC,WAAY,eACZC,WAAY,eACZC,YAAa,YACbC,MAAO,SACPC,QAAS,SACTC,QAAS,CACRT,UAAa,SAACrB,GAAD,uBAAAzF,OAAkCyF,EAAlC,aAmBA,SAASgC,EAAcC,EAA4BrB,EAA0BsB,GAC3FD,EAAiB3K,yBAAyB,EAC1C,IACM6K,EAlBP,SAAmC1F,GAUlC,MAAO,CAAEwD,IATT,SAAamC,EAAiBC,GAE7B,OAAOD,EADY3F,EAAI4F,IACEA,IAOZtC,IAJd,SAAaqC,EAAiBC,EAAcC,GAC3CF,EAAI3F,EAAI4F,IAAS5F,EAAIqF,QAAQO,GAAQ5F,EAAIqF,QAAQO,GAAMC,GAASA,IAW9CC,CADS,eAAhB3B,EAA+BM,EAAgBa,GAErDS,EAAqB,CAC1BC,YAAa,GAWd,SAASC,IACRC,EAA8BV,GAc/B,SAAkCA,GACjC,IAAMhJ,EAAOgJ,EAAiBjJ,wBAC9BwJ,EAAOI,OAASX,EAAiBY,aAAgB5J,EAAKT,MAAQS,EAAKb,MAAQ6J,EAAiBY,YAAe,EAC3GL,EAAOM,OAASb,EAAiBc,cAAiB9J,EAAKP,OAASO,EAAKV,KAAO0J,EAAiBc,aAAgB,EAhB7GC,CAAyBf,GAG1B,SAASU,EAA8BV,GACtCO,EAAOvJ,KAAOgK,IAAuBhB,GACrC,IAAMiB,EAAcD,IAAqBhB,EAAkBO,EAAOvJ,MAC9DgK,IAAgBC,KACnBV,EAAOW,gBAAkBX,EAAOU,aAGjCV,EAAOU,YAAcA,EAoCtB,SAASE,EAAQtK,GAChB,IAAMuK,EAAcvK,EACpB,GAAIuK,EAAYC,QAAS,CACxB,IAAMrK,EAAOoK,EAAYrK,wBACzB,MAAuB,aAAhB4H,EAA6B3H,EAAKP,OAASO,EAAKV,IAAMU,EAAKT,MAAQS,EAAKb,KAGhF,OAAO+J,EAAWlC,IAAInH,EAAS,QAAUqJ,EAAWlC,IAAIuC,EAAQ,SAoBjE,SAASe,EAAaC,GACrB,OAAOrB,EAAWlC,IAAIuD,EAAU,gBAuFjC,OA3KA9J,OAAOuC,iBAAiB,SAAU,WACjC0G,EAA8BV,KAG/BlE,WAAW,WACV2E,KACE,IAqKI,CACNU,UACAK,uBAhJD,WACC,MAAO,CACNxK,KAAMuJ,EAAOvJ,KACbiK,YAAaV,EAAOU,YACpBC,gBAAiBX,EAAOW,kBA6IzBO,qBAzID,SAA8BzK,GAC7B,MAAO,CACNqI,MAAOa,EAAWlC,IAAIhH,EAAM,SAC5BsI,IAAKY,EAAWlC,IAAIhH,EAAM,SAuI3B0K,uBAnID,WAGC,MAAO,CAAErC,MAFKa,EAAWlC,IAAIuC,EAAOvJ,KAAM,SAAWuJ,EAAOC,YAE5ClB,IADJY,EAAWlC,IAAIuC,EAAOvJ,KAAM,OAASuJ,EAAOC,cAkIxDmB,kCA9HD,WAGC,MAAO,CAAEtC,MAFKa,EAAWlC,IAAIuC,EAAOU,YAAa,SAAWV,EAAOC,YAEnDlB,IADJY,EAAWlC,IAAIuC,EAAOU,YAAa,OAASV,EAAOC,cA6H/DoB,YA1GD,SAAqB/K,GACpB,IAAMwI,EANP,SAAmCxI,GAElC,OADiBqJ,EAAWlC,IAAInH,EAAS,qBAAuBA,EAAQ5B,qBAAqB,IAC3EiL,EAAWlC,IAAIuC,EAAQ,SAI3BsB,CAA0BhL,IAAYqJ,EAAWlC,IAAIuC,EAAOvJ,KAAM,SAAWuJ,EAAOC,aAAeN,EAAWlC,IAAIgC,EAAkB,eAClJ,MAAO,CACNX,QACAC,IAAKD,EAAQ8B,EAAQtK,GAAWqJ,EAAWlC,IAAIuC,EAAQ,WAuGxDe,eACAQ,eA5FD,SAAwBjL,EAAmB2J,GACrCA,EAGJN,EAAWpC,IAAIjH,EAAQW,MAAO,YAAagJ,GAF3C3J,EAAQW,MAAMuK,eAAe,aAI9BlL,EAAQ5B,oBAAoBuL,GAuF5BwB,eApFD,SAAwBnL,GACvB,OAAOA,EAAQ5B,qBAoFfgN,cAjFD,SAAuBpL,EAAmBuG,QACRqB,IAA7B5H,EAAQ3B,oBAAkC2B,EAAQ3B,qBAAqBkI,IACtEA,EACHvG,EAAQW,MAAMuK,eAAe,cAE7BlL,EAAQW,MAAM0K,WAAa,SAE5BrL,EAAQ3B,mBAAmBkI,IA2E5BA,UAvED,SAAmBvG,GAClB,YAAoC4H,IAA7B5H,EAAQ3B,oBAAkC2B,EAAQ3B,oBAuEzDiN,gBApED,SAAyBjK,EAAWC,GAAW,IAAAiK,EACX7B,EAAOU,YAApC9K,EADwCiM,EACxCjM,KAAMG,EADkC8L,EAClC9L,IAAKC,EAD6B6L,EAC7B7L,MAAOE,EADsB2L,EACtB3L,OAIpBA,EAASH,EAAM,IAClBG,EAASH,EAAM,IAEhB,IAAM+L,EAAgB9B,EAAOvJ,KAC7B,MAAoB,aAAhB2H,EACIzG,EAAImK,EAAclM,MAAQ+B,EAAImK,EAAc9L,OAAS4B,EAAI7B,GAAO6B,EAAI1B,EAEpEyB,EAAI/B,GAAQ+B,EAAI3B,GAAS4B,EAAIkK,EAAc/L,KAAO6B,EAAIkK,EAAc5L,QAyD5EmJ,QAzGD,SAAiB/I,EAA4CqI,GAC5DgB,EAAWpC,IAAIjH,EAAS,UAAWqI,IAyGnCoD,yBAtDD,SAAkCjD,GACjC,IAAI/I,EAAM,EACNH,EAAO,EASX,MARoB,eAAhBwI,GACHxI,EAAOkJ,EACP/I,EAAMiK,EAAOvJ,KAAKV,MAElBH,EAAOoK,EAAOvJ,KAAKb,KACnBG,EAAM+I,GAGA,CACN/I,MAAKH,SA2CNoM,cAvCD,SAAuB1L,GACtB,OAAOqJ,EAAWlC,IAAInH,EAAS,eAuC/B2L,eApCD,SAAwB3L,GACvB,OAAOqJ,EAAWlC,IAAInH,EAAS,gBAoC/B4L,eAjCD,SAAwB5L,EAAsBkH,GAC7C,OAAOmC,EAAWpC,IAAIjH,EAAS,cAAekH,IAiC9C0C,aACAiC,gBA3BD,WACChC,EAA8BV,IA2B9B2C,YAhCD,SAAqBpB,GACpB,OAAOD,EAAaC,IAgCpBqB,SAzBD,SAAkBpL,EAA4B6I,GAC7CH,EAAWpC,IAAItG,EAAO,QAAS6I,sWCtMjC,SAASwC,EAAgBtB,EAAoB5K,EAAYK,GAAiC,IAOrFqI,EACAC,EACAwD,EARI3M,EAA6Ba,EAA7Bb,KAAMI,EAAuBS,EAAvBT,MAAOD,EAAgBU,EAAhBV,IAAKG,EAAWO,EAAXP,OAClByB,EAASqJ,EAATrJ,EAAGC,EAAMoJ,EAANpJ,EACX,GAAID,EAAI/B,GAAQ+B,EAAI3B,GAAS4B,EAAI7B,GAAO6B,EAAI1B,EAC3C,OAAO,KAMK,MAATE,GACH0I,EAAQlJ,EACRmJ,EAAM/I,EACNuM,EAAM5K,IAENmH,EAAQ/I,EACRgJ,EAAM7I,EACNqM,EAAM3K,GAGP,IAAM4K,EAAezD,EAAMD,EAErB2D,EAAeD,EAAe,IAAM,IAAMA,EAAe,EAC/D,OAAIzD,EAAMwD,EAAME,EACR,CACNC,UAAW,MACXC,aAAcF,GAAgB1D,EAAMwD,IAAQE,GAEnCF,EAAMzD,EAAQ2D,EACjB,CACNC,UAAW,QACXC,aAAcF,GAAgBF,EAAMzD,IAAU2D,GAIzC,KAqBR,IAAMG,EAAiB,SAACtM,GAAqD,IAA/BF,EAA+B2E,UAAAC,OAAA,QAAAkD,IAAAnD,UAAA,GAAAA,UAAA,GAAlB,IACtD8H,EAAyB,KACzBC,EAA2B,KAC3BJ,EAA8B,KAC9BK,EAAuB,KA+B3B,MAAO,CACNC,QA9BD,SAAiBC,EAAuBC,GACvCR,EAAYO,EACZF,EAAQG,EAIT,SAAS1J,IACQ,OAAZqJ,IACHA,EAAUM,sBAAsB,SAACC,GACd,OAAdN,IAAsBA,EAAYM,GACtC,IAAMC,EAAWD,EAAYN,EAC7BA,EAAYM,EACZ,IAAIE,EAAgBD,EAAW,IAAQN,GApC3C,SAAwBzM,EAA+BF,EAAY0J,GAC9DxJ,IACCA,IAAYY,OACF,MAATd,EACFE,EAAwBiN,YAAczD,EAEtCxJ,EAAwBkN,WAAa1D,EAG1B,MAAT1J,EACHE,EAAQmN,SAAS3D,EAAO,GAExBxJ,EAAQmN,SAAS,EAAG3D,KA0BpB4D,CAAepN,EAASF,EADxBkN,EAA6B,UAAdZ,EAAyB,EAAIY,EAAgBA,GAE5DT,EAAU,KACVrJ,OAbFA,IA4BAN,KAVD,WACiB,OAAZ2J,IACHc,qBAAqBd,GACrBA,EAAU,MAEXC,EAAY,QASd,SAASc,EAAgBtN,GACxB,OAAO,WACN,OAAO4B,YAAe5B,EAASA,EAAQE,0BAkF1B,MAAAqN,EAAA,SAACC,GAAwD,IAA9BC,EAA8BhJ,UAAAC,OAAA,QAAAkD,IAAAnD,UAAA,GAAAA,UAAA,GAlNvD,KAmNViJ,EAAgBF,EAAWG,OAAO,SAACC,EAAyBxL,GACjE,IAAMyL,EAhFR,SAA6BzL,GAK5B,IAJA,IAAM0L,EAAwC,GAE1C5L,EAA8BE,EAAUpC,QAErCkC,GAAS,CACf,IAAM6L,EAAgBrN,YAAiBwB,GAEvC,GAAI6L,IAAkBxK,YAASrB,EAASpD,0BAAyB,CAEhE,IAAMkP,EAAgC,GACtC,OAAQD,GACP,KAAKhN,IAAWC,GACfgN,EAAe3M,EAAI,CAClB4M,SAAU3B,EAAepK,EAAS,MAEnC8L,EAAe1M,EAAI,CAClB2M,SAAU3B,EAAepK,EAAS,MAGnC,MACD,KAAKnB,IAAWM,EACf2M,EAAe3M,EAAI,CAClB4M,SAAU3B,EAAepK,EAAS,MAGnC,MACD,KAAKnB,IAAWO,EACf0M,EAAe1M,EAAI,CAClB2M,SAAU3B,EAAepK,EAAS,MAOrC4L,EAAkB/K,KAAK,CACtBiL,iBACAE,QAASZ,EAAgBpL,GACzBiM,gBAAiBjM,IAGnBA,EAAUA,EAAQH,cAEnB,OAAO+L,EAoCoBM,CAAoBhM,GAAW2B,OAAO,SAAAzB,GAC/D,OAAQsL,EAAIS,KAAK,SAAAC,GAAC,OAAIA,EAAEH,kBAAoB7L,EAAE6L,oBAE/C,SAAA1M,OAAA8M,EAAWX,GAAXW,EAAmBV,KACjB,IAGH,OAAO,SAAAW,GAAkF,IAA/EC,EAA+ED,EAA/EC,cACT,GADwFD,EAAhEE,MAEvBhB,EAAc7K,QAAQ,SAAAP,GACrBA,EAAE0L,eAAe3M,GAAKiB,EAAE0L,eAAe3M,EAAE4M,SAASrL,OAClDN,EAAE0L,eAAe1M,GAAKgB,EAAE0L,eAAe1M,EAAE2M,SAASrL,cAKpD,GAAI6L,EAAe,EAjDrB,SAAyBf,EAAmChD,GAC3DgD,EAAc7K,QAAQ,SAACoL,GAA+B,IAC7CD,EAA4BC,EAA5BD,eACF7N,GAAO+N,EADuBD,EAAZC,WAEpBF,EAAe3M,IAClB2M,EAAe3M,EAAEsN,aAAe3C,EAAgBtB,EAAU,IAAKvK,GAC/D8N,EAASW,WAAazO,GAGnB6N,EAAe1M,IAClB0M,EAAe1M,EAAEqN,aAAe3C,EAAgBtB,EAAU,IAAKvK,GAC/D8N,EAASW,WAAazO,KAuCtB0O,CAAgBnB,EAAee,EAAcK,eAE7CpB,EAAc7K,QAAQ,SAAAoL,GAAY,IAAAc,EAChBd,EAASD,eAAlB3M,EADyB0N,EACzB1N,EAAGC,EADsByN,EACtBzN,EACX,GAAID,EACH,GAAIA,EAAEsN,aAAc,KAAAK,EACgB3N,EAAEsN,aAA7BvC,EADW4C,EACX5C,UAAWC,EADA2C,EACA3C,YACnBhL,EAAE4M,SAASvB,QAAQN,EAAWC,EAAcoB,QAE5CpM,EAAE4M,SAASrL,OAIb,GAAItB,EACH,GAAIA,EAAEqN,aAAc,KAAAM,EACgB3N,EAAEqN,aAA7BvC,EADW6C,EACX7C,UAAWC,EADA4C,EACA5C,YACnB/K,EAAE2M,SAASvB,QAAQN,EAAWC,EAAcoB,QAE5CnM,EAAE2M,SAASrL,SAKd,IAAMsM,EAAuBxB,EAAc3J,OAAO,SAAAzB,GAAC,OAAIA,EAAEsM,aACzD,GAAIM,EAAqBxK,QAAUwK,EAAqBxK,OAAS,EAAG,CAEnE,IAAMyK,EA5DV,SAAkCzB,EAAmChD,GAGpE,IAFA,IAAIxI,EAAUiE,SAASiJ,iBAAiB1E,EAASrJ,EAAGqJ,EAASpJ,GAEtDY,GAAS,CACf,IAAMmN,EAAiB3B,EAAcW,KAAK,SAAA/L,GAAC,OAAIA,EAAE6L,kBAAoBjM,IACrE,GAAImN,EACH,OAAOA,EAGRnN,EAAUA,EAAQH,cAGnB,OAAO,KAgDwBuN,CAAyBJ,EAAsBT,EAAcK,eAErFK,GACHD,EAAqBrM,QAAQ,SAAAP,GACxBA,IAAM6M,IACT7M,EAAE0L,eAAe3M,GAAKiB,EAAE0L,eAAe3M,EAAE4M,SAASrL,OAClDN,EAAE0L,eAAe1M,GAAKgB,EAAE0L,eAAe1M,EAAE2M,SAASrL,oXCxQzD,IAAM2M,EAAuB,CAC5BzO,SAAY,SACZ0O,QAAW,SAGNC,EAAyB,CAC9BjP,OAAU,OACVgP,QAAW,aACXE,iBAAkB,OAObC,GAAGC,EAAAC,EAAA,OAAApO,OACHlD,kBAAmB,CACvBmM,SAAY,WACZoF,aAAc,OACdC,YAAa,SAJNH,EAAAC,EAAA,IAAApO,OAMHlD,iBANG,eAM2B,CAClCiR,QAAW,UAPJI,EAAAC,EAAA,IAAApO,OASHlD,iBATG,mBAAAkD,OAS6BhD,yBAbE,CACvC+Q,QAAW,iBAGHI,EAAAC,EAAA,IAAApO,OAUHlD,iBAVG,mBAAAkD,OAU6BxD,gBAAiBwR,GAV9CG,EAAAC,EAAA,IAAApO,OAWHlD,iBAXG,iBAAAkD,OAW2BxD,gBAAiBsR,GAX5CK,EAAAC,EAAA,IAAApO,OAYHxD,gBAAiB,CACrB+R,aAAc,eAbPJ,EAAAC,EAAA,IAAApO,OAeHxD,eAfG,eAeyBwR,GAfzBG,EAAAC,EAAA,IAAApO,OAgBHxD,eAhBG,aAgBuBsR,GAhBvBK,EAAAC,EAAA,IAAApO,OAiBHxD,eAjBG,aAiBuB,CAC9BgS,WAAc,mBAlBPL,EAAAC,EAAA,IAAApO,OAoBHnD,cAAe,CACnB0R,aAAc,eArBPJ,EAAAC,EAAA,IAAApO,OAyBHnD,aAzBG,aAyBqB,CAC5B2R,WAAc,oBA1BPL,EAAAC,EAAA,IAAApO,OA4BHnD,aA5BG,MA4Bc,CACrB4R,iBAAkB,SA7BXN,EAAAC,EAAA,IAAApO,OA+BH7C,sBA/BG,MA+BuB,CAC9BuR,eAAgB,OAChBC,mBAAoB,SAjCbR,EAAAC,EAAA,IAAApO,OAmCH5C,qBAAsB,CAC1BwR,wBAAyB,OACzBC,sBAAuB,OACvBC,qBAAsB,OACtBC,mBAAoB,OACpBC,kBAAmB,OACnBC,cAAe,SAzCRd,EAAAC,EAAA,IAAApO,OA2CHzC,6BAA8B,CAClC2R,KAAQ,MA5CDf,EAAAC,EAAA,IAAApO,OA8CHlD,iBA9CG,mBAAAkD,OA8C6BxC,+BAAgC,CACpEuB,OAAU,OACVM,SAAY,SACZ0O,QAAW,aACXE,iBAAkB,QAlDXE,EAAAC,EAAA,IAAApO,OAoDHlD,iBApDG,iBAAAkD,OAoD2BxC,+BAAgC,CAClE6B,SAAY,SACZ0O,QAAW,QACXlP,MAAS,SAvDFsP,EAAAC,EAAA,IAAApO,OAyDHvC,qCAAsC,CAC1CoB,MAAS,OACTE,OAAU,OACVgP,QAAW,OACXoB,kBAAmB,UACnBC,cAAe,YA9DRjB,EAAAC,EAAA,IAAApO,OAgEH1C,+BAAgC,CACpC+R,mBAAoB,2BACnBC,OAAU,mBAlEJlB,GAsET,SAASmB,EAAmBrB,GAC3B,OAAO5I,OAAOkK,KAAKtB,GAAKhC,OAAO,SAACuD,EAAapK,GAC5C,IAAMqK,EAAYxB,EAAI7I,GACtB,MAA2B,WAAvBtE,EAAQ2O,GACX,GAAA1P,OAAUyP,GAAVzP,OAAwBqF,EAAxB,KAAArF,OAAoCuP,EAAmBG,GAAvD,KAED,GAAA1P,OAAUyP,GAAVzP,OAAwBqF,EAAxB,KAAArF,OAAoC0P,EAApC,MACE,IAoBJ,SAASC,EAAqB9K,GAC7B,GAAIA,GAA8B,qBAAZ1F,OAAyB,CAC9C,IAAMyQ,EAAOzQ,OAAOuF,SAASkL,MAAQzQ,OAAOuF,SAASmL,qBAAqB,QAAQ,GAC5E3Q,EAAQC,OAAOuF,SAASoL,cAAc,SACtCC,EAAYR,EAAmB,CACpCS,SAAU,CACTnL,OAAM,GAAA7E,OAAK6E,EAAL,kBAYR,OATA3F,EAAM+Q,KAAO,WACT/Q,EAAMgR,WACThR,EAAMgR,WAAWC,QAAUJ,EAE3B7Q,EAAM8E,YAAY7E,OAAOuF,SAAS0L,eAAeL,IAGlDH,EAAK5L,YAAY9E,GAEVA,EAGR,OAAO,KC/HR,IAAMmR,EAAa,CAAC,YAAa,cAC3BC,EAAa,CAAC,YAAa,aAC3BC,EAAgB,CAAC,UAAW,YAE9BC,EAAwC,KACxCC,EAAkC,KAClCC,EAAuB,KACvB1D,EAA+B,KAC/BjB,EAA2B,GAC3B/F,GAAa,EACb2K,GAAc,EACdC,GAAuB,EACvBC,GAAa,EACbC,EAA+C,KAC/CC,EAAoF,KACpFC,EAAuC,KACvCC,EAA8C,KAE5CC,EAupBN,WACE,IAAIC,EAAiC,KACjCC,GAAY,EAkBhB,MAAO,CACL3P,MAAO,WACA2P,IACHA,GAAY,EApBlB,SAASC,IACPF,EAAkB/F,sBAAsB,WACtCoF,EAAwBpP,QAAQ,SAAAP,GAAC,OAAIA,EAAEyQ,OAAOlH,oBAC9C5G,WAAW,WACe,OAApB2N,GAA0BE,KAC7B,MAgBDA,KAGJlQ,KAfF,WAC0B,OAApBgQ,IACFvF,qBAAqBuF,GACrBA,EAAkB,MAEpBC,GAAY,IAxqBiBG,GAE3BrN,EAAWwE,MAEjB,SAAS8I,IACe,qBAAXrS,QAMXkR,EAAWjP,QAAQ,SAAAqQ,GACjBtS,OAAOuF,SAAShD,iBAAiB+P,EAAGC,EAAoB,CAAEC,SAAS,MA4BvE,SAASC,IACP,OAAI5E,GAAiBA,EAAc6E,YAC1B7E,EAAc6E,YAGnBpB,GACKA,EAAenQ,eAEfnB,OAAOuF,SAASoN,KAyL3B,IAAMC,EAA6B,WACjC,IAAIC,EACApP,EACA3B,EACA6B,EAAa,KACXmP,EAAgB,EAChBC,EAAiB,EAEvB,SAASC,EAAOC,GAAgC,IAAAC,EACGC,EAAgBF,GAAhDG,EAD6BF,EACtCG,QAA4BC,EADUJ,EACnBK,QAC3B,GAAK9P,GAKC9E,KAAK6U,IAAIX,EAAWQ,QAAUD,GAAYL,GAAkBpU,KAAK6U,IAAIX,EAAWU,QAAUD,GAAYP,IACxGU,SALF,GAAI9U,KAAK6U,IAAIX,EAAWQ,QAAUD,GAAYN,GAAiBnU,KAAK6U,IAAIX,EAAWU,QAAUD,GAAYR,EACvG,OAAOY,IASb,SAASC,IACPF,IAEF,SAASG,IACPH,IAmBF,SAASA,IACPvP,aAAaP,GACbwN,EAAWlP,QAAQ,SAAAqQ,GAAC,OAAItS,OAAOuF,SAASrD,oBAAoBoQ,EAAGU,IAAgB,CAC7ER,SAAS,IAEXpB,EAAcnP,QAAQ,SAAAqQ,GAAC,OAAItS,OAAOuF,SAASrD,oBAAoBoQ,EAAGqB,IAAO,CACvEnB,SAAS,IAEXxS,OAAOuF,SAASrD,oBAAoB,OAAQ0R,EAAY,CACtDpB,SAAS,IAIb,SAASkB,IACPxP,aAAaP,GACb8P,IACA3R,IAGF,OAAO,SAAU+R,EAAsCC,EAAgBC,GACrElB,EAAaM,EAAgBU,GAE7B/R,EAAMiS,GADNtQ,EAA0B,kBAAXqQ,EAAsBA,EAAS/O,EAAW,IAAM,KAnC7DpB,EAAQU,WAAWqP,EAAcjQ,IAGnC0N,EAAWlP,QAAQ,SAAAqQ,GAAC,OAAItS,OAAOuF,SAAShD,iBAAiB+P,EAAGU,IAAgB,CAC1ER,SAAS,IAEXpB,EAAcnP,QAAQ,SAAAqQ,GAAC,OAAItS,OAAOuF,SAAShD,iBAAiB+P,EAAGqB,IAAO,CACpEnB,SAAS,IAEXxS,OAAOuF,SAAShD,iBAAiB,OAAQqR,EAAY,CACnDpB,SAAS,KAxCoB,GAwEnC,SAASD,EAAYU,GACnB,IAAMX,EAAIa,EAAgBF,GAC1B,IAAKpM,SAA4BG,IAAbsL,EAAE0B,QAAqC,IAAb1B,EAAE0B,UAC9C1C,EAAiB/H,IAAgB+I,EAAE2B,OAAmB,IAAMC,iBACxC,CAClB,IAAM3L,EAAmBgB,IAAgB+H,EAAgB,IAAM4C,kBACzD1S,EAAYoL,EAAWzJ,OAAO,SAAAzB,GAAC,OAAIA,EAAEtC,UAAYmJ,IAAkB,GACnE4L,EAAqB3S,EAAU4S,aAAaD,mBAC5CE,EAAsB7S,EAAU4S,aAAaC,oBAE/CC,GAAY,EAShB,GARIH,IAAuB5K,IAAgB+I,EAAE2B,OAAmBE,KAC9DG,GAAY,GAGVD,GAAuB9K,IAAgB+I,EAAE2B,OAAmBI,KAC9DC,GAAY,GAGVA,EAAW,CACb9S,EAAU2Q,OAAOnJ,aACjBO,IAAevJ,OAAOuF,SAASoN,KAAMuB,uBACrC3K,IAAevJ,OAAOuF,SAASoN,KAAMuB,qBAQrClU,OAAOuF,SAAShD,iBAAiB,UANf,SAAZgS,IACJhL,IAAkBvJ,OAAOuF,SAASoN,KAAMuB,uBACxC3K,IAAkBvJ,OAAOuF,SAASoN,KAAMuB,qBACxClU,OAAOuF,SAASrD,oBAAoB,UAAWqS,KAM/CD,GACF1B,EAA0BN,EAAG9Q,EAAU4S,aAAaI,eAAiB,WACnEjL,MACAkL,GAAanC,EAAG/I,IAAuB0J,EAAMgB,SApUrD9C,EAAWlP,QAAQ,SAAAqQ,GACjBtS,OAAOuF,SAAShD,iBAAiB+P,EAAGoC,EAAoB,CAAElC,SAAS,MAWrEpB,EAAcnP,QAAQ,SAAAqQ,GACpBtS,OAAOuF,SAAShD,iBAAiB+P,EAAGiC,EAAW,CAAE/B,SAAS,SAoW9D,SAASkC,EAAYzB,GACnBA,EAAM0B,iBACN,IAAMrC,EAAIa,EAAgBF,GAC1B,GAAKpF,EAEE,CACL,IAAM+G,EAAmB/G,EAAcrM,UAAU4S,aACI,YAA/BQ,EAAiB3N,UA3C3C,SAAA4N,GAA2H,IAErHC,EACA5V,EACA6V,EACAtN,EALiC4L,EAAoFwB,EAApFxB,QAASE,EAA2EsB,EAA3EtB,QAAoCrM,EAAuCrD,UAAAC,OAAA,QAAAkD,IAAAnD,UAAA,GAAAA,UAAA,GAAZ,WACvGmR,EAAWnH,EAAcrM,UAAU2Q,OAAOjI,oCAM5B,aAAhBhD,GACF4N,EAAWvB,EACXrU,EAAO,IACP6V,EAAU,MACVtN,EAAOoG,EAAcpG,KAAK4B,eAE1ByL,EAAWzB,EACXnU,EAAO,IACP6V,EAAU,OACVtN,EAAOoG,EAAcpG,KAAK0B,aAG5B,IAAM8L,EAAgBD,EAASpN,MACzBsN,EAAcF,EAASnN,IAAMJ,EAC7B0N,EAAqBxW,KAAKC,IAAIqW,EAAetW,KAAKI,IAAImW,EAAcJ,EAAWvD,EAAU6D,cAAcL,KAE7GxD,EAAU8D,QAAQnW,GAAQiW,EAC1BtH,EAAc/D,SAAS5K,GAAQP,KAAKC,IAAIoW,EAASpN,MAAOjJ,KAAKI,IAAIiW,EAASnN,IAAMiN,EAAWvD,EAAU+D,YAAYpW,KACjH2O,EAAcK,cAAchP,GAAQP,KAAKC,IAAIoW,EAASpN,MAAOjJ,KAAKI,IAAIiW,EAASnN,IAAKiN,IAEhFjH,EAAc/D,SAAS5K,GAAS8V,EAASpN,MAASH,EAAO,IAC3DoG,EAAc/D,SAAS5K,GAAQ8V,EAASpN,MAAQ,GAG9CiG,EAAc/D,SAAS5K,GAAS8V,EAASnN,IAAOJ,EAAO,IACzDoG,EAAc/D,SAAS5K,GAAQ8V,EAASnN,IAAM,GAa5C0N,CAA4BjD,EAAGsC,EAAiB1N,aACvC2K,EACuB,MAA5BA,GACFN,EAAU8D,QAAQ3U,EAAI4R,EAAEiB,QAAUhC,EAAU6D,cAAcvW,IAC1DgP,EAAc/D,SAASpJ,EAAI4R,EAAEiB,QAAUhC,EAAU+D,YAAY5U,EAC7DmN,EAAcK,cAAcxN,EAAI4R,EAAEiB,SACG,MAA5B1B,IACTN,EAAU8D,QAAQ5U,EAAI6R,EAAEe,QAAU9B,EAAU6D,cAAc1W,KAC1DmP,EAAc/D,SAASrJ,EAAI6R,EAAEe,QAAU9B,EAAU+D,YAAY7U,EAC7DoN,EAAcK,cAAczN,EAAI6R,EAAEe,UAGpC9B,EAAU8D,QAAQ5U,EAAI6R,EAAEe,QAAU9B,EAAU6D,cAAc1W,KAC1D6S,EAAU8D,QAAQ3U,EAAI4R,EAAEiB,QAAUhC,EAAU6D,cAAcvW,IAC1DgP,EAAc/D,SAASrJ,EAAI6R,EAAEe,QAAU9B,EAAU+D,YAAY7U,EAC7DoN,EAAc/D,SAASpJ,EAAI4R,EAAEiB,QAAUhC,EAAU+D,YAAY5U,EAC7DmN,EAAcK,cAAczN,EAAI6R,EAAEe,QAClCxF,EAAcK,cAAcxN,EAAI4R,EAAEiB,SAGpCiC,MAKE9D,GAHGC,EAAW9D,KAOd4H,SAlCFhB,GAAanC,EAAG/I,IAAuB0J,EAAMgB,SAuCjD,IAAIwB,EAAiClM,IAAemM,EAAuB,IAAI,GAE/E,SAASA,IACHhE,IACFA,GAAa,EACbiE,EAAoB9H,EAAewD,IAIvC,SAASkD,IDtUT,IAAqBqB,ECzFnBzE,EAAWlP,QAAQ,SAAAqQ,GACjBtS,OAAOuF,SAASrD,oBAAoBoQ,EAAGoC,EAAoB,CAAElC,SAAS,MAWxEpB,EAAcnP,QAAQ,SAAAqQ,GACpBtS,OAAOuF,SAASrD,oBAAoBoQ,EAAGiC,EAAkB,CAAE/B,SAAS,MAqZtEZ,EAAa,CAAE9D,OAAO,IAElBgE,KD3Ue8D,EC4UL9D,ID3UyB,qBAAZ9R,SACdA,OAAOuF,SAASkL,MAAQzQ,OAAOuF,SAASmL,qBAAqB,QAAQ,IAC7EjM,YAAYmR,GC0Uf9D,EAAqB,MAEnBjE,IACFkE,EAAyB/P,OACzB0T,IACAjE,GAAuB,EA/T3B,SAA6BoE,GAC3B,SAASC,IACPvM,IAAkBgI,EAAUwE,MAAO,YACnCxE,EAAWwE,MAAMhW,MAAMiW,mBAAqB,KAC5CvD,IAAiBhO,YAAY8M,EAAUwE,OACvCF,IAGF,SAASI,EAATC,EAAwDC,EAAkBC,GAA+B,IAAvEvX,EAAuEqX,EAAvErX,IAAKH,EAAkEwX,EAAlExX,KACrC6K,IAAegI,EAAUwE,MAAO,YAC5BK,GACF7M,IAAegI,EAAUwE,MAAMM,kBAAmBD,GAGpD7E,EAAU8D,QAAQ5U,EAAI/B,EACtB6S,EAAU8D,QAAQ3U,EAAI7B,EACtB2W,GAAeW,GACf9R,WAAW,WACTyR,KACCK,EAAW,IAShB,SAASG,EAAmBH,EAAkBrU,GAC5CyH,IAAegI,EAAUwE,MAAO,YAChCP,GAAeW,EAAU,IAAK,GAI9B9R,WAAW,WACTvC,KACCqU,EAAW,IAGhB,GAAItI,EAAc0I,cAAe,CAC/B,IAAM/U,EAAYoL,EAAWzJ,OAAO,SAAAzB,GAAC,OAAIA,EAAEtC,UAAYyO,EAAc0I,gBAAe,KAlB3D9P,EAmBHjF,EAAU4S,cAlBjB7M,mBACXd,EAAQc,kBAAkBsG,EAAcrM,UAAU4S,aAAcvG,EAAc2I,SAmBhFP,EADmBzU,EAAUiV,gBAEhBC,eAAenX,KAC1BZ,KAAKC,IAAI,IAAK4C,EAAU4S,aAAahN,kBAAqB,GAC1D5F,EAAU4S,aAAagC,WAGzBN,QAEG,CACL,IAAMtU,EAAYoL,EAAWzJ,OAAO,SAAAzB,GAAC,OAAIA,IAAMmM,EAAcrM,YAAW,GACxE,GAAIA,EAAW,KAAAmV,EAC0BnV,EAAU4S,aAAzCnN,EADK0P,EACL1P,UAAW2P,EADND,EACMC,gBACnB,GAAmB,SAAd3P,GAAsC,YAAdA,IAA6BuK,GAAgBoF,IAAoBpV,EAAUiV,gBAsCtGH,EAAmB9U,EAAU4S,aAAahN,kBAAoB0O,OAtCyD,CACvH,IAAMe,EAAarV,EAAU2Q,OAAOpI,yBAIpC,IAAKR,IAAgBsN,EAAWrN,cAAgBD,IAAgBsN,EAAWpN,iBACzEwM,EACE,CACEpX,IAAKgY,EAAWpN,gBAAgB5K,IAChCH,KAAMmY,EAAWpN,gBAAgB/K,MAEnC8C,EAAU4S,aAAahN,kBACvB5F,EAAU4S,aAAagC,eAEpB,KAAAU,EACiCtV,EAAUiV,gBAAxCM,EADHD,EACGC,aAAcC,EADjBF,EACiBE,YAChB7E,EAAS3Q,EAAU2Q,OAEzB3Q,EAAUyV,uBAAuB,CAC/BC,WAAY,CACVH,eACAI,WAAYJ,EACZC,cACA3L,SAAKrE,EACL0P,oBAAgB1P,KAGpB,IAAMoQ,EACJL,EAAgB,EACZ5E,EAAOhI,YAAY3I,EAAU6V,WAAWN,EAAgB,IAAIlP,IAC5DsK,EAAOlI,yBAAyBrC,MACtCqO,EACE9D,EAAOtH,yBAAyBuM,GAChC5V,EAAU4S,aAAahN,kBACvB5F,EAAU4S,aAAagC,kBAQ7BE,EAAmBxP,EAAeM,kBAAoB0O,GA3E1D,IAA2BrP,EA0SzB6Q,CAAoB,WAClBzQ,GAAa,EACb0Q,IAAmB,GAInB,IAHA,IAAM3K,EAAayE,GAA2B,GAE1CmG,EAAsB5K,EAAW6K,aACNzQ,IAAxBwQ,GACLA,EAAoBE,WAAW7J,GAC/B2J,EAAsB5K,EAAW6K,QAGnCpG,EAA0B,KAC1BC,EAAiB,KACjBC,EAAY,KACZ1D,EAAgB,KAChBgE,EAA0B,KAC1BF,EAAa,KACbF,GAAuB,KAK7B,SAAS0B,EAAgBb,GACvB,OAAOA,EAAEqF,QAAUrF,EAAEqF,QAAQ,GAAKrF,EAGpC,SAASqD,EAAoB9H,EAA8BwD,GACzD,IAAIuG,GAAsB,EAC1BvG,EAAwBpP,QAAQ,SAACP,GAC/B,IAAMwV,EAAaxV,EAAEiQ,WAAW9D,GAChC+J,IAAwBV,EAAWU,sBAAuB,EAC1DV,EAAWU,qBAAsB,IAG/BA,IACFA,GAAsB,EACtB3L,sBAAsB,WACpBW,EAAW3K,QAAQ,SAAAP,GACjBA,EAAEyQ,OAAOlH,kBACTvJ,EAAEmW,oBAMV,SAASC,EAAYzG,GACnB,IAAI0G,EAAmB1G,EACnB2G,EAAgC,KACpC,OAAO,SAAUnK,GACf,QAAuB,OAAnBmK,IAA2BnR,GAAe4K,KAC5CuG,EAAiB/L,sBAAsB,WACjCpF,IAAe4K,IACjBkE,EAAoB9H,EAAekK,GACnCnG,EAAa,CAAE/D,mBAEjBmK,EAAiB,QAEZ,IAMb,SAASC,EAAiBzW,EAAuB6P,GAC/C,OAAI7P,EAAU4S,aAAa/M,kBAClB6Q,EAAa7G,EAAyB7P,EAAU2W,qBAEhD,SAACC,GAAD,OAA+D,MAI1E,SAASb,GAAmBc,GAC1BzL,EAAW3K,QAAQ,SAAAP,GACjB,IAAM8B,EAAK6U,EAAU3W,EAAE0S,aAAakE,YAAc5W,EAAE0S,aAAamE,UACjE,GAAI/U,EAAI,CACN,IAAMiD,EAAe,CACnB+R,SAAU9W,IAAMmM,EAAcrM,UAC9BgV,QAAS3I,EAAc2I,SAErB9U,EAAE+W,eAAe5K,EAAcrM,UAAWqM,EAAc2I,SAC1D/P,EAAQiS,gBAAiB,EAEzBjS,EAAQiS,gBAAiB,EAE3BlV,EAAGiD,MAKT,SAASgO,GAAa3K,EAAyBpE,GAC7C,GAAuB,OAAnB4L,EAAyB,CAC3BzK,GAAa,EACb,IAAMrF,EAAaoL,EAAWzJ,OAAO,SAAAzB,GAAC,OAAI4P,EAAgBnQ,gBAAkBO,EAAEtC,UAAS,GACvFoC,EAAUmX,gBACV9G,EAA0BrQ,EAAU4S,aAAawE,SAAWpX,EAAU4S,aAAawE,SAAUC,cAAwB,KAErHhL,EAxbJ,SAA0BiL,GACxB,IAAMtX,EAAYoL,EAAWzJ,OAAO,SAAAzB,GAAC,OAAIoX,EAAiB3X,gBAAkBO,EAAEtC,UAAS,GACjF2Z,EAAiBvX,EAAU6V,WAAWrU,QAAQ8V,GAC9CrG,EAAiBjR,EAAU4S,aAAa3B,eACxCuG,EAAgBF,EAAiBxZ,wBACvC,MAAO,CACLkC,YACApC,QAAS0Z,EACTrR,KAAM,CACJ4B,aAAc2P,EAAcha,OAASga,EAAcna,IACnDsK,YAAa6P,EAAcla,MAAQka,EAActa,MAEnDua,aAAcF,EACdvC,QAAShV,EAAU4S,aAAajN,gBAAkB3F,EAAU4S,aAAajN,gBAAiB4R,QAAkB/R,EAC5GuP,cAAe,KACfzM,SAAU,CAAErJ,EAAG,EAAGC,EAAG,GACrBqG,UAAWvF,EAAU4S,aAAarN,UAClC2L,YAAaD,EAAiBA,IAAmB,KACjDyG,iBAAkB,KAClBhL,cAAe,KACf7M,mBAAoB,MAoaJ8X,CAAiB7H,GACjCC,EAhfJ,SAAyB6H,EAAzBxL,EAA0EpM,EAAuBkE,GAA2B,IAApEjF,EAAoEmN,EAApEnN,EAAGC,EAAiEkN,EAAjElN,EACnD2Y,EAAcD,EAAe9Z,wBAC3BZ,EAA6B2a,EAA7B3a,KAAMG,EAAuBwa,EAAvBxa,IAAKC,EAAkBua,EAAlBva,MAAOE,EAAWqa,EAAXra,OAEpBsa,EAAqB/P,IAAsB/H,EAAU2Q,OAAOpI,yBAAyBP,YAAa6P,GAElGE,EAAOD,EAAmB5a,MAAQ4a,EAAmBxa,MAAQwa,EAAmB5a,MAAQ,EACxF8a,EAAOF,EAAmBza,KAAOya,EAAmBta,OAASsa,EAAmBza,KAAO,EACvFkX,EAAqBqD,EAAeK,WAAU,GAoCpD,OAnCA1D,EAAMhW,MAAM2Z,OAAS,OACrB3D,EAAMhW,MAAM4Z,UAAY,aACxB5D,EAAMhW,MAAM+J,SAAW,QACvBiM,EAAMhW,MAAMlB,IAAM,MAClBkX,EAAMhW,MAAMrB,KAAO,MACnBqX,EAAMhW,MAAM6Z,UAAY,KACxB7D,EAAMhW,MAAMuK,eAAe,aAEvB9I,EAAUqY,6BACZ9D,EAAMhW,MAAM6Z,UAAZ,eAAA/Y,OAAuCnC,EAAvC,QAAAmC,OAAkDhC,EAAlD,WAEAkX,EAAMhW,MAAMlB,IAAZ,GAAAgC,OAAqBhC,EAArB,MACAkX,EAAMhW,MAAMrB,KAAZ,GAAAmC,OAAsBnC,EAAtB,OAGFqX,EAAMhW,MAAML,MAASZ,EAAQJ,EAAQ,KACrCqX,EAAMhW,MAAMH,OAAUZ,EAASH,EAAO,KACtCkX,EAAMhW,MAAMG,SAAW,UACvB6V,EAAMhW,MAAMsP,WAAa,KACzB0G,EAAMhW,MAAMuK,eAAe,cAC3ByL,EAAMhW,MAAM+Z,cAAgB,OAC5B/D,EAAMhW,MAAMga,WAAa,OAErBvY,EAAU4S,aAAa4F,UACzB3V,WAAW,WACTkF,IAAewM,EAAMM,kBAAkC7U,EAAU4S,aAAa4F,WAC9E,IAAMC,EAAaja,OAAOC,iBAAiB8V,EAAMM,mBAAoB3Q,OACrEoM,EAAqBtB,EAAqByJ,KAG5CnI,EAAqBtB,EAAqB9K,GAE5C6D,IAAewM,EAAOvU,EAAU4S,aAAalN,aAAe,YAC5DqC,IAAewM,EAAO7B,cAEf,CACL6B,MAAOA,EACPT,YAAa,CAAE7U,EAAG8Y,EAAO9Y,EAAGC,EAAG8Y,EAAO9Y,GACtC0U,cAAe,CAAE1W,KAAMA,EAAO+B,EAAG5B,IAAKA,EAAM6B,GAC5C2U,QAAS,CACP5U,EAAG/B,EACHgC,EAAG7B,IA8bOqb,CACV5I,EACA,CAAE7Q,EAAGqJ,EAASuJ,QAAS3S,EAAGoJ,EAASyJ,SACnC1F,EAAcrM,UACdkE,GAEFmI,EAAc/D,SAAW,CACvBrJ,EAAGqJ,EAASuJ,QAAU9B,EAAU+D,YAAY7U,EAC5CC,EAAGoJ,EAASyJ,QAAUhC,EAAU+D,YAAY5U,GAE9CmN,EAAcK,cAAgB,CAC5BzN,EAAGqJ,EAASuJ,QACZ3S,EAAGoJ,EAASyJ,SAGdlC,EAA0BzE,EAAWzJ,OAAO,SAAAzB,GAAC,OAAIA,EAAE+W,eAAejX,EAAWqM,EAAc2I,WAC3F3I,EAAcxM,mBAAqBgQ,EACnCM,EAAamG,EAAYzG,GACrBO,GACFA,EAAa,CAAE9D,OAAO,EAAMD,mBAAe7G,IAE7C4K,EAAeqG,EAAiBzW,EAAW6P,GAC3CA,EAAwBpP,QAAQ,SAAAP,GAAC,OAAIA,EAAEyY,YAAYzY,EAAG2P,KACtDkG,IAAmB,GACnB5F,EAAW9D,GACX4E,IAAiB5N,YAAY0M,EAAUwE,OAEvChE,EAAyBzP,SAI7B,IAAI8X,GAAqC,KACzC,SAAS5E,KAAkE,IAAnD6E,EAAmDxW,UAAAC,OAAA,QAAAkD,IAAAnD,UAAA,GAAAA,UAAA,GAA/B,EAAGqE,EAA4BrE,UAAAC,OAAA,QAAAkD,IAAAnD,UAAA,GAAAA,UAAA,GAApB,EAAGyW,EAAiBzW,UAAAC,OAAA,QAAAkD,IAAAnD,UAAA,IAAAA,UAAA,GAAA0W,EACpChJ,EAA7BwE,EADiEwE,EACjExE,MADiEyE,EAAAD,EAC1DlF,QAAW5U,EAD+C+Z,EAC/C/Z,EAAGC,EAD4C8Z,EAC5C9Z,EACvB+Z,GAAe5M,EAAcrM,WAAYqM,EAAcrM,UAAUqY,6BAEnEa,EAAkBD,EAAY,eAAA5Z,OAAkBJ,EAAlB,OAAAI,OAAyBH,EAAzB,UAAqC,KAMvE,GAJc,IAAVwH,IACFwS,EAAkBA,EAAe,GAAA7Z,OAAM6Z,EAAN,WAAA7Z,OAA+BqH,EAA/B,cAAArH,OAAmDqH,EAAnD,MAG/BmS,EAAoB,EAatB,OAZA9I,EAAUwE,MAAMhW,MAAMiW,mBAAqBqE,EAAoB,UAC/DpO,sBAAsB,WACpByO,IAAoB3E,EAAMhW,MAAM6Z,UAAYc,GACvCD,IACH1E,EAAMhW,MAAMrB,KAAO+B,EAAI,KACvBsV,EAAMhW,MAAMlB,IAAM6B,EAAI,MAExB0Z,GAAsB,KAClBE,IACFvE,EAAMhW,MAAM4a,QAAU,OAMA,OAAxBP,KACFA,GAAsBnO,sBAAsB,WAC1CyO,IAAoB3E,EAAMhW,MAAM6Z,UAAYc,GACvCD,IACH1E,EAAMhW,MAAMrB,KAAO+B,EAAI,KACvBsV,EAAMhW,MAAMlB,IAAM6B,EAAI,MAExB0Z,GAAsB,KAClBE,IACFvE,EAAMhW,MAAM4a,QAAU,QA+E9B,SAAS/T,KACP,GAAIC,IAAe2K,IAAgBC,EAAsB,CACvDD,GAAc,EACdE,GAAa,EAEb,IAAMkJ,EAA0CzU,OAAO0U,OAAO,GAAIhN,EAAe,CAC/E0I,cAAe,KACfzM,SAAU,CAAErJ,EAAGqa,OAAOC,iBAAkBra,EAAGoa,OAAOC,kBAClD7M,cAAe,CAAEzN,EAAGqa,OAAOC,iBAAkBra,EAAGoa,OAAOC,oBAGzD1J,EAAwBpP,QAAQ,SAAAT,GAC9BA,EAAUmQ,WAAWiJ,KAGvB/M,EAAc0I,cAAgB,KAC9B1I,EAAcmN,YAAa,EAE3BzG,IACA/C,GAAc,GAoBI,qBAAXxR,QDtpBX,WACC,GAAwB,qBAAZA,OAAyB,CACpC,IAAMyQ,EAAOzQ,OAAOuF,SAASkL,MAAQzQ,OAAOuF,SAASmL,qBAAqB,QAAQ,GAC5E3Q,EAAQC,OAAOuF,SAASoL,cAAc,SAC5C5Q,EAAMkb,GAAK,+BACX,IAAMrK,EAAYR,EAAmBrB,GACrChP,EAAM+Q,KAAO,WACT/Q,EAAMgR,WACThR,EAAMgR,WAAWC,QAAUJ,EAE3B7Q,EAAM8E,YAAY7E,OAAOuF,SAAS0L,eAAeL,IAGlDH,EAAK5L,YAAY9E,IC0oBjBmb,GAGaC,QAnBb9I,IACO,CACL+I,SAAU,SAAU5Z,IAnGxB,SAA2BA,GACzBoL,EAAWzK,KAAKX,GAEZqF,GAAcgH,GACZrM,EAAUiX,eAAe5K,EAAcrM,UAAWqM,EAAc2I,WAClEnF,EAAwBlP,KAAKX,GAC7BA,EAAU2Y,YAAY3Y,EAAW6P,GAE7BO,GACFA,EAAa,CAAE9D,OAAO,EAAMD,mBAAe7G,IAE7C4K,EAAeqG,EAAiBzW,EAAW6P,GAC3CM,EAAamG,EAAYzG,GACzB7P,EAAUmQ,WAAW9D,IAuFrBwN,CAAkB7Z,IAEpB8Z,WAAY,SAAU9Z,IApF1B,SAA6BA,GAG3B,GAFAoL,EAAW2O,OAAO3O,EAAW5J,QAAQxB,GAAY,GAE7CqF,GAAcgH,EAAe,CAC3BA,EAAcrM,YAAcA,GAC9BA,EAAUga,oBAGR3N,EAAc0I,gBAAkB/U,EAAUpC,UAC5CyO,EAAc0I,cAAgB,MAGhC,IAAMkF,EAAuBpK,EAAwBrO,QAAQxB,GACzDia,GAAwB,IAC1BpK,EAAwBkK,OAAOE,EAAsB,GACjD7J,GACFA,EAAa,CAAE9D,OAAO,EAAMD,mBAAe7G,IAE7C4K,EAAeqG,EAAiBzW,EAAW6P,GAC3CM,EAAamG,EAAYzG,KAkEzBqK,CAAoBla,IAEtBqF,WAAY,WACV,OAAOA,GAETD,gBC3uBJ,SAAS+U,GAAavc,EAAsBwc,GAAoE,IAAtDxU,EAAsDvD,UAAAC,OAAA,QAAAkD,IAAAnD,UAAA,GAAAA,UAAA,GAAlCiD,EAAeM,kBACvFwU,GACF3Y,YAAS7D,EAAS7B,kBAClB6B,EAAQW,MAAMiW,mBAAqB5O,EAAoB,OAEvD9D,YAAYlE,EAAS7B,kBACrB6B,EAAQW,MAAMuK,eAAe,wBAIjC,SAASmO,GAAT7K,GAAiE,IAAvCxO,EAAuCwO,EAAvCxO,QAASgV,EAA8BxG,EAA9BwG,WACjC,OAAO,SAAUyH,EAA6BrF,GAC5C,IAAM/P,EAAU2N,IAEhB,GAAI3N,EAAQa,iBACV,OAAOb,EAAQa,iBAAiBuU,EAAgBzH,aAAcoC,GAEhE,IAAMsF,EAAgBD,EAAgBzH,aACtC,MAA0B,SAAtB3N,EAAQQ,YAEUzE,YAAUpD,EAAS,IAAM/B,kBACzBwe,EAAgBzc,UAIlCyc,EAAgBzc,UAAYA,MAC5B0c,EAAc/U,WAAa+U,EAAc/U,YAAcN,EAAQM,cAkBvE,SAASgV,GAAa3c,GACpB,IAAMiY,EAAyB,GAa/B,OAZArT,MAAMgY,UAAU/Z,QAAQkC,KAAK/E,EAAQsF,SAAU,SAACE,GAC9C,GAAIA,EAAMqX,WAAaC,KAAKC,aAAc,CACxC,IAAIC,EAAUxX,EACTjC,YAASiC,EAAOvH,kBACnB+e,EAlBR,SAAmBxX,GACjB,GAAIyX,GAAUC,UAAW,CACvB,IAAMC,EAAMvc,OAAOuF,SAASoL,cAAc,OAI1C,OAHA4L,EAAI1Z,UAAJ,GAAAhC,OAAmBxD,gBACnBuH,EAAMzD,cAAe2D,aAAayX,EAAK3X,GACvC2X,EAAI1X,YAAYD,GACT2X,EAGT,OAAO3X,EASS0X,CAAU1X,IAEtBwX,EAAQ5e,oBAAoB,EAC5B6Z,EAAWlV,KAAKia,QAEhBhd,EAAQqF,YAAYG,KAGjByS,EAgBT,SAASmF,GAATtG,GAAmE,IAArC/D,EAAqC+D,EAArC/D,OA0C5B,OAAO,SAACkF,EAA2BhM,GAAmD,IAAtCoR,EAAsC5Y,UAAAC,OAAA,QAAAkD,IAAAnD,UAAA,IAAAA,UAAA,GACpF,OA1CW,SAAP4J,EACJ4J,EACAhM,EACAqR,EACAC,GAEkB,IADlBF,EACkB5Y,UAAAC,OAAA,QAAAkD,IAAAnD,UAAA,IAAAA,UAAA,GAClB,GAAI8Y,EAAWD,EACb,OAAOA,EAGT,GAAIA,IAAeC,EAAU,KAAAC,EACNzK,EAAOhI,YAAYkN,EAAWqF,IAA7C9U,EADqBgV,EACrBhV,MAAOC,EADc+U,EACd/U,IAIX,OAAI4U,EACKpR,GAAOxD,EAAMD,GAAS,EAAI8U,EAAaA,EAAa,EAEpDA,EAMX,IAAMG,EAAcle,KAAKme,OAAOH,EAAWD,GAAc,GADpDK,EAEkB5K,EAAOhI,YAAYkN,EAAWwF,IAA7CjV,EAFHmV,EAEGnV,MAAOC,EAFVkV,EAEUlV,IACf,OAAIwD,EAAMzD,EACD6F,EAAK4J,EAAYhM,EAAKqR,EAAYG,EAAc,EAAGJ,GACjDpR,EAAMxD,EACR4F,EAAK4J,EAAYhM,EAAKwR,EAAc,EAAGF,EAAUF,GAEpDA,EACKpR,GAAOxD,EAAMD,GAAS,EAAIiV,EAAcA,EAAc,EAEtDA,EAONpP,CAAK4J,EAAYhM,EAAK,EAAGgM,EAAWvT,OAAS,EAAG2Y,IA6B3D,SAAS/E,GAAT7C,GAAiF,IAA3DzV,EAA2DyV,EAA3DzV,QAASiY,EAAkDxC,EAAlDwC,WAAYlF,EAAsC0C,EAAtC1C,OAAQiC,EAA8BS,EAA9BT,WAC3C4I,EA1BR,SAAAlG,GAA0E,IAA/C1X,EAA+C0X,EAA/C1X,QAASiY,EAAsCP,EAAtCO,WAAYlF,EAA0B2E,EAA1B3E,OAC9C,OAAO,WACLkF,EAAWpV,QAAQ,SAACP,GAClBia,GAAaja,GAAG,GAChByQ,EAAO9H,eAAe3I,EAAG,GACzByQ,EAAO3H,cAAc9I,GAAG,KAGtBtC,EAAQtB,8BACVsB,EAAQtB,4BAA0Bmf,WAAWxY,YAAYrF,EAAQtB,6BACjEsB,EAAQtB,4BAA4B,OAgBhBof,CAAgB,CAAE9d,UAASiY,aAAYlF,SAAQiC,eACjE+I,GAAed,GAAUc,aAAeC,kBAAgB,CAAEhe,UAASiY,aAAYlF,SAAQiC,eAC7F,OAAO,SAAUvG,EAAVwP,GAA+G,IAArElG,EAAqEkG,EAArElG,WAAYJ,EAAyDsG,EAAzDtG,aAA4BuG,EAA6BzZ,UAAAC,OAAA,QAAAkD,IAAAnD,UAAA,IAAAA,UAAA,GAGpH,GAFAmZ,KAEKnP,EAAcmN,aACbnN,EAAc0I,eAAiBnC,IAAawC,iBAAmB0G,GAAY,CAC7E,IAEMC,EAAoB,CACxBxG,eACAI,WAHe,OAAfA,EAAwC,OAAjBJ,GAAyBA,EAAeI,EAAaA,EAAa,EAAIA,EAAc,KAI3GX,QAAS3I,EAAc2I,SAGzB2G,EAAYI,EAAmBnJ,IAAaoJ,UAoBpD,SAASC,GAATC,GAAiE,IAAvCte,EAAuCse,EAAvCte,QAASgV,EAA8BsJ,EAA9BtJ,WAC7BuJ,EAAkC,KACtC,OAAO,SAAAC,GAAiC,IAA9B/P,EAA8B+P,EAA9B/P,cACJkJ,EAAe4G,EAKnB,OAJwB,MAApBA,GAA4B9P,EAAcrM,UAAUpC,UAAYA,GAAsC,SAA3BgV,IAAanN,YAC1F8P,EAAe4G,EAAmB9P,EAAcoL,cAG3C,CAAElC,iBAIb,SAAS8G,GAATC,GAAyE,IAAtCzG,EAAsCyG,EAAtCzG,WAAYlF,EAA0B2L,EAA1B3L,OAC7C,OAAO,SAAA4L,GAA8B,IAA3B7G,EAA2B6G,EAA3B7G,WACwB,OAA5BA,EAAWH,cACb5E,EAAO3H,cAAc6M,EAAWH,EAAWH,eAAe,IAKhE,SAAS7L,GAAT8S,GAA0D,IAAnC5e,EAAmC4e,EAAnC5e,QAAS+S,EAA0B6L,EAA1B7L,OAC9B,OAAO,SAAA8L,GAAiC,IAA9BpQ,EAA8BoQ,EAA9BpQ,cACJqQ,EAAa3Y,SAASiJ,iBAAiBX,EAAc/D,SAASrJ,EAAGoN,EAAc/D,SAASpJ,GAO5F,GAAIwd,EAAY,CACd,IAAM1c,EAAwBJ,YAAkC8c,EAAYrQ,EAAcxM,oBAC1F,GAAIG,GAAaA,EAAUpC,UAAYA,EACrC,MAAO,CACLiM,IAAK8G,EAAOjH,YAAY2C,EAAc/D,WAK5C,MAAO,CACLuB,IAAK,OAKX,SAAS8S,GAATC,GAAoD,IAA1BjM,EAA0BiM,EAA1BjM,OACpB6E,EAA6B,KACjC,OAAO,SAAAqH,GAA6C,IAA1CxQ,EAA0CwQ,EAA1CxQ,cACR,OAAuB,OAD2BwQ,EAA3BnH,WACR7L,IACL2L,EAAc,KAIjB,CAAEA,YAFPA,EAAcA,GAAe7E,EAAOzI,QAAQmE,EAAcpG,QAMhE,SAAS6W,GAATC,GAA4D,IAA3Bnf,EAA2Bmf,EAA3Bnf,QAC/B,OAAO,SAAAof,GAA6C,IAA1C3Q,EAA0C2Q,EAA1C3Q,cAAeqJ,EAA2BsH,EAA3BtH,YAvG3B,SAA4BrJ,EAA8BzO,GAAkC,IAAZiH,IAAYxC,UAAAC,OAAA,QAAAkD,IAAAnD,UAAA,KAAAA,UAAA,GACtFzE,GAAWiH,EACbwH,EAAc0I,cAAgBnX,EAE1ByO,EAAc0I,gBAAkBnX,IAClCyO,EAAc0I,cAAgB,MAmGhCkI,CAAmB5Q,EAAezO,IAAW8X,EAAW7L,MA2B5D,SAASqT,KACP,OAAO,SAAAC,GACL,OAAe,OAD6BA,EAApCzH,WAAc7L,IACA,CAAE8L,WAAY,GAAM,CAAEA,WAAY,OAI5D,SAASyH,GAATC,GAAkE,IAA1B1M,EAA0B0M,EAA1B1M,OAClC2M,EAAgC,KACpC,OAAO,SAAAC,GAA8C,IAA7B5H,EAA6B4H,EAA3C7H,WAAcC,WACtB,GAAIA,IAAe2H,EAAgB,CACjCA,EAAiB3H,EADgB,IAAA6H,EAEV7M,EAAOlI,yBAAtBrC,EAFyBoX,EAEzBpX,MAFyBoX,EAElBnX,IACf,MAAO,CACL6O,eAAgB,CACdnX,KAAM4S,EAAOtH,yBAAyBjD,KAK5C,OAAO,MAIX,SAASqX,GAATC,GAA8E,IAA/C/M,EAA+C+M,EAA/C/M,OAAQ/S,EAAuC8f,EAAvC9f,QAASgV,EAA8B8K,EAA9B9K,WAC1C0K,EAAgC,KACpC,OAAO,SAAAK,GAAqG,IAAAC,EAAAD,EAAlGjI,WAAcF,EAAoFoI,EAApFpI,YAAaN,EAAuE0I,EAAvE1I,eAAgBS,EAAuDiI,EAAvDjI,WAAYkI,EAA2CD,EAA3CC,yBACzD5Y,EAAU2N,IAChB,GAAI3N,EAAQ6Y,gBAAiB,KAAAC,EAC4D,mBAA5B9Y,EAAQ6Y,gBAAgC,GAAsC7Y,EAAQ6Y,gBAAzIlY,EADmBmY,EACnBnY,kBAAmBvE,EADA0c,EACA1c,UAAW2c,EADXD,EACWC,UACtC,GAAmB,OAAfrI,EAAqB,CACvB,IAAKkI,EAA0B,CAC7B,IAAMI,EAAela,SAASoL,cAAc,OACtCZ,EAAOxK,SAASoL,cAAc,OACpCZ,EAAKlN,UAAYvE,oCACjBmhB,EAAa5c,UAAb,GAAAhC,OAA4BzC,4BAA5B,KAAAyC,OAAyDgC,GAAa1E,gCACtEkhB,EAA2B9Z,SAASoL,cAAc,QACzB9N,UAAzB,GAAAhC,OAAwCxC,+BACxCghB,EAAyBtf,MAAM+J,SAAW,gBAEhB9C,IAAtBI,IACFiY,EAAyBtf,MAAMsP,WAA/B,OAAAxO,OAAmDuG,EAAnD,YAGFiY,EAAyBxa,YAAYkL,GACrCA,EAAKlL,YAAY4a,GACjBtN,EAAOhK,QAAQkX,EAAyBtf,MAAOiX,EAAc,MAE7DqI,EAAyBtf,MAAM+Z,cAAgB,OAE3C0F,EACFpgB,EAAQyF,YAAYwa,GAEpBjgB,EAAQ0F,aAAaua,EAA0BjgB,EAAQiX,mBAS3D,OALIyI,IAAmB3H,GAAcT,EAAegJ,UACjDvN,EAAOhH,SAASkU,EAAyBtf,MAAQ2W,EAAegJ,SAAS9X,MAASuK,EAAOlI,yBAAyBrC,MAAQ,MAE7HkX,EAAiB3H,EAEV,CACLkI,4BAQF,OALIA,GAA+C,OAAnBP,GAC9B1f,EAAQqF,YAAY4a,GAEtBP,EAAiB,KAEV,CACLO,8BAA0BrY,GAKhC,OAAO,MAIX,SAAS2Y,GAAiC5b,GACxC,IAAM6b,EAAqBC,GAAkB9b,GAC7C,OAAO,SAAA+b,GAA6C,IAA1CjS,EAA0CiS,EAA1CjS,cAAeqJ,EAA2B4I,EAA3B5I,WACvB,OAAIrJ,EAAcqL,iBACT0G,EAAmB,CAAE/R,gBAAeqJ,eAEtC,MAIX,SAAS6I,GAAkBhc,GACzB,IAAMic,EAlHR,SAAAC,GAAuE,IAAtC5I,EAAsC4I,EAAtC5I,WACzB6I,EAAgB1D,GAAmB,CAAErK,OAD0B8N,EAA1B9N,SAE3C,OAAO,SAAAgO,GAAyE,IAAAC,EAAAD,EAAtEjJ,WAAcR,EAAwD0J,EAAxD1J,eAAgBrL,EAAwC+U,EAAxC/U,IACtC,IAAKqL,EAAgB,CACnB,IAAMlS,EAAQ0b,EAAc7I,EAAYhM,GAAK,GAC7C,OAAiB,OAAV7G,EAAiBA,EAAQ6S,EAAWvT,OAE3C,OAAI4S,EAAe9O,MAAQ8O,EAAe2J,iBAAmBhV,GAAOqL,EAAe7O,KAAOwD,EAEjF,KAIPA,EAAMqL,EAAe9O,MAAQ8O,EAAe2J,gBACvCH,EAAc7I,EAAYhM,GACxBA,EAAMqL,EAAe7O,IACvBqY,EAAc7I,EAAYhM,GAAQ,EAElCgM,EAAWvT,QAgGCwc,CAAsBvc,GAC7C,OAAO,SAAAwc,GAA8B,IAA3BrJ,EAA2BqJ,EAA3BrJ,WACJ1S,EAAQ,KAOZ,OANuB,OAAnB0S,EAAW7L,KAEC,QADd7G,EAAQwb,EAAe,CAAE9I,kBAEvB1S,EAAQ0S,EAAWC,YAGhB,CACLA,WAAY3S,IAKlB,SAASgc,KACP,IAAIC,EAAgC,KACpC,OAAO,SAAAC,GAA8D,IAAAC,EAAAD,EAA3DxJ,WAAcC,EAA6CwJ,EAA7CxJ,WAAYT,EAAiCiK,EAAjCjK,eAC9BS,IAAesJ,GAAqC,OAAnBA,GAA2B/J,IAC9DA,EAAe2J,gBAAkB,GAEnCI,EAAiBtJ,GAIrB,SAASyJ,GAATC,GAAgG,IAA3DzhB,EAA2DyhB,EAA3DzhB,QAASiY,EAAkDwJ,EAAlDxJ,WAAYlF,EAAsC0O,EAAtC1O,OAAQiC,EAA8ByM,EAA9BzM,WAC5D0M,EAAuC,KAC3C,OAAO,SAAAC,GAA+E,IAAAC,EAAAD,EAAnE7J,WAAcC,EAAqD6J,EAArD7J,WAAYJ,EAAyCiK,EAAzCjK,aAAcC,EAA2BgK,EAA3BhK,YACzD,GAAqB,OAAjBD,EACF,GAAmB,OAAfI,GACF,IAAK2J,EAAkB,CACrB,IAAMG,EAAoB9O,EAAOlI,yBACjCgX,EAAkBpZ,IAAMoZ,EAAkBrZ,MAAQuK,EAAOzI,QAAQtK,GACjE,IACM8hB,EADe/O,EAAOrH,cAAc1L,GAAW+S,EAAOzI,QAAQtK,GAEhE6hB,EAAkBrZ,MAAQuK,EAAOrH,cAAc1L,GAAW+S,EAAOpH,eAAe3L,GAChF6hB,EAAkBpZ,IAChBsZ,EACJ9J,EAAWvT,OAAS,EAChBqO,EAAOhI,YAAYkN,EAAWA,EAAWvT,OAAS,IAAI+D,IAAMwP,EAAWA,EAAWvT,OAAS,GAAGtG,oBAC9FyjB,EAAkBrZ,MACxB,GAAIuZ,EAAmBnK,EAAckK,EAAc,EACjDJ,EAAmB9gB,OAAOuF,SAASoL,cAAc,QAChC9N,UAAYhF,wBAAwB,IAAMuW,IAAalN,YACxE,IAAMka,EAAgB/J,EAAWvT,OAAS,EAAIkT,EAAcmK,EAAmBD,EAAelK,EAI9F,OAHA7E,EAAOhK,QAAQ2Y,EAAiB/gB,MAAhC,GAAAc,OAA0CugB,EAA1C,OACAhiB,EAAQyF,YAAYic,GACpB1hB,EAAQtB,4BAA4BgjB,EAC7B,CACLlJ,qBAAqB,UAK3B,GAAIkJ,EAAkB,CACpB3O,EAAO9H,eAAeyW,EAAkB,GACxC,IAAIO,EAAWP,EAIf,OAHAA,EAAmB,KACnB1hB,EAAQqF,YAAY4c,GACpBjiB,EAAQtB,4BAA4B,KAC7B,CACL8Z,qBAAqB,KAUjC,SAAS0J,GAATC,GAAuE,IAAtClK,EAAsCkK,EAAtClK,WAAYlF,EAA0BoP,EAA1BpP,OACvC2M,EAAgC,KAChCnB,EAAkC,KACtC,OAAO,SAAA6D,GAAiG,IAAAC,EAAAD,EAArFtK,WAAcC,EAAuEsK,EAAvEtK,WAAYJ,EAA2D0K,EAA3D1K,aAAcC,EAA6CyK,EAA7CzK,YACzD,GAAIG,IAAe2H,GAAkB/H,IAAiB4G,EAAkB,CACtE,IAAK,IAAInZ,EAAQ,EAAGA,EAAQ6S,EAAWvT,OAAQU,IAC7C,GAAIA,IAAUuS,EAAc,CAC1B,IAAM2K,EAAYrK,EAAW7S,GACzBmD,EAAY,EACK,OAAjBoP,GAAyBA,EAAevS,IAC1CmD,GAAaqP,GAEI,OAAfG,GAAuBA,GAAc3S,IACvCmD,GAAaqP,GAEf7E,EAAO9H,eAAeqX,EAAW/Z,GAOrC,OAHAmX,EAAiB3H,EACjBwG,EAAmB5G,EAEZ,CAAEI,aAAYJ,kBAO3B,SAAS8I,GAAT8B,GAAmE,IAAtCtK,EAAsCsK,EAAtCtK,WAAYlF,EAA0BwP,EAA1BxP,OACnC2M,EAAgC,KACpC,OAAO,SAAA8C,GAA6C,IAA1C/T,EAA0C+T,EAA1C/T,cAAeqJ,EAA2B0K,EAA3B1K,WACfC,EAA+DD,EAA/DC,WAAYJ,EAAmDG,EAAnDH,aAAcC,EAAqCE,EAArCF,YAAa3L,EAAwB6L,EAAxB7L,IAAKqL,EAAmBQ,EAAnBR,eACpD,GAAY,OAARrL,EAAc,CAChB,GAAmB,OAAf8L,IAAwBtJ,EAAcqL,kBAAoB/B,IAAe2H,EAgE3E,OAAO,KA9DP,IAAI+C,EAAc1K,EAAa,EAC3BvP,EAAQkT,OAAOgH,iBACfC,EAAgB,EAChBC,EAAc,EACdC,EAAc,KACdC,EAAe,KAInB,GAHIL,IAAgB9K,GAClB8K,IAEEA,GAAe,EAAG,CACpB,IAAMM,EAAahQ,EAAOzI,QAAQ2N,EAAWwK,IAE7C,GADAK,EAAe/P,EAAOhI,YAAYkN,EAAWwK,IACzC7K,EAAcmL,EAAY,CAC5B,IAAMC,GAAaD,EAAanL,GAAe,EAC/CpP,EAAQsa,EAAara,IAAMua,OAE3Bxa,EAAQsa,EAAara,IAEvBka,EAAgBG,EAAara,SAE7Bqa,EAAe,CAAEra,IAAKsK,EAAOlI,yBAAyBrC,OACtDma,EAAgB5P,EAAOlI,yBAAyBrC,MAGlD,IAAIC,EAAMiT,OAAOC,iBACbsH,EAAalL,EAIjB,GAHIkL,IAAetL,GACjBsL,IAEEA,EAAahL,EAAWvT,OAAQ,CAClC,IAAMwe,EAAYnQ,EAAOzI,QAAQ2N,EAAWgL,IAG5C,GAFAJ,EAAc9P,EAAOhI,YAAYkN,EAAWgL,IAExCrL,EAAcsL,EAAW,CAC3B,IAAMF,GAAaE,EAAYtL,GAAe,EAC9CnP,EAAMoa,EAAYra,MAAQwa,OAE1Bva,EAAMoa,EAAYra,MAEpBoa,EAAcC,EAAYra,WAE1Bqa,EAAc,CAAEra,MAAOuK,EAAOpI,yBAAyBxK,KAAKsI,KAC5Dma,EAAc7P,EAAOpI,yBAAyBxK,KAAKsI,IAAMsK,EAAOpI,yBAAyBxK,KAAKqI,MAGhG,IAAM2a,EAAoBL,GAAgBD,EAAc9P,EAAOtH,yBAAyBqX,EAAara,KAAO,KAG5G,OADAiX,EAAiB3H,EACV,CACLT,eAAgB,CACdgJ,SAAU,CACR9X,MAAOma,EACPla,IAAKma,GAEPpa,QACAC,MACAtI,KAAMgjB,EACNlC,gBAAiB3J,EAAiBA,EAAe2J,gBAAkB,IASzE,OADAvB,EAAiB,KACV,CACLpI,eAAgB,OAMxB,SAAS8L,KACP,IAAI/B,EAAgC,KACpC,OAAO,SAAAgC,GAAmE,IAAAC,EAAAD,EAAhEvL,WAAc7L,EAAkDqX,EAAlDrX,IAAK8L,EAA6CuL,EAA7CvL,WAAYT,EAAiCgM,EAAjChM,eACvC,GAAY,OAARrL,GACF,GAAkB,MAAd8L,GAAyC,OAAnBsJ,EAAyB,CACjD,GAAIpV,EAAMqL,EAAe9O,MAAO,CAC9B,IAAMyY,EAAkBhV,EAAMqL,EAAe9O,MAAQ,EACrD8O,EAAe2J,gBAAkBA,EAEnCI,EAAiBtJ,QAGnBsJ,EAAiB,MAKvB,SAASkC,GAATC,GAAkE,IAA9BxO,EAA8BwO,EAA9BxO,WAC9ByO,GAAY,EACVpc,EAAU2N,IAChB,OAAO,SAAA0O,GAAuC,IACtCC,IADsCD,EAApC5L,WAAc7L,IAElB0X,IAAaF,IACfA,EAAYE,EACRA,EACFtc,EAAQuc,aAAevc,EAAQuc,cAE/Bvc,EAAQwc,aAAexc,EAAQwc,gBAQvC,SAASC,GAATC,GAAyD,IAA9B/O,EAA8B+O,EAA9B/O,WACrBqM,EAAgC,KAC9Bha,EAAU2N,IAChB,OAAO,SAAAgP,GAAiG,IAAAC,EAAAD,EAA9FlM,WAAcC,EAAgFkM,EAAhFlM,WAAYJ,EAAoEsM,EAApEtM,aAAoEuM,EAAAF,EAApDvV,cAAiB2I,EAAmC8M,EAAnC9M,QAASpX,EAA0BkkB,EAA1BlkB,QAC5E,GAAIqH,EAAQ8c,aAA8B,OAAfpM,GAAuBsJ,IAAmBtJ,EAAY,CAC/EsJ,EAAiBtJ,EACjB,IAAIqM,EAAqBrM,EAEJ,OAAjBJ,GAAyBI,EAAaJ,GACxCyM,IAGF/c,EAAQ8c,YAAY,CAClBpM,WAAYqM,EACZzM,eACAP,UACApX,QAASA,EAAUA,EAAQiX,uBAAmCrP,MAMtE,SAASyc,GAAe1f,GACtB,MAAsC,cAAlCA,EAAOqQ,aAAanN,UAEfyc,GAAQ3f,EAAR2f,CACLjG,GACAI,GACA3S,GACAiT,GACAG,GACAI,GACAE,GACA+D,GACAO,IAGKQ,GAAQ3f,EAAR2f,CACLjG,GACAI,GACA3S,GACAiT,GACAG,GACAqB,GACAI,GACAS,GACAI,GACAU,GACAzB,GACAZ,GACAuD,GACAG,GACAO,IAeN,SAASQ,GAAQ3f,GACf,OAAO,WAAyB,QAAAH,EAAAC,UAAAC,OAArB6f,EAAqB,IAAA3f,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAArB0f,EAAqB1f,GAAAJ,UAAAI,GAC9B,IAAM2f,EAAoBD,EAAU5gB,IAAI,SAAArB,GAAC,OAAIA,EAAEqC,KAC3C8f,EAA4B,KAChC,OAAO,SAAChW,GAIN,OAHAgW,EAASD,EAAkB7W,OAAO,SAACmK,EAAY1T,GAC7C,OAAO2C,OAAO0U,OAAO3D,EAAY1T,EAAG,CAAEqK,gBAAeqJ,iBACpD2M,GAhBA,CACL1M,WAAY,KACZJ,aAAc,KACdC,YAAa,KACb3L,IAAK,KACLqL,eAAgB,SAkBpB,SAASoN,GAAU1kB,GACjB,OAAO,SAAUqH,GACf,IAAImO,EAAmBzO,OAAO0U,OAAO,GAAI/T,EAAgBL,GACrDyQ,EAAgC,KAChC6M,EAA0C,KACxC3L,EA3eV,SAA2BhZ,EAAsBgV,GAC/C,IAAMiD,EAAa0E,GAAa3c,GAC1BqH,EAAU2N,IAIhB,OAFAnR,YAAS7D,EAAD,GAAAyB,OAAalD,iBAAb,KAAAkD,OAA+B4F,EAAQS,cAExC,CACL9H,UACAiY,aACAjD,aACAjC,OALa7J,EAAclJ,EAASqH,EAAQS,YAAcT,EAAQW,oBAsepD4c,CAAkB5kB,EAASgV,GACrC0D,EAAc2L,GAAerL,GAC7B+E,EAAczF,GAAWU,GACzB6L,EAAiBpiB,YAAmBzC,EA8BxC,WACEgZ,EAAMjG,OAAOlH,kBACbiZ,MA9BF,SAASA,IACmB,OAAtBH,IACFA,EAAkB7K,kBAAmB,EACrChC,EAAaY,EAAYiM,GACzBA,EAAkB7K,kBAAmB,GAIzC,SAASP,EAActB,EAA2BjY,GAEhD,IADA,IAAM+kB,EAAgBpI,GAAa3c,GAC1BglB,EAAI,EAAGA,EAAID,EAAcrgB,OAAQsgB,IACxC/M,EAAW+M,GAAKD,EAAcC,GAGhC,IAAK,IAAIA,EAAI,EAAGA,EAAI/M,EAAWvT,OAASqgB,EAAcrgB,OAAQsgB,IAC5D/M,EAAWgN,MA+Bf,SAASjQ,IACP,OAAOQ,EAoDT,MAjD8B,CAC5BxV,UACAiY,WAAYe,EAAMf,WAClBoB,eAAgBA,GAAeL,GAC/BjG,OAAQiG,EAAMjG,OACd9P,QAtBF,SAAiBb,GA5nBrB,IAAwBpC,EA6nBlB6kB,EAAe5hB,UA7nBGjD,EA8nBHoC,EAAUpC,QA7nBzBid,GAAUC,WACZtY,MAAMgY,UAAU/Z,QAAQkC,KAAK/E,EAAQsF,SAAU,SAACE,GAC1CA,EAAMqX,WAAaC,KAAKC,cACtBxZ,YAASiC,EAAOvH,kBAClB+B,EAAQ0F,aAAaF,EAAMyR,kBAAkCzR,GAC7DxF,EAAQqF,YAAYG,OA6oBxBuV,YArCF,SAAqB3Y,EAAuBH,GAC1C,IAAMjC,EAAUoC,EAAUpC,QACpBiY,EAAae,EAAMf,WACzBsB,EAActB,EAAYjY,GAC1BoC,EAAU2Q,OAAOlH,kBACjBoM,EAAWpV,QAAQ,SAAAP,GAAC,OAAIia,GAAaja,GAAG,EAAM0S,IAAahN,qBAC3D6c,EAAe3hB,SAgCfqP,WAP4B,SAOjB9D,GAGT,OAFAkW,EAAoBlW,EACpBqJ,EAAaY,EAAYjK,IAG3B6J,WAZ4B,SAYjB7J,GACToW,EAAejiB,OACXkV,GAAcA,EAAWmI,0BAC3BjgB,EAAQqF,YAAYyS,EAAWmI,0BAEjC0E,EAAoB,KACpBjM,EAAc2L,GAAerL,GAC7B+E,EAAYtP,EAAeqJ,GAC3BA,EAAa,MAEfsE,kBAtB4B,WAwB1B2B,EAAY4G,EAAoB5d,OAAO0U,OAAO,GAAI3D,EAAa,CAAEC,WAAY,QAAS,GACtFD,EAAa,MAEfT,cA3B4B,WA4B1B,OAAOS,GAETD,uBA9B4B,SA8BLqN,GACrB,OAAOhD,GAAsBlJ,EAAtBkJ,CAA6BgD,IAEtCzM,aAAc,WACZqM,KAEFvL,cAAe,WACbA,EAAcP,EAAMf,WAAYjY,IAElC+Y,kBAvC4B,WAwC1B,OAAOkE,GAAUxP,gBAEnBgN,2BA1C4B,WA2C1B,OAA0C,IAAnCwC,GAAUkI,sBAEnBnQ,aACAoQ,WA1DF,SAAoB/d,GAAyC,IAAdge,IAAc5gB,UAAAC,OAAA,QAAAkD,IAAAnD,UAAA,KAAAA,UAAA,GAEzD+Q,GADY,IAAV6P,EACiBte,OAAO0U,OAAO,GAAI/T,EAAgBL,GAElCN,OAAO0U,OAAO,GAAI/T,EAAgB8N,EAAkBnO,MA8D/E,IAAM4V,GAA8B,SAAUjd,EAAsBqH,GAClE,IACMjF,EADkBsiB,GAAU1kB,EAChBslB,CAAgBje,GAGlC,OAFCrH,EAAqBjC,qBAAqBqE,EAC3C2Z,GAASC,SAAS5Z,GACX,CACLa,QADK,WAEH8Y,GAASG,WAAW9Z,GACpBA,EAAUa,QAAQb,IAEpBgjB,WALK,SAKM/d,EAA2Bge,GACpCjjB,EAAUgjB,WAAW/d,EAASge,MAOpCpI,GAAUC,WAAY,EACtBD,GAAUzV,WAAa,WACrBuU,GAASvU,cAGXyV,GAAUxV,WAAa,WACrB,OAAOsU,GAAStU,cAGHwV,qCCpyBfzf,EAAAM,EAAAJ,GAAAF,EAAAC,EAAAC,EAAA,mCAAAsgB,IAAAxgB,EAAAC,EAAAC,EAAA,qCAAA6nB,IAAA,IAAAC,EAAAhoB,EAAA,GAAAioB,EAAAjoB,EAAA,GAOO,SAASwgB,EAATxP,GAAiE,IAAvCxO,EAAuCwO,EAAvCxO,QAASiY,EAA8BzJ,EAA9ByJ,WACzC,OAAO,SAACyN,EAAwBtH,GAA4B,IAAAtH,EACN4O,EAA7C/N,EADmDb,EACnDa,aAAcI,EADqCjB,EACrCiB,WAAY4N,EADyB7O,EACzB6O,eAC9BC,EAAiB,KAMrB,GALqB,OAAjBjO,IACHiO,EAAiB1gB,YAAclF,EAAS2X,GACxCM,EAAWkE,OAAOxE,EAAc,IAGd,OAAfI,EAAqB,CACxB,IAAMiF,EAAUpc,OAAOuF,SAASoL,cAAc,OAC9CyL,EAAQvZ,UAAR,GAAAhC,OAAuBxD,gBACvB+e,EAAQvX,YAAYmgB,GAAkBA,EAAe3O,kBAAoB2O,EAAe3O,kBAAoB0O,GAC5GpgB,YAAWvF,EAASgd,EAASjF,GACzBA,GAAcE,EAAWvT,OAC5BuT,EAAWlV,KAAKia,GAEhB/E,EAAWkE,OAAOpE,EAAY,EAAGiF,GAI/BoB,GACHA,EAAOsH,IAKH,SAASH,IASf,MAAO,CACNM,QATe,WACf,OAAO,SAACH,EAAwBtH,GAC3BA,GACHA,EAAOsH,uzCCjCXtjB,YAAU2b,YAAc+H,eAAaP,mBAAmBM,QACxDzjB,YAAU8a,WAAY,MAOhBwH,cA2CJ,SAAAA,EAAY1L,GAAuB,IAAA+M,MAAA,mGAAAC,CAAAC,KAAAvB,KACjCuB,KAAAF,MAAAG,EAAAxB,GAAA3f,KAAAkhB,KAAMjN,mDAD2BpJ,EAAAuW,EAAAJ,GAAA,wBAAAnW,EAAAuW,EAAAJ,GAAA,YAFb,MAEanW,EAAAuW,EAAAJ,GAAA,eADCK,IAAMC,aAG1CN,EAAKO,oBAAsBP,EAAKO,oBAAoBC,KAAzBJ,EAAAJ,IACzBA,EAAKS,aAAeT,EAAKS,aAAaD,KAAlBJ,EAAAJ,IACpBA,EAAKU,yBAA2BV,EAAKU,yBAAyBF,KAA9BJ,EAAAJ,IAChCA,EAAKW,cAAgB,KALYX,yPA3CbY,kEAoDpBV,KAAKS,cAAgBT,KAAKO,eAC1BP,KAAK7jB,UAAYA,oBAAU6jB,KAAKO,eAAgBP,KAAKK,sEAIrDL,KAAK7jB,UAAUa,UACfgjB,KAAK7jB,UAAY,gDAGAwkB,GACjB,GAAIX,KAAKO,eAAgB,CACvB,GAAIP,KAAKS,eAAiBT,KAAKS,gBAAkBT,KAAKO,eAIpD,OAHAP,KAAK7jB,UAAUa,UACfgjB,KAAK7jB,UAAYA,oBAAU6jB,KAAKO,eAAgBP,KAAKK,4BACrDL,KAAKS,cAAgBT,KAAKO,gBAIxBP,KAAKQ,yBAAyBG,IAChCX,KAAK7jB,UAAUgjB,WAAWa,KAAKK,yEAKZM,GAA2B,IAAAC,EACOZ,KAAKjN,MAA1BxD,GADcqR,EAC1CC,OAD0CD,EAClCvhB,SADkCuhB,EACxBlmB,MADwBomB,EAAAF,EAAA,gCAGlD,IAAK,IAAMhiB,KAAQ2Q,EAAkB,CACnC,IAAMwR,EAAMniB,EACZ,GAAI2Q,EAAiByR,eAAeD,GAAM,CACxC,IAAMzd,EAAOiM,EAAiBwR,GAE9B,GAAoB,oBAATzd,GAAuBA,IAASqd,EAAUI,GACnD,OAAO,GAKb,OAAO,mCAIP,OAAIf,KAAKjN,MAAM8N,OACTb,KAAKjN,MAAM8N,OAAOb,KAAKiB,cAGzBC,EAAAC,EAAA7V,cAAA,OAAK5Q,MAAOslB,KAAKjN,MAAMrY,MAAO0mB,IAAKpB,KAAKiB,cACrCjB,KAAKjN,MAAM1T,iDAOpB,OAAO2gB,KAAKiB,aAAahlB,sDAGe,IAAAolB,EAAArB,KACtC,OAAOlf,OAAOkK,KAAKgV,KAAKjN,OAAOrL,OAAO,SAAC8W,EAA0BuC,GAC/D,IAAMO,EAAaP,EACbzd,EAAO+d,EAAKtO,MAAMuO,GAUxB,OAPE9C,EAAO8C,GADW,oBAAThe,EACY,WACnB,OAAQ+d,EAAKtO,MAAMuO,GAAZviB,WAAA,EAAAP,YAGY8E,EAGhBkb,GACP,2CA3HAC,cACqB,CACzB7c,UAAW2f,IAAUC,MAAM,CAAC,OAAQ,OAAQ,YAAa,YACzD9f,UAAW6f,IAAUE,OACrB5f,YAAa0f,IAAUC,MAAM,CAAC,aAAc,aAC5C9mB,MAAO6mB,IAAUG,OACjB5S,mBAAoByS,IAAUE,OAC9BzS,oBAAqBuS,IAAUE,OAC/BtS,eAAgBoS,IAAUI,OAC1B5f,kBAAmBwf,IAAUI,OAC7B3f,kBAAmBuf,IAAUK,KAC7BrO,SAAUgO,IAAUE,OACpB9M,UAAW4M,IAAUE,OACrB1Q,UAAWwQ,IAAUE,OACrBxO,YAAasO,IAAUM,KACvB3O,UAAWqO,IAAUM,KACrB1J,OAAQoJ,IAAUM,KAClB/f,gBAAiByf,IAAUM,KAC3B3f,kBAAmBqf,IAAUM,KAC7B5f,iBAAkBsf,IAAUM,KAC5BlE,YAAa4D,IAAUM,KACvBjE,YAAa2D,IAAUM,KACvBhB,OAAQU,IAAUM,KAClBzU,eAAgBmU,IAAUM,KACxBtQ,gBAAiBgQ,IAAUK,KAC3B3H,gBAAiBsH,IAAUO,UAAU,CACnCP,IAAUQ,MAAM,CACdvkB,UAAW+jB,IAAUE,OACrB1f,kBAAmBwf,IAAUI,OAC7BxH,UAAWoH,IAAUK,OAEvBL,IAAUK,WA/BVnD,iBAmCwB,CAC5B7c,UAAW,OACXC,YAAa,aA0FA4c,6kCCxIdzmB,QACG6W,UADH7W,aAQKgqB,iaAAkBtB,uDAOtB,GAAIV,KAAKjN,MAAM8N,OACd,OAAOV,IAAM8B,aAAajC,KAAKjN,MAAM8N,SAAU,CAAErjB,UAAWxF,IAG7D,IAAMkqB,EAAO,GAAA1mB,OAAMwkB,KAAKjN,MAAMvV,UAAawiB,KAAKjN,MAAMvV,UAAY,IAAO,IACzE,OACC0jB,EAAAC,EAAA7V,cAAA,MAAA6W,EAAA,GAASnC,KAAKjN,MAAd,CAAqBvV,UAAS,GAAAhC,OAAK0mB,GAAL1mB,OAAexD,KAC3CgoB,KAAKjN,MAAM1T,iDAdV2iB,mBACsB,CAC1BnB,OAAQU,IAAUM,KAClBrkB,UAAW+jB,IAAUE,qGAiBRO,8ECyCO,qBAAXrnB,QAxEX,WACE,IAAWynB,KAeRC,UAdkBD,EAAYzL,YAAcyL,EAAYzL,UAAUtZ,UACjE+kB,EAAYzL,UAAUtZ,QACpB+kB,EAAYzL,UAAU2L,iBACtBF,EAAYzL,UAAU4L,oBACtBH,EAAYzL,UAAU6L,mBACtBJ,EAAYzL,UAAU8L,kBACtBL,EAAYzL,UAAU+L,uBACtB,SAAUC,GAGR,IAFA,IAAItlB,GAAW2iB,KAAK9f,UAAY8f,KAAK4C,eAAeC,iBAAiBF,GACnE5D,EAAI1hB,EAAQoB,SACLsgB,GAAK,GAAK1hB,EAAQylB,KAAK/D,KAAOiB,OACvC,OAAOjB,GAAK,IAQpB,SAAWqD,GAEPA,GACAA,EAAYzL,WAC+B,MAA3CyL,EAAYzL,UAAU3F,mBAEtBlQ,OAAOC,eAAeqhB,EAAYzL,UAAW,oBAAqB,CAChEzV,IAAK,WAIH,IAHA,IAAI6hB,EACFC,EAAQhD,KAAKiD,WACblE,EAAI,EACEgE,EAAOC,EAAMjE,MACnB,GAAsB,IAAlBgE,EAAKnM,SACP,OAAOmM,EAGX,OAAO,QAhBf,CAoBGlM,MAAQwL,SAIN1jB,MAAMgY,UAAUva,OACnBuC,MAAMgY,UAAUva,KAAO,SAAU8mB,GAC/B,aAEA,GAAY,MAARlD,KACF,MAAM,IAAImD,UAAU,oDAGtB,GAAmB,oBAARD,EACT,MAAM,IAAIC,UAOZ,IAJA,IAAIC,EAAItiB,OAAOkf,MACXqD,EAAMD,EAAE3kB,SAAW,EAEnB6kB,EAAU9kB,UAAUC,QAAU,EAAID,UAAU,QAAK,EAC5CugB,EAAI,EAAGA,EAAIsE,EAAKtE,IACvB,GAAIA,KAAKqE,GAAKF,EAAIpkB,KAAKwkB,EAASF,EAAErE,GAAIA,EAAGqE,GACvC,OAAO,EAIX,OAAO,IAMXG,yKCvE2B7C,kBCAvB8C,EAAU,CACfjpB,OAAQ,OACRuQ,OAAQ,iBACR2Y,OAAQ,MACRC,UAAW,aAGShD,YCRQA,wCCDhBiD,EAAY,SAACC,EAAK/R,GAAe,IACpCH,EAAsCG,EAAtCH,aAAcI,EAAwBD,EAAxBC,WAAYX,EAAYU,EAAZV,QAClC,GAAqB,OAAjBO,GAAwC,OAAfI,EAAqB,OAAO8R,EAEzD,IAAMpF,EAAM1d,OAAA+iB,EAAA,EAAA/iB,CAAO8iB,GACfE,EAAY3S,EAUhB,OARqB,OAAjBO,IACFoS,EAAYtF,EAAOtI,OAAOxE,EAAc,GAAG,IAG1B,OAAfI,GACF0M,EAAOtI,OAAOpE,EAAY,EAAGgS,GAGxBtF,GAGIuF,EAAgB,SAACC,EAAOC,GAEnC,IADA,IAAMzF,EAAS,GACNO,EAAI,EAAGA,EAAIiF,EAAOjF,IACzBP,EAAO1hB,KAAKmnB,EAAQlF,IAEtB,OAAOP,GCpBH0F,cACJ,SAAAA,IAAc,IAAApE,EAAA,OAAAhf,OAAAqjB,EAAA,EAAArjB,CAAAkf,KAAAkE,IACZpE,EAAAhf,OAAAsjB,EAAA,EAAAtjB,CAAAkf,KAAAlf,OAAAujB,EAAA,EAAAvjB,CAAAojB,GAAAplB,KAAAkhB,QACKsE,MAAQ,CACXC,MAAOR,EAAc,GAAI,SAAC5kB,GACxB,MAAO,CACLyW,GAAIzW,EACJqlB,KAAM,YAAcrlB,MANd2gB,wEAWL,IAAAuB,EAAArB,KACP,OACEyE,EAAAtD,EAAA7V,cAAA,WACEmZ,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,eACbinB,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAWvM,OAAQ,SAAAlL,GAAC,OAAIoU,EAAKsD,SAAS,CAAEJ,MAAOZ,EAAUtC,EAAKiD,MAAMC,MAAOtX,OACxE+S,KAAKsE,MAAMC,MAAM7mB,IAAI,SAAArB,GACpB,OACEooB,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAW3D,IAAK1kB,EAAEuZ,IAChB6O,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,kBACZnB,EAAEmoB,mBArBF9D,aAiCfkE,cACJ,SAAAA,IAAc,IAAAC,EAAA,OAAA/jB,OAAAqjB,EAAA,EAAArjB,CAAAkf,KAAA4E,IACZC,EAAA/jB,OAAAsjB,EAAA,EAAAtjB,CAAAkf,KAAAlf,OAAAujB,EAAA,EAAAvjB,CAAA8jB,GAAA9lB,KAAAkhB,QACKsE,MAAQ,CACXC,MAAOR,EAAc,GAAI,SAAC5kB,GACxB,MAAO,CACLyW,GAAIzW,EACJqlB,KAAM,YAAcrlB,MANd0lB,wEAWL,IAAAC,EAAA9E,KACP,OACEyE,EAAAtD,EAAA7V,cAAA,WACEmZ,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,wBACbinB,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAWvM,OAAQ,SAAAlL,GAAC,OAAI6X,EAAKH,SAAS,CAAEJ,MAAOZ,EAAUmB,EAAKR,MAAMC,MAAOtX,OACxE+S,KAAKsE,MAAMC,MAAM7mB,IAAI,SAAArB,GACpB,OACEooB,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAW3D,IAAK1kB,EAAEuZ,IAChB6O,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,kBACZnB,EAAEmoB,mBArBM9D,aCjCvBqE,EAAa,CACjBtB,OAAQ,OACRuB,UAAW,QAkCEC,cA7Bb,SAAAA,IAAc,IAAAnF,EAAA,OAAAhf,OAAAqjB,EAAA,EAAArjB,CAAAkf,KAAAiF,IACZnF,EAAAhf,OAAAsjB,EAAA,EAAAtjB,CAAAkf,KAAAlf,OAAAujB,EAAA,EAAAvjB,CAAAmkB,GAAAnmB,KAAAkhB,QACKsE,MAAQ,CACXC,MAAOR,EAAc,GAAI,SAAChF,GAAD,MAAQ,CAAEnJ,GAAI,IAAMmJ,EAAGyF,KAAI,eAAAhpB,OAAiBujB,OAH3De,wEAML,IAAAuB,EAAArB,KACP,OACEyE,EAAAtD,EAAA7V,cAAA,WACEmZ,EAAAtD,EAAA7V,cAAA,OAAK5Q,MAAOqqB,GACVN,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAW7iB,YAAY,aAAasW,OAAQ,SAAAlL,GAAC,OAAIoU,EAAKsD,SAAS,CAAEJ,MAAOZ,EAAUtC,EAAKiD,MAAMC,MAAOtX,OAEhG+S,KAAKsE,MAAMC,MAAM7mB,IAAI,SAAArB,GACnB,OACEooB,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAW3D,IAAK1kB,EAAEuZ,IAChB6O,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,6BACZnB,EAAEmoB,mBAjBM9D,aCPzBqE,EAAa,CACjBG,WAAY,OACZxa,KAAM,GAsFOya,cAlFb,SAAAA,IAAc,IAAArF,EAAA,OAAAhf,OAAAqjB,EAAA,EAAArjB,CAAAkf,KAAAmF,IACZrF,EAAAhf,OAAAsjB,EAAA,EAAAtjB,CAAAkf,KAAAlf,OAAAujB,EAAA,EAAAvjB,CAAAqkB,GAAArmB,KAAAkhB,QAEKsE,MAAQ,CACXc,OAAQrB,EAAc,GAAI,SAAChF,GAAD,MAAQ,CAAEnJ,GAAI,IAAMmJ,EAAGyF,KAAI,iBAAAhpB,OAAmBujB,MACxEsG,OAAQtB,EAAc,GAAI,SAAChF,GAAD,MAAQ,CAAEnJ,GAAI,IAAMmJ,EAAGyF,KAAI,iBAAAhpB,OAAmBujB,MACxEuG,OAAQvB,EAAc,GAAI,SAAChF,GAAD,MAAQ,CAAEnJ,GAAI,IAAMmJ,EAAGyF,KAAI,iBAAAhpB,OAAmBujB,MACxEwG,OAAQxB,EAAc,GAAI,SAAChF,GAAD,MAAQ,CAAEnJ,GAAI,IAAMmJ,EAAGyF,KAAI,iBAAAhpB,OAAmBujB,OAP9De,wEAUL,IAAAuB,EAAArB,KACP,OACEyE,EAAAtD,EAAA7V,cAAA,OAAK5Q,MAAO,CAAE6O,QAAS,OAAQic,eAAgB,UAAWC,UAAW,OAAQC,YAAa,SACxFjB,EAAAtD,EAAA7V,cAAA,OAAK5Q,MAAOqqB,GACVN,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAWhjB,UAAU,IAAII,gBAAiB,SAAAid,GAAC,OAAIsC,EAAKiD,MAAMc,OAAOrG,IAAI5G,OAAQ,SAAAlL,GAAC,OAAIoU,EAAKsD,SAAS,CAAES,OAAQzB,EAAUtC,EAAKiD,MAAMc,OAAQnY,OAEnI+S,KAAKsE,MAAMc,OAAO1nB,IAAI,SAAArB,GACpB,OACEooB,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAW3D,IAAK1kB,EAAEuZ,IAChB6O,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,kBACZnB,EAAEmoB,WAQjBC,EAAAtD,EAAA7V,cAAA,OAAK5Q,MAAOqqB,GACVN,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAWhjB,UAAU,IAAII,gBAAiB,SAAAid,GAAC,OAAIsC,EAAKiD,MAAMe,OAAOtG,IAAI5G,OAAQ,SAAAlL,GAAC,OAAIoU,EAAKsD,SAAS,CAAEU,OAAQ1B,EAAUtC,EAAKiD,MAAMe,OAAQpY,OAEnI+S,KAAKsE,MAAMe,OAAO3nB,IAAI,SAAArB,GACpB,OACEooB,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAW3D,IAAK1kB,EAAEuZ,IAChB6O,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,kBACZnB,EAAEmoB,WAQjBC,EAAAtD,EAAA7V,cAAA,OAAK5Q,MAAOqqB,GACVN,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAWhjB,UAAU,IAAII,gBAAiB,SAAAid,GAAC,OAAIsC,EAAKiD,MAAMgB,OAAOvG,IAAI5G,OAAQ,SAAAlL,GAAC,OAAIoU,EAAKsD,SAAS,CAAEW,OAAQ3B,EAAUtC,EAAKiD,MAAMgB,OAAQrY,OAEnI+S,KAAKsE,MAAMgB,OAAO5nB,IAAI,SAAArB,GACpB,OACEooB,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAW3D,IAAK1kB,EAAEuZ,IAChB6O,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,kBACZnB,EAAEmoB,WAQjBC,EAAAtD,EAAA7V,cAAA,OAAK5Q,MAAOqqB,GACVN,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAWhjB,UAAU,IAAII,gBAAiB,SAAAid,GAAC,OAAIsC,EAAKiD,MAAMiB,OAAOxG,IAAI5G,OAAQ,SAAAlL,GAAC,OAAIoU,EAAKsD,SAAS,CAAEY,OAAQ5B,EAAUtC,EAAKiD,MAAMiB,OAAQtY,OAEnI+S,KAAKsE,MAAMiB,OAAO7nB,IAAI,SAAArB,GACpB,OACEooB,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAW3D,IAAK1kB,EAAEuZ,IAChB6O,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,kBACZnB,EAAEmoB,mBAlEJ9D,aCJfqE,EAAa,CACjBG,WAAY,OACZxa,KAAM,GAuEOib,cAnEb,SAAAA,IAAc,IAAA7F,EAAA,OAAAhf,OAAAqjB,EAAA,EAAArjB,CAAAkf,KAAA2F,IACZ7F,EAAAhf,OAAAsjB,EAAA,EAAAtjB,CAAAkf,KAAAlf,OAAAujB,EAAA,EAAAvjB,CAAA6kB,GAAA7mB,KAAAkhB,QAEKsE,MAAQ,CACXc,OAAQrB,EAAc,GAAI,SAAChF,GAAD,MAAQ,CAAEnJ,GAAI,IAAMmJ,EAAGyF,KAAI,sBAAAhpB,OAAwBujB,MAC7EsG,OAAQtB,EAAc,GAAI,SAAChF,GAAD,MAAQ,CAAEnJ,GAAI,IAAMmJ,EAAGyF,KAAI,iBAAAhpB,OAAmBujB,MACxEuG,OAAQvB,EAAc,GAAI,SAAChF,GAAD,MAAQ,CAAEnJ,GAAI,IAAMmJ,EAAGyF,KAAI,iBAAAhpB,OAAmBujB,MACxEwG,OAAQxB,EAAc,GAAI,SAAChF,GAAD,MAAQ,CAAEnJ,GAAI,IAAMmJ,EAAGyF,KAAI,iBAAAhpB,OAAmBujB,OAP9De,wEAUL,IAAAuB,EAAArB,KACP,OACEyE,EAAAtD,EAAA7V,cAAA,OAAK5Q,MAAO,CAAE6O,QAAS,OAAQic,eAAgB,UAAWC,UAAW,OAAQC,YAAa,SACxFjB,EAAAtD,EAAA7V,cAAA,OAAK5Q,MAAOqqB,GACVN,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAWhjB,UAAU,IAAIE,UAAU,OAAOE,gBAAiB,SAAAid,GAAC,OAAIsC,EAAKiD,MAAMc,OAAOrG,IAAI5G,OAAQ,SAAAlL,GAAC,OAAIoU,EAAKsD,SAAS,CAAES,OAAQzB,EAAUtC,EAAKiD,MAAMc,OAAQnY,OAEpJ+S,KAAKsE,MAAMc,OAAO1nB,IAAI,SAACrB,EAAE0iB,GACvB,OACE0F,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAW3D,IAAKhC,GACd0F,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,kBACZnB,EAAEmoB,WAQjBC,EAAAtD,EAAA7V,cAAA,OAAK5Q,MAAOqqB,GACVN,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAWhjB,UAAU,IAAII,gBAAiB,SAAAid,GAAC,OAAIsC,EAAKiD,MAAMe,OAAOtG,IAAI5G,OAAQ,SAAAlL,GAAC,OAAIoU,EAAKsD,SAAS,CAAEU,OAAQ1B,EAAUtC,EAAKiD,MAAMe,OAAQpY,OAEnI+S,KAAKsE,MAAMe,OAAO3nB,IAAI,SAACrB,EAAG0iB,GACxB,OACE0F,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAW3D,IAAKhC,GACd0F,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,kBACZnB,EAAEmoB,WAQjBC,EAAAtD,EAAA7V,cAAA,OAAK5Q,MAAOqqB,GACVN,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAWhjB,UAAU,IAAII,gBAAiB,SAAAid,GAAC,OAAIsC,EAAKiD,MAAMgB,OAAOvG,IAAI5G,OAAQ,SAAAlL,GAAC,OAAIoU,EAAKsD,SAAS,CAAEW,OAAQ3B,EAAUtC,EAAKiD,MAAMgB,OAAQrY,OAEnI+S,KAAKsE,MAAMgB,OAAO5nB,IAAI,SAAArB,GACpB,OACEooB,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAW3D,IAAK1kB,EAAEuZ,IAChB6O,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,kBACZnB,EAAEmoB,mBAnDN9D,aCLbqE,EAAa,CACjBtB,OAAQ,OACRuB,UAAW,QCoLEY,GDhLUlF,wBCLvB,SAAAkF,IAAc,IAAA9F,EAAAhf,OAAAqjB,EAAA,EAAArjB,CAAAkf,KAAA4F,IACZ9F,EAAAhf,OAAAsjB,EAAA,EAAAtjB,CAAAkf,KAAAlf,OAAAujB,EAAA,EAAAvjB,CAAA8kB,GAAA9mB,KAAAkhB,QAEK6F,gBAAkB/F,EAAK+F,gBAAgBvF,KAArBxf,OAAAglB,EAAA,EAAAhlB,CAAAgf,IACvBA,EAAKiG,iBAAmBjG,EAAKiG,iBAAiBzF,KAAtBxf,OAAAglB,EAAA,EAAAhlB,CAAAgf,IACxBA,EAAKkG,iBAAmBlG,EAAKkG,iBAAiB1F,KAAtBxf,OAAAglB,EAAA,EAAAhlB,CAAAgf,IAExB,IAAMyE,EAAQR,EAAc,GAAI,SAAAhF,GAAC,MAAK,CACpCnJ,GAAImJ,EACJtT,KAAM,YACN+Y,KAAI,2BAAAhpB,OAA6BujB,MAG7BsG,EAAStB,EAAc,GAAI,SAAAhF,GAAC,MAAK,CACrCnJ,GAAImJ,EACJtT,KAAM,YACN+Y,KAAI,2BAAAhpB,OAA6BujB,MAGnCsG,EAAO,GAAK,CACVzP,GAAI,EACJnK,KAAM,YACN8Y,MAAOR,EAAc,EAAG,SAAAhF,GAAC,MAAK,CAC5BnJ,GAAImJ,EACJtT,KAAM,YACN+Y,KAAI,2BAAAhpB,OAA6BujB,OAIrC,IAAMuG,EAASvB,EAAc,EAAG,SAAAhF,GAAC,MAAK,CACpCnJ,GAAImJ,EACJtT,KAAM,YACN+Y,KAAI,2BAAAhpB,OAA6BujB,MAhCvB,OAmCZwF,EAAM,GAAK,CACT3O,GAAI,EACJnK,KAAM,YACN8Y,MAAOc,GAGTd,EAAM,GAAK,CACT3O,GAAI,EACJnK,KAAM,YACN8Y,MAAOe,GAGTxF,EAAKwE,MAAQ,CACXC,SAhDUzE,wEAmDL,IAAAuB,EAAArB,KACP,OACEyE,EAAAtD,EAAA7V,cAAA,WACEmZ,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,eACbinB,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAWvM,OAAQ6H,KAAK6F,iBACrB7F,KAAKsE,MAAMC,MAAM7mB,IAAI,SAACrB,EAAG0iB,GACxB,MAAe,cAAX1iB,EAAEoP,KAEFgZ,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAW3D,IAAKhC,GACd0F,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,kBAAkBnB,EAAEmoB,OAKrCC,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAW3D,IAAKhC,GACd0F,EAAAtD,EAAA7V,cAAA,OACE5Q,MAAO,CACLurB,QAAS,YACTR,UAAW,MACXS,aAAc,MACdpb,OAAQ,6BACRqb,gBAAiB,OACjB9lB,OAAQ,SAGVokB,EAAAtD,EAAA7V,cAAA,MAAI5Q,MAAO,CAAEgpB,UAAW,WAAxB,0BAC0BrnB,EAAEuZ,IAE5B6O,EAAAtD,EAAA7V,cAAA,OAAK5Q,MAAO,CAAE2F,OAAQ,YACpBokB,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAWvM,OAAQ,SAAAlL,GAAC,OAAIoU,EAAK0E,iBAAiBhH,EAAG9R,KAC9C5Q,EAAEkoB,MAAM7mB,IAAI,SAAC2K,EAAG+d,GACf,MAAe,cAAX/d,EAAEoD,KAEFgZ,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAW3D,IAAKqF,GACd3B,EAAAtD,EAAA7V,cAAA,OACE9N,UAAU,iBACV9C,MAAO,CAAEyrB,gBAAiB,aAEzB9d,EAAEmc,OAMPC,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAW3D,IAAKqF,GACd3B,EAAAtD,EAAA7V,cAAA,OACE5Q,MAAO,CACLurB,QAAS,YACTR,UAAW,MACXS,aAAc,MACdpb,OAAQ,6BACRqb,gBAAiB,WACjB9lB,OAAQ,SAGVokB,EAAAtD,EAAA7V,cAAA,MACE5Q,MAAO,CACLgpB,UAAW,WAFf,0BAK0Brb,EAAEuN,IAE5B6O,EAAAtD,EAAA7V,cAAA,OAAK5Q,MAAO,CAAE2F,OAAQ,YACpBokB,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CACEvM,OAAQ,SAAAlL,GAAC,OACPoU,EAAK2E,iBAAiBjH,EAAGqH,EAAGnZ,KAG7B5E,EAAEkc,MAAM7mB,IAAI,SAAC0lB,EAAG/nB,GACf,OACEopB,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAW3D,IAAK1lB,GACdopB,EAAAtD,EAAA7V,cAAA,OACE9N,UAAU,iBACV9C,MAAO,CACLyrB,gBAAiB,eAGlB/C,EAAEoB,gEAyBjCvX,GACd+S,KAAK2E,SAAS,CACZJ,MAAOZ,EAAU3D,KAAKsE,MAAMC,MAAOtX,8CAItB2I,EAAI3I,GACnB,IAAMoZ,EAAQvlB,OAAA+iB,EAAA,EAAA/iB,CAAOkf,KAAKsE,MAAMC,OAChC8B,EAASzQ,GAAI2O,MAAQZ,EAAU0C,EAASzQ,GAAI2O,MAAOtX,GACnD+S,KAAK2E,SAAS,CACZJ,MAAO8B,6CAIMC,EAAKC,EAAKtZ,GACzB,IAAMoZ,EAAQvlB,OAAA+iB,EAAA,EAAA/iB,CAAOkf,KAAKsE,MAAMC,OAChC8B,EAASC,GAAK/B,MAAMgC,GAAKhC,MAAQZ,EAC/B0C,EAASC,GAAK/B,MAAMgC,GAAKhC,MACzBtX,GAEF+S,KAAK2E,SAAS,CACZJ,MAAO8B,WA/KQ3F,sBCCf8F,GCDe9F,YCOAA,YCLAA,YHDR,CACX,CACE9K,GAAI,EACJ7b,QAAS0qB,EAAAtD,EAAA7V,cAAA,0BACR,CACDsK,GAAI,EACJ6Q,MAAO,YACP1sB,QAAS0qB,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,eAAcinB,EAAAtD,EAAA7V,cAAA,SAAOG,KAAK,SAASgZ,EAAAtD,EAAA7V,cAAA,SAAOG,KAAK,WACtE,CACDmK,GAAI,EACJ6Q,MAAO,QACP1sB,QAAS0qB,EAAAtD,EAAA7V,cAAA,SAAOG,KAAK,WACpB,CACDmK,GAAI,EACJ6Q,MAAO,UACP1sB,QAAS0qB,EAAAtD,EAAA7V,cAAA,YAAUob,KAAK,UAAU9Q,GAAG,GAAG+Q,KAAK,KAAKC,KAAK,QAEzD,CACEhR,GAAI,EACJ6Q,MAAO,QACP1sB,QACE0qB,EAAAtD,EAAA7V,cAAA,WACEmZ,EAAAtD,EAAA7V,cAAA,WAAKmZ,EAAAtD,EAAA7V,cAAA,aAAOmZ,EAAAtD,EAAA7V,cAAA,SAAOG,KAAK,QAAQib,KAAK,MAAhC,cACLjC,EAAAtD,EAAA7V,cAAA,WAAKmZ,EAAAtD,EAAA7V,cAAA,aAAOmZ,EAAAtD,EAAA7V,cAAA,SAAOG,KAAK,QAAQib,KAAK,MAAhC,cACLjC,EAAAtD,EAAA7V,cAAA,WAAKmZ,EAAAtD,EAAA7V,cAAA,aAAOmZ,EAAAtD,EAAA7V,cAAA,SAAOG,KAAK,QAAQib,KAAK,MAAhC,cACLjC,EAAAtD,EAAA7V,cAAA,WAAKmZ,EAAAtD,EAAA7V,cAAA,aAAOmZ,EAAAtD,EAAA7V,cAAA,SAAOG,KAAK,QAAQib,KAAK,MAAhC,cACLjC,EAAAtD,EAAA7V,cAAA,WAAKmZ,EAAAtD,EAAA7V,cAAA,aAAOmZ,EAAAtD,EAAA7V,cAAA,SAAOG,KAAK,QAAQib,KAAK,MAAhC,gBAGR,CACD9Q,GAAI,EACJ6Q,MAAO,UACP1sB,QAAU0qB,EAAAtD,EAAA7V,cAAA,cACRmZ,EAAAtD,EAAA7V,cAAA,UAAQ/H,MAAM,KAAd,YACAkhB,EAAAtD,EAAA7V,cAAA,UAAQ/H,MAAM,IAAIsjB,UAAQ,GAA1B,YACApC,EAAAtD,EAAA7V,cAAA,UAAQ/H,MAAM,KAAd,YACAkhB,EAAAtD,EAAA7V,cAAA,UAAQ/H,MAAM,KAAd,cAGF,CACAqS,GAAI,EACJ6Q,MAAO,WACP1sB,QACE0qB,EAAAtD,EAAA7V,cAAA,WACEmZ,EAAAtD,EAAA7V,cAAA,WAAKmZ,EAAAtD,EAAA7V,cAAA,aAAOmZ,EAAAtD,EAAA7V,cAAA,SAAOG,KAAK,WAAWib,KAAK,MAAnC,cACLjC,EAAAtD,EAAA7V,cAAA,WAAKmZ,EAAAtD,EAAA7V,cAAA,aAAOmZ,EAAAtD,EAAA7V,cAAA,SAAOG,KAAK,WAAWib,KAAK,MAAnC,cACLjC,EAAAtD,EAAA7V,cAAA,WAAKmZ,EAAAtD,EAAA7V,cAAA,aAAOmZ,EAAAtD,EAAA7V,cAAA,SAAOG,KAAK,WAAWib,KAAK,MAAnC,cACLjC,EAAAtD,EAAA7V,cAAA,WAAKmZ,EAAAtD,EAAA7V,cAAA,aAAOmZ,EAAAtD,EAAA7V,cAAA,SAAOG,KAAK,WAAWib,KAAK,MAAnC,cACLjC,EAAAtD,EAAA7V,cAAA,WAAKmZ,EAAAtD,EAAA7V,cAAA,aAAOmZ,EAAAtD,EAAA7V,cAAA,SAAOG,KAAK,WAAWib,KAAK,MAAnC,gBAGR,CACD9Q,GAAI,EACJ7b,QACE0qB,EAAAtD,EAAA7V,cAAA,WACEmZ,EAAAtD,EAAA7V,cAAA,UAAQ9N,UAAU,sBAAlB,cAyDOspB,cAlDb,SAAAA,IAAc,IAAAhH,EAAA,OAAAhf,OAAAqjB,EAAA,EAAArjB,CAAAkf,KAAA8G,IACZhH,EAAAhf,OAAAsjB,EAAA,EAAAtjB,CAAAkf,KAAAlf,OAAAujB,EAAA,EAAAvjB,CAAAgmB,GAAAhoB,KAAAkhB,QACK+G,aAAejH,EAAKiH,aAAazG,KAAlBxf,OAAAglB,EAAA,EAAAhlB,CAAAgf,IACpBA,EAAK3H,OAAS2H,EAAK3H,OAAOmI,KAAZxf,OAAAglB,EAAA,EAAAhlB,CAAAgf,IAEdA,EAAKwE,MAAQ,CACXkC,QANU1G,wEAWZ,OACE2E,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,aACbinB,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,QACbinB,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CACEhqB,MAAO,CAAEssB,cAAe,SACxBrS,UAAU,aACV5D,UAAU,kBACVoH,OAAQ6H,KAAK7H,OACbnJ,oBAAoB,UACnBgR,KAAK+G,aAAa/G,KAAKsE,MAAMkC,wCAOjC/G,GACL,OAAOO,KAAK2E,SAAS,CAAE6B,KAAM7C,EAAU3D,KAAKsE,MAAMkC,KAAM/G,0CAG7C+G,GACX,OAAOA,EAAK9oB,IAAI,SAAColB,GACf,OACE2B,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAW3D,IAAK+B,EAAKlN,IACnB6O,EAAAtD,EAAA7V,cAAA,OACE9N,UAAS,aACTinB,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,SACbinB,EAAAtD,EAAA7V,cAAA,YAAOwX,EAAK2D,QAEdhC,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,SACZslB,EAAK/oB,oBA1CD2mB,aI9DbuG,EAAK,k4BAILC,EAAc,CAAC,QAAS,QAAS,cAAe,WAEhDC,EAAa,CACjB,QACA,QACA,SACA,iBACA,YACA,WACA,YACA,aACA,QACA,SAEIC,EAAY,WAChB,IAAIC,EAAO/tB,KAAKme,MAAsB,GAAhBne,KAAKguB,UAC3B,OAAOH,EAAWE,IAsILE,cAlIb,SAAAA,IAAc,IAAAzH,EAAA,OAAAhf,OAAAqjB,EAAA,EAAArjB,CAAAkf,KAAAuH,IACZzH,EAAAhf,OAAAsjB,EAAA,EAAAtjB,CAAAkf,KAAAlf,OAAAujB,EAAA,EAAAvjB,CAAAymB,GAAAzoB,KAAAkhB,QAEKwH,aAAe1H,EAAK0H,aAAalH,KAAlBxf,OAAAglB,EAAA,EAAAhlB,CAAAgf,IACpBA,EAAK2H,WAAa3H,EAAK2H,WAAWnH,KAAhBxf,OAAAglB,EAAA,EAAAhlB,CAAAgf,IAClBA,EAAK4H,eAAiB5H,EAAK4H,eAAepH,KAApBxf,OAAAglB,EAAA,EAAAhlB,CAAAgf,IACtBA,EAAKwE,MAAQ,CACXqD,MAAO,CACLlc,KAAM,YACNsH,MAAO,CACLlR,YAAa,cAEfxC,SAAU0kB,EAAc,EAAG,SAAAhF,GAAC,MAAK,CAC/BnJ,GAAE,SAAApa,OAAWujB,GACbtT,KAAM,YACNib,KAAMQ,EAAYnI,GAClBhM,MAAO,CACLlR,YAAa,WACbrE,UAAW,kBAEb6B,SAAU0kB,IAAgC,GAAhBzqB,KAAKguB,UAAeM,UAAY,EAAG,SAAAxB,GAAC,MAAK,CACjE3a,KAAM,YACNmK,GAAE,GAAApa,OAAKujB,GAALvjB,OAAS4qB,GACXrT,MAAO,CACLvV,UAAW,OACX9C,MAAO,CAAEyrB,gBAAiBiB,MAE5B5C,KAAMyC,EAAMY,MAAM,EAAGvuB,KAAKme,MAAsB,IAAhBne,KAAKguB,UAAkB,YA3BnDxH,wEAkCL,IAAAuB,EAAArB,KACP,OACEyE,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,cACbinB,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CACE7iB,YAAY,aACZsW,OAAQ6H,KAAKwH,aACb1Y,mBAAmB,sBACnBmL,gBAAiB,CACflY,kBAAmB,IACnBoY,WAAW,EACX3c,UAAW,uBAGZwiB,KAAKsE,MAAMqD,MAAMtoB,SAAS3B,IAAI,SAAAoqB,GAC7B,OACErD,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAW3D,IAAK+G,EAAOlS,IACrB6O,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAWsqB,EAAO/U,MAAMvV,WAC3BinB,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,sBACbinB,EAAAtD,EAAA7V,cAAA,QAAM9N,UAAU,sBAAhB,UACCsqB,EAAOpB,MAEVjC,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD5jB,OAAA0U,OAAA,GACMsS,EAAO/U,MADb,CAEErR,UAAU,MACVuR,YAAa,SAAAhG,GAAC,OAAI5L,QAAQ0mB,IAAI,eAAgB9a,IAC9CiG,UAAW,SAAAjG,GAAC,OAAI5L,QAAQ0mB,IAAI,WAAY9a,IACxCkL,OAAQ,SAAAlL,GAAC,OAAIoU,EAAKoG,WAAWK,EAAOlS,GAAI3I,IACxCnL,gBAAiB,SAAA3C,GAAK,OACpBkiB,EAAKqG,eAAeI,EAAOlS,GAAIzW,IAEjCwV,UAAU,aACV5D,UAAU,kBACV4M,YAAa,WACXtc,QAAQ0mB,IAAI,cAAeD,EAAOlS,KAEpCgI,YAAa,WACXvc,QAAQ0mB,IAAI,cAAeD,EAAOlS,KAEpCsI,YAAa,SAAA7hB,GAAC,OAAIgF,QAAQ0mB,IAAI,eAAgB1rB,IAC9C4d,gBAAiB,CACflY,kBAAmB,IACnBoY,WAAW,EACX3c,UAAW,gBAEbwqB,iCAAkC,MAEjCF,EAAOzoB,SAAS3B,IAAI,SAAAuqB,GACnB,OACExD,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAW3D,IAAKkH,EAAKrS,IACnB6O,EAAAtD,EAAA7V,cAAA,MAAS2c,EAAKlV,MACZ0R,EAAAtD,EAAA7V,cAAA,SAAI2c,EAAKzD,wDAepB0D,EAAU/oB,GACvB,OAAO6gB,KAAKsE,MAAMqD,MAAMtoB,SAASvB,OAAO,SAAAzB,GAAC,OAAIA,EAAEuZ,KAAOsS,IAAU,GAAG7oB,SACjEF,wCAISsgB,GACX,IAAMkI,EAAQ7mB,OAAO0U,OAAO,GAAIwK,KAAKsE,MAAMqD,OAC3CA,EAAMtoB,SAAWskB,EAAUgE,EAAMtoB,SAAUogB,GAC3CO,KAAK2E,SAAS,CACZgD,6CAIOO,EAAUzI,GACnB,GAAgC,OAA5BA,EAAW/N,cAAmD,OAA1B+N,EAAW3N,WAAqB,CACtE,IAAM6V,EAAQ7mB,OAAO0U,OAAO,GAAIwK,KAAKsE,MAAMqD,OACrCG,EAASH,EAAMtoB,SAASvB,OAAO,SAAAzB,GAAC,OAAIA,EAAEuZ,KAAOsS,IAAU,GACvDC,EAAcR,EAAMtoB,SAAS1B,QAAQmqB,GAErCM,EAAYtnB,OAAO0U,OAAO,GAAIsS,GACpCM,EAAU/oB,SAAWskB,EAAUyE,EAAU/oB,SAAUogB,GACnDkI,EAAMtoB,SAAS6W,OAAOiS,EAAa,EAAGC,GAEtCpI,KAAK2E,SAAS,CACZgD,kBA7HYjH,aCUL2H,cAhCb,SAAAA,IAAc,IAAAvI,EAAA,OAAAhf,OAAAqjB,EAAA,EAAArjB,CAAAkf,KAAAqI,IACZvI,EAAAhf,OAAAsjB,EAAA,EAAAtjB,CAAAkf,KAAAlf,OAAAujB,EAAA,EAAAvjB,CAAAunB,GAAAvpB,KAAAkhB,QACKsE,MAAQ,CACXC,MAAOR,EAAc,GAAI,SAAC5kB,GACxB,MAAO,CACLyW,GAAIzW,EACJqlB,KAAM,YAAcrlB,MANd2gB,wEAWL,IAAAuB,EAAArB,KACP,OACEyE,EAAAtD,EAAA7V,cAAA,WACEmZ,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,eACbinB,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAWnR,SAAS,IAAI4E,OAAQ,SAAAlL,GAAC,OAAIoU,EAAKsD,SAAS,CAAEJ,MAAOZ,EAAUtC,EAAKiD,MAAMC,MAAOtX,OACrF+S,KAAKsE,MAAMC,MAAM7mB,IAAI,SAAArB,GACpB,OACEooB,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAW3D,IAAK1kB,EAAEuZ,IAChB6O,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,kBACZnB,EAAEmoB,mBArBA9D,aCiCR4H,cAhCb,SAAAA,IAAc,IAAAxI,EAAA,OAAAhf,OAAAqjB,EAAA,EAAArjB,CAAAkf,KAAAsI,IACZxI,EAAAhf,OAAAsjB,EAAA,EAAAtjB,CAAAkf,KAAAlf,OAAAujB,EAAA,EAAAvjB,CAAAwnB,GAAAxpB,KAAAkhB,QACKsE,MAAQ,CACXC,MAAOR,EAAc,GAAI,SAAC5kB,GACxB,MAAO,CACLyW,GAAIzW,EACJqlB,KAAM,YAAcrlB,MANd2gB,wEAWL,IAAAuB,EAAArB,KACP,OACEyE,EAAAtD,EAAA7V,cAAA,WACEmZ,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,eACbinB,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAWvV,eAAgB,IAAKwF,UAAU,aAAa5D,UAAU,kBAAkBoH,OAAQ,SAAAlL,GAAC,OAAIoU,EAAKsD,SAAS,CAAEJ,MAAOZ,EAAUtC,EAAKiD,MAAMC,MAAOtX,OAChJ+S,KAAKsE,MAAMC,MAAM7mB,IAAI,SAAArB,GACpB,OACEooB,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAW3D,IAAK1kB,EAAEuZ,IAChB6O,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,kBACZnB,EAAEmoB,mBArBC9D,aCkCT6H,cAjCb,SAAAA,IAAc,IAAAzI,EAAA,OAAAhf,OAAAqjB,EAAA,EAAArjB,CAAAkf,KAAAuI,IACZzI,EAAAhf,OAAAsjB,EAAA,EAAAtjB,CAAAkf,KAAAlf,OAAAujB,EAAA,EAAAvjB,CAAAynB,GAAAzpB,KAAAkhB,QACKsE,MAAQ,CACXC,MAAOR,EAAc,GAAI,SAAC5kB,GACxB,MAAO,CACLyW,GAAIzW,EACJqlB,KAAM,YAAcrlB,MANd2gB,wEAWL,IAAAuB,EAAArB,KACP,OACEyE,EAAAtD,EAAA7V,cAAA,WACEmZ,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,eACbinB,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAW5V,mBAAmB,sBAAsBqJ,OAAQ,SAAAlL,GAAC,OAAIoU,EAAKsD,SAAS,CAAEJ,MAAOZ,EAAUtC,EAAKiD,MAAMC,MAAOtX,OACjH+S,KAAKsE,MAAMC,MAAM7mB,IAAI,SAAArB,GACpB,OACEooB,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAW3D,IAAK1kB,EAAEuZ,IAChB6O,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,kBACbinB,EAAAtD,EAAA7V,cAAA,QAAM9N,UAAU,qBAAqB9C,MAAO,CAAC8tB,MAAM,OAAQvC,QAAQ,WAAnE,UACC5pB,EAAEmoB,mBAtBE9D,aCiCV+H,cAhCb,SAAAA,IAAc,IAAA3I,EAAA,OAAAhf,OAAAqjB,EAAA,EAAArjB,CAAAkf,KAAAyI,IACZ3I,EAAAhf,OAAAsjB,EAAA,EAAAtjB,CAAAkf,KAAAlf,OAAAujB,EAAA,EAAAvjB,CAAA2nB,GAAA3pB,KAAAkhB,QACKsE,MAAQ,CACXC,MAAOR,EAAc,GAAI,SAAC5kB,GACxB,MAAO,CACLyW,GAAIzW,EACJqlB,KAAM,YAAcrlB,MANd2gB,wEAWL,IAAAuB,EAAArB,KACP,OACEyE,EAAAtD,EAAA7V,cAAA,WACEmZ,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,eACbinB,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAW/P,UAAU,gBAAgB5D,UAAU,qBAAqBoH,OAAQ,SAAAlL,GAAC,OAAIoU,EAAKsD,SAAS,CAAEJ,MAAOZ,EAAUtC,EAAKiD,MAAMC,MAAOtX,OACjI+S,KAAKsE,MAAMC,MAAM7mB,IAAI,SAAArB,GACpB,OACEooB,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAW3D,IAAK1kB,EAAEuZ,IAChB6O,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,kBACZnB,EAAEmoB,mBArBC9D,aCiCTgI,cAhCb,SAAAA,IAAc,IAAA5I,EAAA,OAAAhf,OAAAqjB,EAAA,EAAArjB,CAAAkf,KAAA0I,IACZ5I,EAAAhf,OAAAsjB,EAAA,EAAAtjB,CAAAkf,KAAAlf,OAAAujB,EAAA,EAAAvjB,CAAA4nB,GAAA5pB,KAAAkhB,QACKsE,MAAQ,CACXC,MAAOR,EAAc,GAAI,SAAC5kB,GACxB,MAAO,CACLyW,GAAIzW,EACJqlB,KAAM,YAAcrlB,MANd2gB,wEAWL,IAAAuB,EAAArB,KACP,OACEyE,EAAAtD,EAAA7V,cAAA,WACEmZ,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,eACbinB,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAW3iB,kBAAmB,IAAKoW,OAAQ,SAAAlL,GAAC,OAAIoU,EAAKsD,SAAS,CAAEJ,MAAOZ,EAAUtC,EAAKiD,MAAMC,MAAOtX,OAChG+S,KAAKsE,MAAMC,MAAM7mB,IAAI,SAAArB,GACpB,OACEooB,EAAAtD,EAAA7V,cAACoZ,EAAA,UAAD,CAAW3D,IAAK1kB,EAAEuZ,IAChB6O,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,kBACZnB,EAAEmoB,mBArBU9D,aCA3BqE,GCCiBrE,YCDEA,YFAN,CAClBwE,WAAY,OACZxa,KAAM,OAGkBgW,mBGanBiI,GClB0BjI,YDkBjB,SAACkI,GACd,mFAAAptB,OAAoFotB,KAIvEC,EAAA,CACb,CACEC,MAAO,WACPD,MAAO,CAIL,CACEC,MAAO,aAAcC,KAAMxB,EAAOyB,IAAIL,EAAO,aAE/C,CACEG,MAAO,gBAAiBC,KAAMjC,EAAMkC,IAAKL,EAAO,cAGpD,CACAG,MAAO,kBACPD,MAAO,CACL,CACEC,MAAO,gCAAiCC,KAAME,EAAgBD,IAAKL,EAAO,cAE5E,CACEG,MAAO,2BAA4BC,KAAME,EAAwBD,IAAKL,EAAO,cAC5E,CACDG,MAAO,sBAAuBC,KAAM9D,EAAkB+D,IAAKL,EAAO,oBAIxE,CACEG,MAAO,SACPD,MAAO,CACL,CACEC,MAAO,qBAAsBC,KAAM5D,EAAQ6D,IAAKL,EAAO,cAEzD,CACEG,MAAO,iBAAkBC,KAAMpD,EAAMqD,IAAKL,EAAO,cAUvD,CACEG,MAAO,gBACPD,MAAO,CACL,CACEC,MAAO,2BAA4BC,KAAMnD,EAAQoD,IAAKL,EAAO,gBAOnE,CACEG,MAAO,mBACPD,MAAO,CACL,CACEC,MAAO,YAAaC,KAAMV,EAAUW,IAAKL,EAAO,iBAElD,CACEG,MAAO,4BAA6BC,KAAMT,EAAWU,IAAKL,EAAO,kBAEnE,CACEG,MAAO,cAAeC,KAAMR,EAAYS,IAAKL,EAAO,mBAEtD,CACEG,MAAO,yBAA0BC,KAAMN,EAAWO,IAAKL,EAAO,kBAEhE,CACEG,MAAO,2BAA4BC,KAAML,EAAoBM,IAAKL,EAAO,8BEXlEO,cAhFd,SAAAA,IAAc,IAAApJ,EAAA,OAAAhf,OAAAqjB,EAAA,EAAArjB,CAAAkf,KAAAkJ,IACbpJ,EAAAhf,OAAAsjB,EAAA,EAAAtjB,CAAAkf,KAAAlf,OAAAujB,EAAA,EAAAvjB,CAAAooB,GAAApqB,KAAAkhB,QACKmJ,UAAYrJ,EAAKqJ,UAAU7I,KAAfxf,OAAAglB,EAAA,EAAAhlB,CAAAgf,IACjBA,EAAKsJ,WAAatJ,EAAKsJ,WAAW9I,KAAhBxf,OAAAglB,EAAA,EAAAhlB,CAAAgf,IAClBA,EAAKuJ,SAAWvJ,EAAKuJ,SAAS/I,KAAdxf,OAAAglB,EAAA,EAAAhlB,CAAAgf,IAChBA,EAAKwE,MAAQ,CACZgF,SAAS,EACTC,aAAcV,EAAM,GAAGA,MAAM,IAPjB/I,wEAWb,IAAM0J,EAAOxJ,KAAKsE,MAAMiF,aAAaR,KACrC,OACCtE,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,OACdinB,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAS,cAAAhC,OAAgBwkB,KAAKsE,MAAMgF,QAAU,OAAS,IAAMG,QAASzJ,KAAKmJ,WAC/E1E,EAAAtD,EAAA7V,cAAA,aACAmZ,EAAAtD,EAAA7V,cAAA,aACAmZ,EAAAtD,EAAA7V,cAAA,aACAmZ,EAAAtD,EAAA7V,cAAA,cAEDmZ,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAS,aAAAhC,OAAewkB,KAAKsE,MAAMgF,QAAU,GAAK,WACtD7E,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,qBACdinB,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,oBACdinB,EAAAtD,EAAA7V,cAAA,8BACAmZ,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,aAEhBinB,EAAAtD,EAAA7V,cAAA,WACE0U,KAAKoJ,gBAIT3E,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,WACdinB,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAS,UAAAhC,OAAYwkB,KAAKsE,MAAMgF,QAAU,OAAS,KACtDtJ,KAAKsE,MAAMiF,aAAaT,MACzBrE,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,cAAcisB,QAASzJ,KAAKqJ,UAC1C5E,EAAAtD,EAAA7V,cAAA,OAAKoe,IAAI,ydAAydC,IAAI,KACtelF,EAAAtD,EAAA7V,cAAA,wBAGFmZ,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,QACdinB,EAAAtD,EAAA7V,cAACke,EAAD,8CAOQ,IAAAnI,EAAArB,KACZ,OAAO6I,EAAMnrB,IAAI,SAAAksB,GAChB,OACCnF,EAAAtD,EAAA7V,cAAA,OAAK9N,UAAU,gBACdinB,EAAAtD,EAAA7V,cAAA,UAAKse,EAAQd,OACbrE,EAAAtD,EAAA7V,cAAA,UACEse,EAAQf,MAAMnrB,IAAI,SAAAqrB,GAClB,OACCtE,EAAAtD,EAAA7V,cAAA,MAAI9N,UAAS,GAAAhC,OAAK6lB,EAAKiD,MAAMiF,eAAiBR,EAAO,WAAY,IAAMU,QAAS,WAAQpI,EAAKsD,SAAS,CAAE4E,aAAcR,MAAaA,EAAKD,iDAU9I9I,KAAK2E,SAAS,CACb2E,SAAUtJ,KAAKsE,MAAMgF,6CAKtB,IAAMN,EAAMhJ,KAAKsE,MAAMiF,aAAaP,IACpCruB,OAAOkvB,KAAKb,EAAK,eAzEDtI,aCElBoJ,IAASjJ,OAAO4D,EAAAtD,EAAA7V,cAACye,EAAD,MAAU7pB,SAAS8pB,eAAe","file":"static/js/main.744139cf.chunk.js","sourcesContent":["import Container from './src/Container';\r\nimport Draggable from './src/Draggable';\r\n\r\nexport * from 'smooth-dnd';\r\n\r\nexport {\r\n  Container,\r\n  Draggable\r\n}","export const containerInstance = 'smooth-dnd-container-instance';\r\n\r\nexport const defaultGroupName = '@@smooth-dnd-default-group@@';\r\nexport const wrapperClass = 'smooth-dnd-draggable-wrapper';\r\nexport const defaultGrabHandleClass = 'smooth-dnd-default-grap-handle';\r\nexport const animationClass = 'animated';\r\nexport const translationValue = '__smooth_dnd_draggable_translation_value';\r\nexport const visibilityValue = '__smooth_dnd_draggable_visibility_value';\r\nexport const ghostClass = 'smooth-dnd-ghost';\r\n\r\nexport const containerClass = 'smooth-dnd-container';\r\n\r\nexport const extraSizeForInsertion = 'smooth-dnd-extra-size-for-insertion';\r\nexport const stretcherElementClass = 'smooth-dnd-stretcher-element';\r\nexport const stretcherElementInstance = 'smooth-dnd-stretcher-instance';\r\n\r\nexport const isDraggableDetached = 'smoth-dnd-is-draggable-detached';\r\n\r\nexport const disbaleTouchActions = 'smooth-dnd-disable-touch-action';\r\nexport const noUserSelectClass = 'smooth-dnd-no-user-select';\r\n\r\nexport const preventAutoScrollClass = 'smooth-dnd-prevent-auto-scroll-class';\r\n\r\nexport const dropPlaceholderDefaultClass = 'smooth-dnd-drop-preview-default-class';\r\nexport const dropPlaceholderInnerClass = 'smooth-dnd-drop-preview-inner-class';\r\nexport const dropPlaceholderWrapperClass = 'smooth-dnd-drop-preview-constant-class'\r\nexport const dropPlaceholderFlexContainerClass = 'smooth-dnd-drop-preview-flex-container-class'\r\n","import { Rect, Axis, ElementX, ScrollAxis, IContainer } from './interfaces';\r\nimport { containerInstance } from './constants';\r\n\r\nexport const getIntersection = (rect1: Rect, rect2: Rect) => {\r\n  return {\r\n    left: Math.max(rect1.left, rect2.left),\r\n    top: Math.max(rect1.top, rect2.top),\r\n    right: Math.min(rect1.right, rect2.right),\r\n    bottom: Math.min(rect1.bottom, rect2.bottom),\r\n  };\r\n};\r\n\r\nexport const getIntersectionOnAxis = (rect1: Rect, rect2: Rect, axis: Axis) => {\r\n  if (axis === 'x') {\r\n    return {\r\n      left: Math.max(rect1.left, rect2.left),\r\n      top: rect1.top,\r\n      right: Math.min(rect1.right, rect2.right),\r\n      bottom: rect1.bottom,\r\n    };\r\n  } else {\r\n    return {\r\n      left: rect1.left,\r\n      top: Math.max(rect1.top, rect2.top),\r\n      right: rect1.right,\r\n      bottom: Math.min(rect1.bottom, rect2.bottom),\r\n    };\r\n  }\r\n};\r\n\r\nexport const getContainerRect = (element: HTMLElement): Rect => {\r\n  const _rect = element.getBoundingClientRect();\r\n  const rect = {\r\n    left: _rect.left,\r\n    right: _rect.right,\r\n    top: _rect.top,\r\n    bottom: _rect.bottom,\r\n  };\r\n\r\n  if (hasBiggerChild(element, 'x') && !isScrollingOrHidden(element, 'x')) {\r\n    const width = rect.right - rect.left;\r\n    rect.right = rect.right + element.scrollWidth - width;\r\n  }\r\n\r\n  if (hasBiggerChild(element, 'y') && !isScrollingOrHidden(element, 'y')) {\r\n    const height = rect.bottom - rect.top;\r\n    rect.bottom = rect.bottom + element.scrollHeight - height;\r\n  }\r\n\r\n  return rect;\r\n};\r\n\r\nexport const getScrollingAxis = (element: HTMLElement): ScrollAxis | null => {\r\n  const style = window.getComputedStyle(element);\r\n  const overflow = style['overflow'];\r\n  const general = overflow === 'auto' || overflow === 'scroll';\r\n  if (general) return ScrollAxis.xy;\r\n  const overFlowX = style[`overflow-x` as any];\r\n  const xScroll = overFlowX === 'auto' || overFlowX === 'scroll';\r\n  const overFlowY = style[`overflow-y` as any];\r\n  const yScroll = overFlowY === 'auto' || overFlowY === 'scroll';\r\n\r\n  if (xScroll && yScroll) return ScrollAxis.xy;\r\n  if (xScroll) return ScrollAxis.x;\r\n  if (yScroll) return ScrollAxis.y;\r\n  return null;\r\n};\r\n\r\nexport const isScrolling = (element: HTMLElement, axis: Axis) => {\r\n  const style = window.getComputedStyle(element);\r\n  const overflow = style['overflow'];\r\n  const overFlowAxis = style[`overflow-${axis}` as any];\r\n  const general = overflow === 'auto' || overflow === 'scroll';\r\n  const dimensionScroll = overFlowAxis === 'auto' || overFlowAxis === 'scroll';\r\n  return general || dimensionScroll;\r\n};\r\n\r\nexport const isScrollingOrHidden = (element: HTMLElement, axis: Axis) => {\r\n  const style = window.getComputedStyle(element);\r\n  const overflow = style['overflow'];\r\n  const overFlowAxis = style[`overflow-${axis}` as any];\r\n  const general = overflow === 'auto' || overflow === 'scroll' || overflow === 'hidden';\r\n  const dimensionScroll = overFlowAxis === 'auto' || overFlowAxis === 'scroll' || overFlowAxis === 'hidden';\r\n  return general || dimensionScroll;\r\n};\r\n\r\nexport const hasBiggerChild = (element: HTMLElement, axis: Axis) => {\r\n  if (axis === 'x') {\r\n    return element.scrollWidth > element.clientWidth;\r\n  } else {\r\n    return element.scrollHeight > element.clientHeight;\r\n  }\r\n};\r\n\r\nexport const hasScrollBar = (element: HTMLElement, axis: Axis) => {\r\n  return hasBiggerChild(element, axis) && isScrolling(element, axis);\r\n};\r\n\r\nexport const getVisibleRect = (element: HTMLElement, elementRect: Rect) => {\r\n  let currentElement = element;\r\n  let rect = elementRect || getContainerRect(element);\r\n  currentElement = element.parentElement!;\r\n  while (currentElement) {\r\n    if (hasBiggerChild(currentElement, 'x') && isScrollingOrHidden(currentElement, 'x')) {\r\n      rect = getIntersectionOnAxis(rect, currentElement.getBoundingClientRect(), 'x');\r\n    }\r\n\r\n    if (hasBiggerChild(currentElement, 'y') && isScrollingOrHidden(currentElement, 'y')) {\r\n      rect = getIntersectionOnAxis(rect, currentElement.getBoundingClientRect(), 'y');\r\n    }\r\n\r\n    currentElement = currentElement.parentElement!;\r\n  }\r\n\r\n  return rect;\r\n};\r\n\r\nexport const getParentRelevantContainerElement = (element: Element, relevantContainers: IContainer[]) => {\r\n  let current: ElementX = element as ElementX;\r\n\r\n  while (current) {\r\n    if ((current as ElementX)[containerInstance]) {\r\n      const container = current[containerInstance];\r\n      if (relevantContainers.some(p => p === container)) {\r\n        return container;\r\n      }\r\n    }\r\n    current = current.parentElement as ElementX;\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nexport const listenScrollParent = (element: HTMLElement, clb: () => void) => {\r\n  let scrollers: HTMLElement[] = [];\r\n\r\n  setScrollers();\r\n\r\n  function setScrollers() {\r\n    let currentElement = element;\r\n    while (currentElement) {\r\n      if (isScrolling(currentElement, 'x') || isScrolling(currentElement, 'y')) {\r\n        scrollers.push(currentElement);\r\n      }\r\n      currentElement = currentElement.parentElement!;\r\n    }\r\n  }\r\n\r\n  function dispose() {\r\n    stop();\r\n    scrollers = null!;\r\n  };\r\n\r\n  function start() {\r\n    if (scrollers) {\r\n      scrollers.forEach(p => p.addEventListener('scroll', clb));\r\n      window.addEventListener('scroll', clb);\r\n    }\r\n  }\r\n\r\n  function stop() {\r\n    if (scrollers) {\r\n      scrollers.forEach(p => p.removeEventListener('scroll', clb));\r\n      window.removeEventListener('scroll', clb);\r\n    }\r\n  }\r\n\r\n  return {\r\n    dispose,\r\n    start,\r\n    stop\r\n  };\r\n};\r\n\r\nexport const hasParent = (element: HTMLElement, parent: HTMLElement) => {\r\n  let current: HTMLElement | null = element;\r\n  while (current) {\r\n    if (current === parent) {\r\n      return true;\r\n    }\r\n    current = current.parentElement;\r\n  }\r\n  return false;\r\n};\r\n\r\nexport const getParent = (element: Element | null, selector: string) => {\r\n  let current: Element | null = element;\r\n  while (current) {\r\n    if (current.matches(selector)) {\r\n      return current;\r\n    }\r\n    current = current.parentElement;\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\nexport const hasClass = (element: HTMLElement, cls: string) => {\r\n  return (\r\n    element.className\r\n      .split(' ')\r\n      .map(p => p)\r\n      .indexOf(cls) > -1\r\n  );\r\n};\r\n\r\nexport const addClass = (element: Element | null | undefined, cls: string) => {\r\n  if (element) {\r\n    const classes = element.className.split(' ').filter(p => p);\r\n    if (classes.indexOf(cls) === -1) {\r\n      classes.unshift(cls);\r\n      element.className = classes.join(' ');\r\n    }\r\n  }\r\n};\r\n\r\nexport const removeClass = (element: HTMLElement, cls: string) => {\r\n  if (element) {\r\n    const classes = element.className.split(' ').filter(p => p && p !== cls);\r\n    element.className = classes.join(' ');\r\n  }\r\n};\r\n\r\nexport const debounce = (fn: Function, delay: number, immediate: boolean) => {\r\n  let timer: any = null;\r\n  return (...params: any[]) => {\r\n    if (timer) {\r\n      clearTimeout(timer);\r\n    }\r\n    if (immediate && !timer) {\r\n      fn.call(null, ...params);\r\n    } else {\r\n      timer = setTimeout(() => {\r\n        timer = null;\r\n        fn.call(null, ...params);\r\n      }, delay);\r\n    }\r\n  };\r\n};\r\n\r\nexport const removeChildAt = (parent: HTMLElement, index: number) => {\r\n  return parent.removeChild(parent.children[index]);\r\n};\r\n\r\nexport const addChildAt = (parent: HTMLElement, child: HTMLElement, index: number) => {\r\n  if (index >= parent.children.length) {\r\n    parent.appendChild(child);\r\n  } else {\r\n    parent.insertBefore(child, parent.children[index]);\r\n  }\r\n};\r\n\r\nexport const isMobile = () => {\r\n  if (typeof window !== 'undefined') {\r\n    if (\r\n      window.navigator.userAgent.match(/Android/i) ||\r\n      window.navigator.userAgent.match(/webOS/i) ||\r\n      window.navigator.userAgent.match(/iPhone/i) ||\r\n      window.navigator.userAgent.match(/iPad/i) ||\r\n      window.navigator.userAgent.match(/iPod/i) ||\r\n      window.navigator.userAgent.match(/BlackBerry/i) ||\r\n      window.navigator.userAgent.match(/Windows Phone/i)\r\n    ) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n  return false;\r\n};\r\n\r\nexport const clearSelection = () => {\r\n  if (window.getSelection) {\r\n    if (window.getSelection().empty) {\r\n      // Chrome\r\n      window.getSelection().empty();\r\n    } else if (window.getSelection().removeAllRanges) {\r\n      // Firefox\r\n      window.getSelection().removeAllRanges();\r\n    }\r\n  } else if ((window.document as any).selection) {\r\n    // IE?\r\n    (window.document as any).selection.empty();\r\n  }\r\n};\r\n\r\nexport const getElementCursor = (element: Element | null) => {\r\n  if (element) {\r\n    const style = window.getComputedStyle(element);\r\n    if (style) {\r\n      return style.cursor;\r\n    }\r\n  }\r\n\r\n  return null;\r\n};\r\n\r\n\r\nexport const getDistanceToParent = (parent: HTMLElement, child: HTMLElement): number | null => {\r\n  let current: Element | null = child;\r\n  let dist = 0;\r\n  while (current) {\r\n    if (current === parent) {\r\n      return dist;\r\n    }\r\n    dist++;\r\n    current = current.parentElement;\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nexport function isVisible(rect: Rect): boolean {\r\n  return !(rect.bottom <= rect.top || rect.right <= rect.left);\r\n}","import * as constants from './src/constants';\r\nimport container from './src/container';\r\nimport * as dropHandlers from './src/dropHandlers';\r\nimport { SmoothDnDCreator, ContainerOptions } from './src/exportTypes';\r\nimport { ElementX } from './src/interfaces';\r\n\r\nexport * from './src/exportTypes';\r\n\r\nexport {\r\n    container as smoothDnD,\r\n    constants,\r\n    dropHandlers,\r\n};\r\n\r\nfunction delegateProperty(from: any, to:any, propName: string) {\r\n    Object.defineProperty(from, propName, {\r\n        set: (val?: boolean) => {\r\n            to[propName] = val;\r\n        },\r\n        get: () => to[propName]\r\n    })\r\n}\r\n    \r\nconst deprecetedDefaultExport: SmoothDnDCreator = function(element: ElementX, options?: ContainerOptions) {\r\n    console.warn('default export is deprecated. please use named export \"smoothDnD\"');\r\n    return container(element, options);\r\n};\r\n\r\ndeprecetedDefaultExport.cancelDrag = function () {\r\n    container.cancelDrag();\r\n}\r\n\r\ndeprecetedDefaultExport.isDragging = function () {\r\n    return container.isDragging();\r\n}\r\n\r\ndelegateProperty(deprecetedDefaultExport, container, 'useTransformForGhost');\r\ndelegateProperty(deprecetedDefaultExport, container, 'maxScrollSpeed');\r\ndelegateProperty(deprecetedDefaultExport, container, 'wrapChild');\r\ndelegateProperty(deprecetedDefaultExport, container, 'dropHandler');\r\n\r\n\r\nexport default deprecetedDefaultExport;\r\n","import { ContainerOptions } from './exportTypes';\r\n\r\nexport type Position = { x: number; y: number };\r\nexport type MousePosition = { clientX: number; clientY: number };\r\nexport interface Rect {\r\n  left: number;\r\n  right: number;\r\n  top: number;\r\n  bottom: number;\r\n}\r\n\r\nexport type OffsetSize = { offsetWidth: number; offsetHeight: number }\r\n\r\nexport type Axis = 'x' | 'y';\r\nexport enum ScrollAxis {\r\n  x = 'x',\r\n  y = 'y',\r\n  xy = 'xy'\r\n}\r\nexport type Boundary = { begin: number; end: number };\r\nexport type TopLeft = { top: number; left: number };\r\n\r\nexport type Dictionary = { [key: string]: any };\r\nexport type Orientation = 'horizontal' | 'vertical';\r\nexport type ElementX = HTMLElement & Dictionary;\r\n\r\nexport interface ScrolableInfo {\r\n  element: HTMLElement;\r\n  getRect: () => Rect;\r\n  descendants: ScrolableInfo[];\r\n  axis: Axis;\r\n}\r\n\r\n\r\nexport interface DragInfo {\r\n  dragResult: DragResult;\r\n  draggableInfo: DraggableInfo;\r\n}\r\n\r\nexport interface DragResult {\r\n  pos: number;\r\n  addedIndex: number | null;\r\n  removedIndex: number | null;\r\n  elementSize: number;\r\n  shadowBeginEnd: Boundary & { beginAdjustment: number; rect?: TopLeft, dropArea?: Boundary };\r\n  containerBoxChanged?: boolean;\r\n  dropPlaceholderContainer?: HTMLDivElement;\r\n}\r\n\r\nexport interface DraggableInfo {\r\n  invalidateShadow: boolean | null;\r\n  targetElement: HTMLElement | null;\r\n  payload?: any;\r\n  element?: HTMLElement;\r\n  size: OffsetSize;\r\n  container: IContainer;\r\n  elementIndex: number;\r\n  position: Position;\r\n  mousePosition: Position;\r\n  groupName?: string;\r\n  ghostParent: HTMLElement | null;\r\n  relevantContainers: IContainer[];\r\n  cancelDrop?: boolean;\r\n}\r\n\r\nexport interface ContainerProps {\r\n  element: ElementX;\r\n  draggables: ElementX[];\r\n  getOptions: () => ContainerOptions;\r\n  layout: LayoutManager;\r\n}\r\n\r\nexport interface IContainer {\r\n  element: HTMLElement;\r\n  draggables: HTMLElement[];\r\n  layout: LayoutManager;\r\n  isDragRelevant: (sourceContainer: IContainer, payload: any) => boolean;\r\n  dispose: (container: IContainer) => void;\r\n  prepareDrag: (container: IContainer, relevantContainer: IContainer[]) => void;\r\n  handleDrag: (draggableInfo: DraggableInfo) => DragResult | null;\r\n  handleDrop: (draggableInfo: DraggableInfo) => void;\r\n  getDragResult: () => DragResult | null;\r\n  getTranslateCalculator: (info: { dragResult: DragResult }) => any;\r\n  onTranslated: () => void;\r\n  getOptions: () => ContainerOptions;\r\n  setDraggables: () => void;\r\n  fireRemoveElement: () => void;\r\n  getScrollMaxSpeed: () => number | undefined;\r\n  setOptions: (options: ContainerOptions, merge?: boolean) => void;\r\n  shouldUseTransformForGhost: () => boolean;\r\n}\r\n\r\nexport interface GhostInfo {\r\n  topLeft: {\r\n    x: number;\r\n    y: number;\r\n  }\r\n  ghost: HTMLElement;\r\n  centerDelta: Position;\r\n  positionDelta: { left: number; top: number };\r\n}\r\n\r\nexport interface LayoutManager {\r\n  getSize: (element: HTMLElement | OffsetSize) => number;\r\n  getContainerRectangles: () => {\r\n    rect: any;\r\n    visibleRect: any;\r\n    lastVisibleRect: any;\r\n  };\r\n  getBeginEndOfDOMRect: (rect: Rect) => {\r\n    begin: any;\r\n    end: any;\r\n  };\r\n  getBeginEndOfContainer: () => {\r\n    begin: any;\r\n    end: any;\r\n  };\r\n  getBeginEndOfContainerVisibleRect: () => {\r\n    begin: any;\r\n    end: any;\r\n  };\r\n  getBeginEnd: (element: HTMLElement) => {\r\n    begin: number;\r\n    end: number;\r\n  };\r\n  getAxisValue: (position: Position) => Axis;\r\n  setTranslation: (element: ElementX, translation: number) => void;\r\n  getTranslation: (element: ElementX) => number;\r\n  setVisibility: (element: ElementX, isVisible: boolean) => void;\r\n  isVisible: (element: ElementX) => boolean;\r\n  isInVisibleRect: (x: number, y: number) => boolean;\r\n  setSize: (element: HTMLElement | CSSStyleDeclaration, size: string) => void;\r\n  getTopLeftOfElementBegin: (begin: number) => {\r\n    top: number;\r\n    left: number;\r\n  }\r\n  getScrollSize: (element: HTMLElement) => number;\r\n  getScrollValue: (element: HTMLElement) => number;\r\n  setScrollValue: (element: HTMLElement, val: number) => void;\r\n  invalidate: () => void;\r\n  invalidateRects: () => void;\r\n  getPosition: (position: Position) => Rect;\r\n  setBegin: (style: CSSStyleDeclaration, value: string) => void;\r\n}\r\n","import { ContainerOptions } from \"./exportTypes\";\r\n\r\nexport const defaultOptions: ContainerOptions = {\r\n\tgroupName: undefined,\r\n\tbehaviour: 'move', // move | copy\r\n\torientation: 'vertical', // vertical | horizontal\r\n\tgetChildPayload: undefined,\r\n\tanimationDuration: 250,\r\n\tautoScrollEnabled: true,\r\n\tshouldAcceptDrop: undefined,\r\n\tshouldAnimateDrop: undefined,\r\n};","import { extraSizeForInsertion, translationValue, visibilityValue } from './constants';\r\nimport { Dictionary, ElementX, OffsetSize, Orientation, Position, Rect, LayoutManager } from './interfaces';\r\nimport * as Utils from './utils';\r\n\r\nexport interface PropMap {\r\n\t[key: string]: any;\r\n}\r\n\r\nconst horizontalMap: PropMap = {\r\n\tsize: 'offsetWidth',\r\n\tdistanceToParent: 'offsetLeft',\r\n\ttranslate: 'transform',\r\n\tbegin: 'left',\r\n\tend: 'right',\r\n\tdragPosition: 'x',\r\n\tscrollSize: 'scrollWidth',\r\n\toffsetSize: 'offsetWidth',\r\n\tscrollValue: 'scrollLeft',\r\n\tscale: 'scaleX',\r\n\tsetSize: 'width',\r\n\tsetters: {\r\n\t\t'translate': (val: number) => `translate3d(${val}px, 0, 0)`\r\n\t}\r\n};\r\n\r\nconst verticalMap: PropMap = {\r\n\tsize: 'offsetHeight',\r\n\tdistanceToParent: 'offsetTop',\r\n\ttranslate: 'transform',\r\n\tbegin: 'top',\r\n\tend: 'bottom',\r\n\tdragPosition: 'y',\r\n\tscrollSize: 'scrollHeight',\r\n\toffsetSize: 'offsetHeight',\r\n\tscrollValue: 'scrollTop',\r\n\tscale: 'scaleY',\r\n\tsetSize: 'height',\r\n\tsetters: {\r\n\t\t'translate': (val: string) => `translate3d(0,${val}px, 0)`\r\n\t}\r\n};\r\n\r\nfunction orientationDependentProps(map: PropMap) {\r\n\tfunction get(obj: Dictionary, prop: string) {\r\n\t\tconst mappedProp = map[prop];\r\n\t\treturn obj[mappedProp || prop];\r\n\t}\r\n\r\n\tfunction set(obj: Dictionary, prop: string, value: any) {\r\n\t\tobj[map[prop]] = map.setters[prop] ? map.setters[prop](value) : value;\r\n\t}\r\n\r\n\treturn { get, set };\r\n}\r\n\r\n\r\n\r\nexport default function layoutManager(containerElement: ElementX, orientation: Orientation, _animationDuration: number): LayoutManager {\r\n\tcontainerElement[extraSizeForInsertion] = 0;\r\n\tconst map = orientation === 'horizontal' ? horizontalMap : verticalMap;\r\n\tconst propMapper = orientationDependentProps(map);\r\n\tconst values: Dictionary = {\r\n\t\ttranslation: 0\r\n\t};\r\n\r\n\twindow.addEventListener('resize', function () {\r\n\t\tinvalidateContainerRectangles(containerElement);\r\n\t});\r\n\r\n\tsetTimeout(() => {\r\n\t\tinvalidate();\r\n\t}, 10);\r\n\r\n\tfunction invalidate() {\r\n\t\tinvalidateContainerRectangles(containerElement);\r\n\t\tinvalidateContainerScale(containerElement);\r\n\t}\r\n\r\n\tfunction invalidateContainerRectangles(containerElement: ElementX) {\r\n\t\tvalues.rect = Utils.getContainerRect(containerElement);\r\n\t\tconst visibleRect = Utils.getVisibleRect(containerElement, values.rect);\r\n\t\tif (Utils.isVisible(visibleRect)) {\r\n\t\t\tvalues.lastVisibleRect = values.visibleRect;\r\n\t\t}\r\n\r\n\t\tvalues.visibleRect = visibleRect;\r\n\t}\r\n\r\n\tfunction invalidateContainerScale(containerElement: ElementX) {\r\n\t\tconst rect = containerElement.getBoundingClientRect();\r\n\t\tvalues.scaleX = containerElement.offsetWidth ? ((rect.right - rect.left) / containerElement.offsetWidth) : 1;\r\n\t\tvalues.scaleY = containerElement.offsetHeight ? ((rect.bottom - rect.top) / containerElement.offsetHeight) : 1;\r\n\t}\r\n\r\n\tfunction getContainerRectangles() {\r\n\t\treturn {\r\n\t\t\trect: values.rect,\r\n\t\t\tvisibleRect: values.visibleRect,\r\n\t\t\tlastVisibleRect: values.lastVisibleRect\r\n\t\t};\r\n\t}\r\n\r\n\tfunction getBeginEndOfDOMRect(rect: Rect) {\r\n\t\treturn {\r\n\t\t\tbegin: propMapper.get(rect, 'begin'),\r\n\t\t\tend: propMapper.get(rect, 'end')\r\n\t\t};\r\n\t}\r\n\r\n\tfunction getBeginEndOfContainer() {\r\n\t\tconst begin = propMapper.get(values.rect, 'begin') + values.translation;\r\n\t\tconst end = propMapper.get(values.rect, 'end') + values.translation;\r\n\t\treturn { begin, end };\r\n\t}\r\n\r\n\tfunction getBeginEndOfContainerVisibleRect() {\r\n\t\tconst begin = propMapper.get(values.visibleRect, 'begin') + values.translation;\r\n\t\tconst end = propMapper.get(values.visibleRect, 'end') + values.translation;\r\n\t\treturn { begin, end };\r\n\t}\r\n\r\n\tfunction getSize(element: HTMLElement | OffsetSize) {\r\n\t\tconst htmlElement = element as HTMLElement;\r\n\t\tif (htmlElement.tagName) {\r\n\t\t\tconst rect = htmlElement.getBoundingClientRect();\r\n\t\t\treturn orientation === 'vertical' ? rect.bottom - rect.top : rect.right - rect.left;\r\n\t\t}\r\n\r\n\t\treturn propMapper.get(element, 'size') * propMapper.get(values, 'scale');\r\n\t}\r\n\r\n\tfunction getDistanceToOffsetParent(element: ElementX) {\r\n\t\tconst distance = propMapper.get(element, 'distanceToParent') + (element[translationValue] || 0);\r\n\t\treturn distance * propMapper.get(values, 'scale');\r\n\t}\r\n\r\n\tfunction getBeginEnd(element: HTMLElement) {\r\n\t\tconst begin = getDistanceToOffsetParent(element) + (propMapper.get(values.rect, 'begin') + values.translation) - propMapper.get(containerElement, 'scrollValue');\r\n\t\treturn {\r\n\t\t\tbegin,\r\n\t\t\tend: begin + getSize(element) * propMapper.get(values, 'scale')\r\n\t\t};\r\n\t}\r\n\r\n\tfunction setSize(element: HTMLElement | CSSStyleDeclaration, size: string) {\r\n\t\tpropMapper.set(element, 'setSize', size);\r\n\t}\r\n\r\n\tfunction getAxisValue(position: Position) {\r\n\t\treturn propMapper.get(position, 'dragPosition');\r\n\t}\r\n\r\n\tfunction setTranslation(element: ElementX, translation: number) {\r\n\t\tif (!translation) {\r\n\t\t\telement.style.removeProperty('transform');\r\n\t\t} else {\r\n\t\t\tpropMapper.set(element.style, 'translate', translation);\r\n\t\t}\r\n\t\telement[translationValue] = translation;\r\n\t}\r\n\r\n\tfunction getTranslation(element: ElementX) {\r\n\t\treturn element[translationValue];\r\n\t}\r\n\r\n\tfunction setVisibility(element: ElementX, isVisible: boolean) {\r\n\t\tif (element[visibilityValue] === undefined || element[visibilityValue] !== isVisible) {\r\n\t\t\tif (isVisible) {\r\n\t\t\t\telement.style.removeProperty('visibility');\r\n\t\t\t} else {\r\n\t\t\t\telement.style.visibility = 'hidden';\r\n\t\t\t}\r\n\t\t\telement[visibilityValue] = isVisible;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction isVisible(element: ElementX) {\r\n\t\treturn element[visibilityValue] === undefined || element[visibilityValue];\r\n\t}\r\n\r\n\tfunction isInVisibleRect(x: number, y: number) {\r\n\t\tlet { left, top, right, bottom } = values.visibleRect;\r\n\r\n\t\t// if there is no wrapper in rect size will be 0 and wont accept any drop\r\n\t\t// so make sure at least there is 30px difference\r\n\t\tif (bottom - top < 2) {\r\n\t\t\tbottom = top + 30;\r\n\t\t}\r\n\t\tconst containerRect = values.rect;\r\n\t\tif (orientation === 'vertical') {\r\n\t\t\treturn x > containerRect.left && x < containerRect.right && y > top && y < bottom;\r\n\t\t} else {\r\n\t\t\treturn x > left && x < right && y > containerRect.top && y < containerRect.bottom;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getTopLeftOfElementBegin(begin: number) {\r\n\t\tlet top = 0;\r\n\t\tlet left = 0;\r\n\t\tif (orientation === 'horizontal') {\r\n\t\t\tleft = begin;\r\n\t\t\ttop = values.rect.top;\r\n\t\t} else {\r\n\t\t\tleft = values.rect.left;\r\n\t\t\ttop = begin;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\ttop, left\r\n\t\t};\r\n\t}\r\n\r\n\tfunction getScrollSize(element: HTMLElement) {\r\n\t\treturn propMapper.get(element, 'scrollSize');\r\n\t}\r\n\r\n\tfunction getScrollValue(element: HTMLElement) {\r\n\t\treturn propMapper.get(element, 'scrollValue');\r\n\t}\r\n\r\n\tfunction setScrollValue(element: HTMLElement, val: number) {\r\n\t\treturn propMapper.set(element, 'scrollValue', val);\r\n\t}\r\n\r\n\tfunction getPosition(position: Position) {\r\n\t\treturn getAxisValue(position);\r\n\t}\r\n\r\n\tfunction invalidateRects() {\r\n\t\tinvalidateContainerRectangles(containerElement);\r\n\t}\r\n\r\n\tfunction setBegin(style: CSSStyleDeclaration, value: string) {\r\n\t\tpropMapper.set(style, 'begin', value);\r\n\t}\r\n\r\n\treturn {\r\n\t\tgetSize,\r\n\t\tgetContainerRectangles,\r\n\t\tgetBeginEndOfDOMRect,\r\n\t\tgetBeginEndOfContainer,\r\n\t\tgetBeginEndOfContainerVisibleRect,\r\n\t\tgetBeginEnd,\r\n\t\tgetAxisValue,\r\n\t\tsetTranslation,\r\n\t\tgetTranslation,\r\n\t\tsetVisibility,\r\n\t\tisVisible,\r\n\t\tisInVisibleRect,\r\n\t\tsetSize,\r\n\t\tgetTopLeftOfElementBegin,\r\n\t\tgetScrollSize,\r\n\t\tgetScrollValue,\r\n\t\tsetScrollValue,\r\n\t\tinvalidate,\r\n\t\tinvalidateRects,\r\n\t\tgetPosition,\r\n\t\tsetBegin,\r\n\t};\r\n}","import { DraggableInfo, IContainer, Axis, Rect, ScrollAxis, Position } from \"./interfaces\";\r\nimport { getScrollingAxis, hasClass, getVisibleRect } from \"./utils\";\r\nimport { preventAutoScrollClass } from \"./constants\";\r\n\r\ntype Direction = 'begin' | 'end';\r\n\r\nconst maxSpeed = 1500; // px/s\r\n\r\ninterface Animator {\r\n\tstop: () => void;\r\n\tanimate: (direnction: Direction, speed: number) => void;\r\n}\r\n\r\ninterface ScrollParams {\r\n\tdirection: Direction,\r\n\tspeedFactor: number;\r\n}\r\n\r\ninterface AnimationState {\r\n\tanimator: Animator;\r\n\tscrollParams?: ScrollParams | null;\r\n}\r\n\r\ninterface AxisAnimation {\r\n\tx?: AnimationState;\r\n\ty?: AnimationState;\r\n}\r\n\r\ninterface ScrollerAnimator {\r\n\taxisAnimations: AxisAnimation;\r\n\tscrollerElement: HTMLElement;\r\n\tgetRect: () => Rect;\r\n\tcachedRect?: Rect;\r\n}\r\n\r\nfunction getScrollParams(position: Position, axis: Axis, rect: Rect): ScrollParams | null {\r\n\tconst { left, right, top, bottom } = rect;\r\n\tconst { x, y } = position;\r\n\tif (x < left || x > right || y < top || y > bottom) {\r\n\t\treturn null;\r\n\t}\r\n\r\n\tlet begin;\r\n\tlet end;\r\n\tlet pos;\r\n\tif (axis === 'x') {\r\n\t\tbegin = left;\r\n\t\tend = right;\r\n\t\tpos = x;\r\n\t} else {\r\n\t\tbegin = top;\r\n\t\tend = bottom;\r\n\t\tpos = y;\r\n\t}\r\n\r\n\tconst scrollerSize = end - begin;\r\n\r\n\tconst moveDistance = scrollerSize > 400 ? 100 : scrollerSize / 4;\r\n\tif (end - pos < moveDistance) {\r\n\t\treturn {\r\n\t\t\tdirection: 'end',\r\n\t\t\tspeedFactor: (moveDistance - (end - pos)) / moveDistance\r\n\t\t};\r\n\t} else if (pos - begin < moveDistance) {\r\n\t\treturn {\r\n\t\t\tdirection: 'begin',\r\n\t\t\tspeedFactor: (moveDistance - (pos - begin)) / moveDistance\r\n\t\t};\r\n\t}\r\n\r\n\treturn null;\r\n}\r\n\r\nfunction addScrollValue(element: HTMLElement | Window, axis: Axis, value: number) {\r\n\tif (element) {\r\n\t\tif (element !== window) {\r\n\t\t\tif (axis === 'x') {\r\n\t\t\t\t(element as HTMLElement).scrollLeft += value;\r\n\t\t\t} else {\r\n\t\t\t\t(element as HTMLElement).scrollTop += value;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (axis === 'x') {\r\n\t\t\t\telement.scrollBy(value, 0);\r\n\t\t\t} else {\r\n\t\t\t\telement.scrollBy(0, value);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst createAnimator = (element: HTMLElement, axis: Axis = 'y'): Animator => {\r\n\tlet request: number | null = null;\r\n\tlet startTime: number | null = null;\r\n\tlet direction: Direction | null = null;\r\n\tlet speed: number | null = null;\r\n\r\n\tfunction animate(_direction: Direction, _speed: number) {\r\n\t\tdirection = _direction;\r\n\t\tspeed = _speed;\r\n\t\tstart();\r\n\t}\r\n\r\n\tfunction start() {\r\n\t\tif (request === null) {\r\n\t\t\trequest = requestAnimationFrame((timestamp) => {\r\n\t\t\t\tif (startTime === null) { startTime = timestamp; }\r\n\t\t\t\tconst timeDiff = timestamp - startTime;\r\n\t\t\t\tstartTime = timestamp;\r\n\t\t\t\tlet distanceDiff = (timeDiff / 1000) * speed!;\r\n\t\t\t\tdistanceDiff = direction === 'begin' ? (0 - distanceDiff) : distanceDiff;\r\n\t\t\t\taddScrollValue(element, axis, distanceDiff);\r\n\t\t\t\trequest = null;\r\n\t\t\t\tstart();\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tfunction stop() {\r\n\t\tif (request !== null) {\r\n\t\t\tcancelAnimationFrame(request);\r\n\t\t\trequest = null;\r\n\t\t}\r\n\t\tstartTime = null;\r\n\t}\r\n\r\n\treturn {\r\n\t\tanimate,\r\n\t\tstop\r\n\t};\r\n}\r\n\r\nfunction rectangleGetter(element: HTMLElement) {\r\n\treturn () => {\r\n\t\treturn getVisibleRect(element, element.getBoundingClientRect())\r\n\t}\r\n}\r\n\r\nfunction getScrollerAnimator(container: IContainer): ScrollerAnimator[] {\r\n\tconst scrollerAnimators: ScrollerAnimator[] = [];\r\n\r\n\tlet current: HTMLElement | null = container.element;\r\n\r\n\twhile (current) {\r\n\t\tconst scrollingAxis = getScrollingAxis(current);\r\n\r\n\t\tif (scrollingAxis && !hasClass(current, preventAutoScrollClass)) {\r\n\r\n\t\t\tconst axisAnimations: AxisAnimation = {};\r\n\t\t\tswitch (scrollingAxis) {\r\n\t\t\t\tcase ScrollAxis.xy: {\r\n\t\t\t\t\taxisAnimations.x = {\r\n\t\t\t\t\t\tanimator: createAnimator(current, 'x'),\r\n\t\t\t\t\t}\r\n\t\t\t\t\taxisAnimations.y = {\r\n\t\t\t\t\t\tanimator: createAnimator(current, 'y'),\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase ScrollAxis.x: {\r\n\t\t\t\t\taxisAnimations.x = {\r\n\t\t\t\t\t\tanimator: createAnimator(current, 'x'),\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase ScrollAxis.y: {\r\n\t\t\t\t\taxisAnimations.y = {\r\n\t\t\t\t\t\tanimator: createAnimator(current, 'y'),\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t}\r\n\r\n\t\t\tscrollerAnimators.push({\r\n\t\t\t\taxisAnimations,\r\n\t\t\t\tgetRect: rectangleGetter(current),\r\n\t\t\t\tscrollerElement: current,\r\n\t\t\t})\r\n\t\t}\r\n\t\tcurrent = current.parentElement;\r\n\t}\r\n\treturn scrollerAnimators;\r\n}\r\n\r\nfunction setScrollParams(animatorInfos: ScrollerAnimator[], position: Position) {\r\n\tanimatorInfos.forEach((animator: ScrollerAnimator) => {\r\n\t\tconst { axisAnimations, getRect } = animator;\r\n\t\tconst rect = getRect();\r\n\t\tif (axisAnimations.x) {\r\n\t\t\taxisAnimations.x.scrollParams = getScrollParams(position, 'x', rect)\r\n\t\t\tanimator.cachedRect = rect;\r\n\t\t}\r\n\r\n\t\tif (axisAnimations.y) {\r\n\t\t\taxisAnimations.y.scrollParams = getScrollParams(position, 'y', rect)\r\n\t\t\tanimator.cachedRect = rect;\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction getTopmostScrollAnimator(animatorInfos: ScrollerAnimator[], position: Position): ScrollerAnimator | null {\r\n\tlet current = document.elementFromPoint(position.x, position.y);\r\n\r\n\twhile (current) {\r\n\t\tconst scrollAnimator = animatorInfos.find(p => p.scrollerElement === current);\r\n\t\tif (scrollAnimator) {\r\n\t\t\treturn scrollAnimator;\r\n\t\t}\r\n\r\n\t\tcurrent = current.parentElement;\r\n\t}\r\n\r\n\treturn null;\r\n}\r\n\r\nexport default (containers: IContainer[], maxScrollSpeed = maxSpeed) => {\r\n\tconst animatorInfos = containers.reduce((acc: ScrollerAnimator[], container: IContainer) => {\r\n\t\tconst filteredAnimators = getScrollerAnimator(container).filter(p => {\r\n\t\t\treturn !acc.find(q => q.scrollerElement === p.scrollerElement);\r\n\t\t});\r\n\t\treturn [...acc, ...filteredAnimators];\r\n\t}, []);\r\n\r\n\r\n\treturn ({ draggableInfo, reset }: { draggableInfo?: DraggableInfo; reset?: boolean }) => {\r\n\t\tif (reset) {\r\n\t\t\tanimatorInfos.forEach(p => {\r\n\t\t\t\tp.axisAnimations.x && p.axisAnimations.x.animator.stop();\r\n\t\t\t\tp.axisAnimations.y && p.axisAnimations.y.animator.stop();\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (draggableInfo) {\r\n\t\t\tsetScrollParams(animatorInfos, draggableInfo.mousePosition);\r\n\r\n\t\t\tanimatorInfos.forEach(animator => {\r\n\t\t\t\tconst { x, y } = animator.axisAnimations;\r\n\t\t\t\tif (x) {\r\n\t\t\t\t\tif (x.scrollParams) {\r\n\t\t\t\t\t\tconst { direction, speedFactor } = x.scrollParams;\r\n\t\t\t\t\t\tx.animator.animate(direction, speedFactor * maxScrollSpeed);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tx.animator.stop();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (y) {\r\n\t\t\t\t\tif (y.scrollParams) {\r\n\t\t\t\t\t\tconst { direction, speedFactor } = y.scrollParams;\r\n\t\t\t\t\t\ty.animator.animate(direction, speedFactor * maxScrollSpeed);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ty.animator.stop();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tconst overlappingAnimators = animatorInfos.filter(p => p.cachedRect);\r\n\t\t\tif (overlappingAnimators.length && overlappingAnimators.length > 1) {\r\n\t\t\t\t// stop animations except topmost\r\n\t\t\t\tconst topScrollerAnimator = getTopmostScrollAnimator(overlappingAnimators, draggableInfo.mousePosition);\r\n\r\n\t\t\t\tif (topScrollerAnimator) {\r\n\t\t\t\t\toverlappingAnimators.forEach(p => {\r\n\t\t\t\t\t\tif (p !== topScrollerAnimator) {\r\n\t\t\t\t\t\t\tp.axisAnimations.x && p.axisAnimations.x.animator.stop();\r\n\t\t\t\t\t\t\tp.axisAnimations.y && p.axisAnimations.y.animator.stop();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","import { containerClass, disbaleTouchActions, dropPlaceholderFlexContainerClass, dropPlaceholderInnerClass, dropPlaceholderWrapperClass, ghostClass, noUserSelectClass, stretcherElementClass, wrapperClass, dropPlaceholderDefaultClass } from './constants';\r\nimport { Dictionary } from './interfaces';\r\n\r\nconst verticalWrapperClass = {\r\n\t'overflow': 'hidden',\r\n\t'display': 'block'\r\n}\r\n\r\nconst horizontalWrapperClass = {\r\n\t'height': '100%',\r\n\t'display': 'table-cell',\r\n\t'vertical-align': 'top',\r\n}\r\n\r\nconst stretcherElementHorizontalClass = {\r\n\t'display': 'inline-block'\r\n}\r\n\r\nconst css = {\r\n\t[`.${containerClass}`]: {\r\n\t\t'position': 'relative',\r\n\t\t'min-height': '30px',\r\n\t\t'min-width': '30px'\r\n\t},\r\n\t[`.${containerClass}.horizontal`]: {\r\n\t\t'display': 'table',\r\n\t},\r\n\t[`.${containerClass}.horizontal > .${stretcherElementClass}`]: stretcherElementHorizontalClass,\r\n\t[`.${containerClass}.horizontal > .${wrapperClass}`]: horizontalWrapperClass,\r\n\t[`.${containerClass}.vertical > .${wrapperClass}`]: verticalWrapperClass,\r\n\t[`.${wrapperClass}`]: {\r\n\t\t'box-sizing': 'border-box'\r\n\t},\r\n\t[`.${wrapperClass}.horizontal`]: horizontalWrapperClass,\r\n\t[`.${wrapperClass}.vertical`]: verticalWrapperClass,\r\n\t[`.${wrapperClass}.animated`]: {\r\n\t\t'transition': 'transform ease',\r\n\t},\r\n\t[`.${ghostClass}`]: {\r\n\t\t'box-sizing': 'border-box',\r\n\t\t// 'background-color': 'transparent',\r\n\t\t// '-webkit-font-smoothing': 'subpixel-antialiased'\r\n\t},\r\n\t[`.${ghostClass}.animated`]: {\r\n\t\t'transition': 'all ease-in-out'\r\n\t},\r\n\t[`.${ghostClass} *`]: {\r\n\t\t'pointer-events': 'none'\r\n\t},\r\n\t[`.${disbaleTouchActions} *`]: {\r\n\t\t'touch-action': 'none',\r\n\t\t'-ms-touch-action': 'none'\r\n\t},\r\n\t[`.${noUserSelectClass}`]: {\r\n\t\t'-webkit-touch-callout': 'none',\r\n\t\t'-webkit-user-select': 'none',\r\n\t\t'-khtml-user-select': 'none',\r\n\t\t'-moz-user-select': 'none',\r\n\t\t'-ms-user-select': 'none',\r\n\t\t'user-select': 'none'\r\n\t},\r\n\t[`.${dropPlaceholderInnerClass}`]: {\r\n\t\t'flex': '1'\r\n\t},\r\n\t[`.${containerClass}.horizontal > .${dropPlaceholderWrapperClass}`]: {\r\n\t\t'height': '100%',\r\n\t\t'overflow': 'hidden',\r\n\t\t'display': 'table-cell',\r\n\t\t'vertical-align': 'top',\r\n\t},\r\n\t[`.${containerClass}.vertical > .${dropPlaceholderWrapperClass}`]: {\r\n\t\t'overflow': 'hidden',\r\n\t\t'display': 'block',\r\n\t\t'width': '100%',\r\n\t},\r\n\t[`.${dropPlaceholderFlexContainerClass}`]: {\r\n\t\t'width': '100%',\r\n\t\t'height': '100%',\r\n\t\t'display': 'flex',\r\n\t\t'justify-content': 'stretch',\r\n\t\t'align-items': 'stretch'\r\n\t},\r\n\t[`.${dropPlaceholderDefaultClass}`]: {\r\n\t\t'background-color': 'rgba(150, 150, 150, 0.1)',\r\n  \t'border': '1px solid #ccc',\r\n\t}\r\n};\r\n\r\nfunction convertToCssString(css: Dictionary): string {\r\n\treturn Object.keys(css).reduce((styleString, propName) => {\r\n\t\tconst propValue = css[propName];\r\n\t\tif (typeof (propValue) === 'object') {\r\n\t\t\treturn `${styleString}${propName}{${convertToCssString(propValue)}}`;\r\n\t\t}\r\n\t\treturn `${styleString}${propName}:${propValue};`;\r\n\t}, '');\r\n}\r\n\r\nfunction addStyleToHead() {\r\n\tif (typeof (window) !== 'undefined') {\r\n\t\tconst head = window.document.head || window.document.getElementsByTagName(\"head\")[0];\r\n\t\tconst style = window.document.createElement(\"style\") as any;\r\n\t\tstyle.id = 'smooth-dnd-style-definitions';\r\n\t\tconst cssString = convertToCssString(css);\r\n\t\tstyle.type = 'text/css';\r\n\t\tif (style.styleSheet) {\r\n\t\t\tstyle.styleSheet.cssText = cssString;\r\n\t\t} else {\r\n\t\t\tstyle.appendChild(window.document.createTextNode(cssString));\r\n\t\t}\r\n\r\n\t\thead.appendChild(style);\r\n\t}\r\n}\r\n\r\nfunction addCursorStyleToBody(cursor: string) {\r\n\tif (cursor && typeof (window) !== 'undefined') {\r\n\t\tconst head = window.document.head || window.document.getElementsByTagName(\"head\")[0];\r\n\t\tconst style = window.document.createElement(\"style\") as any;\r\n\t\tconst cssString = convertToCssString({\r\n\t\t\t'body *': {\r\n\t\t\t\tcursor: `${cursor} !important`\r\n\t\t\t}\r\n\t\t});\r\n\t\tstyle.type = 'text/css';\r\n\t\tif (style.styleSheet) {\r\n\t\t\tstyle.styleSheet.cssText = cssString;\r\n\t\t} else {\r\n\t\t\tstyle.appendChild(window.document.createTextNode(cssString));\r\n\t\t}\r\n\r\n\t\thead.appendChild(style);\r\n\r\n\t\treturn style;\r\n\t}\r\n\r\n\treturn null;\r\n}\r\n\r\nfunction removeStyle(styleElement: HTMLStyleElement) {\r\n\tif (styleElement && typeof (window) !== 'undefined') {\r\n\t\tconst head = window.document.head || window.document.getElementsByTagName(\"head\")[0];\r\n\t\thead.removeChild(styleElement);\r\n\t}\r\n}\r\n\r\nexport { addStyleToHead, addCursorStyleToBody, removeStyle };\r\n\r\n","import * as constants from './constants';\r\nimport { defaultOptions } from './defaults';\r\nimport dragScroller from './scroller';\r\nimport { Axis, DraggableInfo, ElementX, GhostInfo, IContainer, MousePosition, Position, TopLeft, Orientation } from './interfaces';\r\nimport './polyfills';\r\nimport { addCursorStyleToBody, addStyleToHead, removeStyle } from './styles';\r\nimport * as Utils from './utils';\r\nimport { ContainerOptions } from './exportTypes';\r\n\r\nconst grabEvents = ['mousedown', 'touchstart'];\r\nconst moveEvents = ['mousemove', 'touchmove'];\r\nconst releaseEvents = ['mouseup', 'touchend'];\r\n\r\nlet dragListeningContainers: IContainer[] = null!;\r\nlet grabbedElement: ElementX | null = null;\r\nlet ghostInfo: GhostInfo = null!;\r\nlet draggableInfo: DraggableInfo = null!;\r\nlet containers: IContainer[] = [];\r\nlet isDragging = false;\r\nlet isCanceling = false;\r\nlet dropAnimationStarted = false;\r\nlet missedDrag = false;\r\nlet handleDrag: (info: DraggableInfo) => boolean = null!;\r\nlet handleScroll: (props: { draggableInfo?: DraggableInfo; reset?: boolean }) => void = null!;\r\nlet sourceContainerLockAxis: Axis | null = null;\r\nlet cursorStyleElement: HTMLStyleElement | null = null;\r\n\r\nconst containerRectableWatcher = watchRectangles();\r\n\r\nconst isMobile = Utils.isMobile();\r\n\r\nfunction listenEvents() {\r\n  if (typeof window !== 'undefined') {\r\n    addGrabListeners();\r\n  }\r\n}\r\n\r\nfunction addGrabListeners() {\r\n  grabEvents.forEach(e => {\r\n    window.document.addEventListener(e, onMouseDown as any, { passive: false } as any);\r\n  });\r\n}\r\n\r\nfunction addMoveListeners() {\r\n  moveEvents.forEach(e => {\r\n    window.document.addEventListener(e, onMouseMove as any, { passive: false } as any);\r\n  });\r\n}\r\n\r\nfunction removeMoveListeners() {\r\n  moveEvents.forEach(e => {\r\n    window.document.removeEventListener(e, onMouseMove as any, { passive: false } as any);\r\n  });\r\n}\r\n\r\nfunction addReleaseListeners() {\r\n  releaseEvents.forEach(e => {\r\n    window.document.addEventListener(e, onMouseUp, { passive: false });\r\n  });\r\n}\r\n\r\nfunction removeReleaseListeners() {\r\n  releaseEvents.forEach(e => {\r\n    window.document.removeEventListener(e, onMouseUp as any, { passive: false } as any);\r\n  });\r\n}\r\n\r\nfunction getGhostParent() {\r\n  if (draggableInfo && draggableInfo.ghostParent) {\r\n    return draggableInfo.ghostParent;\r\n  }\r\n\r\n  if (grabbedElement) {\r\n    return grabbedElement.parentElement || window.document.body;\r\n  } else {\r\n    return window.document.body;\r\n  }\r\n}\r\n\r\nfunction getGhostElement(wrapperElement: HTMLElement, { x, y }: Position, container: IContainer, cursor: string): GhostInfo {\r\n  const wrapperRect = wrapperElement.getBoundingClientRect();\r\n  const { left, top, right, bottom } = wrapperRect;\r\n\r\n  const wrapperVisibleRect = Utils.getIntersection(container.layout.getContainerRectangles().visibleRect, wrapperRect);\r\n\r\n  const midX = wrapperVisibleRect.left + (wrapperVisibleRect.right - wrapperVisibleRect.left) / 2;\r\n  const midY = wrapperVisibleRect.top + (wrapperVisibleRect.bottom - wrapperVisibleRect.top) / 2;\r\n  const ghost: HTMLElement = wrapperElement.cloneNode(true) as HTMLElement;\r\n  ghost.style.zIndex = '1000';\r\n  ghost.style.boxSizing = 'border-box';\r\n  ghost.style.position = 'fixed';\r\n  ghost.style.top = '0px';\r\n  ghost.style.left = '0px';\r\n  ghost.style.transform = null;\r\n  ghost.style.removeProperty('transform');\r\n\r\n  if (container.shouldUseTransformForGhost()) {\r\n    ghost.style.transform = `translate3d(${left}px, ${top}px, 0)`;\r\n  } else {\r\n    ghost.style.top = `${top}px`;\r\n    ghost.style.left = `${left}px`;\r\n  }\r\n\r\n  ghost.style.width = (right - left) + 'px';\r\n  ghost.style.height = (bottom - top) + 'px';\r\n  ghost.style.overflow = 'visible';\r\n  ghost.style.transition = null!;\r\n  ghost.style.removeProperty('transition');\r\n  ghost.style.pointerEvents = 'none';\r\n  ghost.style.userSelect = 'none';\r\n\r\n  if (container.getOptions().dragClass) {\r\n    setTimeout(() => {\r\n      Utils.addClass(ghost.firstElementChild as HTMLElement, container.getOptions().dragClass!);\r\n      const dragCursor = window.getComputedStyle(ghost.firstElementChild!).cursor;\r\n      cursorStyleElement = addCursorStyleToBody(dragCursor!);\r\n    });\r\n  } else {\r\n    cursorStyleElement = addCursorStyleToBody(cursor);\r\n  }\r\n  Utils.addClass(ghost, container.getOptions().orientation || 'vertical');\r\n  Utils.addClass(ghost, constants.ghostClass);\r\n\r\n  return {\r\n    ghost: ghost,\r\n    centerDelta: { x: midX - x, y: midY - y },\r\n    positionDelta: { left: left - x, top: top - y },\r\n    topLeft: {\r\n      x: left,\r\n      y: top\r\n    }\r\n  };\r\n}\r\n\r\nfunction getDraggableInfo(draggableElement: HTMLElement): DraggableInfo {\r\n  const container = containers.filter(p => draggableElement.parentElement === p.element)[0];\r\n  const draggableIndex = container.draggables.indexOf(draggableElement);\r\n  const getGhostParent = container.getOptions().getGhostParent;\r\n  const draggableRect = draggableElement.getBoundingClientRect();\r\n  return {\r\n    container,\r\n    element: draggableElement,\r\n    size: {\r\n      offsetHeight: draggableRect.bottom - draggableRect.top,\r\n      offsetWidth: draggableRect.right - draggableRect.left,\r\n    },\r\n    elementIndex: draggableIndex,\r\n    payload: container.getOptions().getChildPayload ? container.getOptions().getChildPayload!(draggableIndex) : undefined,\r\n    targetElement: null,\r\n    position: { x: 0, y: 0 },\r\n    groupName: container.getOptions().groupName,\r\n    ghostParent: getGhostParent ? getGhostParent() : null,\r\n    invalidateShadow: null,\r\n    mousePosition: null!,\r\n    relevantContainers: null!\r\n  };\r\n}\r\n\r\nfunction handleDropAnimation(callback: Function) {\r\n  function endDrop() {\r\n    Utils.removeClass(ghostInfo.ghost, 'animated');\r\n    ghostInfo!.ghost.style.transitionDuration = null!;\r\n    getGhostParent().removeChild(ghostInfo.ghost);\r\n    callback();\r\n  }\r\n\r\n  function animateGhostToPosition({ top, left }: TopLeft, duration: number, dropClass: string | undefined) {\r\n    Utils.addClass(ghostInfo.ghost, 'animated');\r\n    if (dropClass) {\r\n      Utils.addClass(ghostInfo.ghost.firstElementChild, dropClass);\r\n    }\r\n\r\n    ghostInfo.topLeft.x = left;\r\n    ghostInfo.topLeft.y = top;\r\n    translateGhost(duration);\r\n    setTimeout(function () {\r\n      endDrop();\r\n    }, duration + 20);\r\n  }\r\n\r\n  function shouldAnimateDrop(options: ContainerOptions) {\r\n    return options.shouldAnimateDrop\r\n      ? options.shouldAnimateDrop(draggableInfo.container.getOptions(), draggableInfo.payload)\r\n      : true;\r\n  }\r\n\r\n  function disappearAnimation(duration: number, clb: Function) {\r\n    Utils.addClass(ghostInfo.ghost, 'animated');\r\n    translateGhost(duration, 0.9, true);\r\n    // ghostInfo.ghost.style.transitionDuration = duration + 'ms';\r\n    // ghostInfo.ghost.style.opacity = '0';\r\n    // ghostInfo.ghost.style.transform = 'scale(0.90)';\r\n    setTimeout(function () {\r\n      clb();\r\n    }, duration + 20);\r\n  }\r\n\r\n  if (draggableInfo.targetElement) {\r\n    const container = containers.filter(p => p.element === draggableInfo.targetElement)[0];\r\n    if (shouldAnimateDrop(container.getOptions())) {\r\n      const dragResult = container.getDragResult()!;\r\n      animateGhostToPosition(\r\n        dragResult.shadowBeginEnd.rect!,\r\n        Math.max(150, container.getOptions().animationDuration! / 2),\r\n        container.getOptions().dropClass\r\n      );\r\n    } else {\r\n      endDrop();\r\n    }\r\n  } else {\r\n    const container = containers.filter(p => p === draggableInfo.container)[0];\r\n    if (container) {\r\n      const { behaviour, removeOnDropOut } = container.getOptions();\r\n      if ((behaviour === 'move' || behaviour === 'contain') && (isCanceling || !removeOnDropOut) && container.getDragResult()) {\r\n        const rectangles = container.layout.getContainerRectangles();\r\n\r\n        // container is hidden somehow\r\n        // move ghost back to last seen position\r\n        if (!Utils.isVisible(rectangles.visibleRect) && Utils.isVisible(rectangles.lastVisibleRect)) {\r\n          animateGhostToPosition(\r\n            {\r\n              top: rectangles.lastVisibleRect.top,\r\n              left: rectangles.lastVisibleRect.left\r\n            },\r\n            container.getOptions().animationDuration!,\r\n            container.getOptions().dropClass\r\n          );\r\n        } else {\r\n          const { removedIndex, elementSize } = container.getDragResult()!;\r\n          const layout = container.layout;\r\n          // drag ghost to back\r\n          container.getTranslateCalculator({\r\n            dragResult: {\r\n              removedIndex,\r\n              addedIndex: removedIndex,\r\n              elementSize,\r\n              pos: undefined!,\r\n              shadowBeginEnd: undefined!,\r\n            },\r\n          });\r\n          const prevDraggableEnd =\r\n            removedIndex! > 0\r\n              ? layout.getBeginEnd(container.draggables[removedIndex! - 1]).end\r\n              : layout.getBeginEndOfContainer().begin;\r\n          animateGhostToPosition(\r\n            layout.getTopLeftOfElementBegin(prevDraggableEnd),\r\n            container.getOptions().animationDuration!,\r\n            container.getOptions().dropClass\r\n          );\r\n        }\r\n      } else {\r\n        disappearAnimation(container.getOptions().animationDuration!, endDrop);\r\n      }\r\n    } else {\r\n      // container is disposed due to removal\r\n      disappearAnimation(defaultOptions.animationDuration!, endDrop);\r\n    }\r\n  }\r\n}\r\n\r\nconst handleDragStartConditions = (function handleDragStartConditions() {\r\n  let startEvent: { clientX: number; clientY: number };\r\n  let delay: number;\r\n  let clb: Function;\r\n  let timer: any = null!;\r\n  const moveThreshold = 1;\r\n  const maxMoveInDelay = 5;\r\n\r\n  function onMove(event: MouseEvent & TouchEvent) {\r\n    const { clientX: currentX, clientY: currentY } = getPointerEvent(event);\r\n    if (!delay) {\r\n      if (Math.abs(startEvent.clientX - currentX) > moveThreshold || Math.abs(startEvent.clientY - currentY) > moveThreshold) {\r\n        return callCallback();\r\n      }\r\n    } else {\r\n      if (Math.abs(startEvent.clientX - currentX) > maxMoveInDelay || Math.abs(startEvent.clientY - currentY) > maxMoveInDelay) {\r\n        deregisterEvent();\r\n      }\r\n    }\r\n  }\r\n\r\n  function onUp() {\r\n    deregisterEvent();\r\n  }\r\n  function onHTMLDrag() {\r\n    deregisterEvent();\r\n  }\r\n\r\n  function registerEvents() {\r\n    if (delay) {\r\n      timer = setTimeout(callCallback, delay);\r\n    }\r\n\r\n    moveEvents.forEach(e => window.document.addEventListener(e, onMove as any), {\r\n      passive: false,\r\n    });\r\n    releaseEvents.forEach(e => window.document.addEventListener(e, onUp), {\r\n      passive: false,\r\n    });\r\n    window.document.addEventListener('drag', onHTMLDrag, {\r\n      passive: false,\r\n    });\r\n  }\r\n\r\n  function deregisterEvent() {\r\n    clearTimeout(timer);\r\n    moveEvents.forEach(e => window.document.removeEventListener(e, onMove as any), {\r\n      passive: false,\r\n    });\r\n    releaseEvents.forEach(e => window.document.removeEventListener(e, onUp), {\r\n      passive: false,\r\n    });\r\n    window.document.removeEventListener('drag', onHTMLDrag, {\r\n      passive: false,\r\n    } as any);\r\n  }\r\n\r\n  function callCallback() {\r\n    clearTimeout(timer);\r\n    deregisterEvent();\r\n    clb();\r\n  }\r\n\r\n  return function (_startEvent: MouseEvent & TouchEvent, _delay: number, _clb: Function) {\r\n    startEvent = getPointerEvent(_startEvent);\r\n    delay = typeof _delay === 'number' ? _delay : isMobile ? 200 : 0;\r\n    clb = _clb;\r\n\r\n    registerEvents();\r\n  };\r\n})();\r\n\r\nfunction onMouseDown(event: MouseEvent & TouchEvent) {\r\n  const e = getPointerEvent(event);\r\n  if (!isDragging && (e.button === undefined || e.button === 0)) {\r\n    grabbedElement = Utils.getParent(e.target as Element, '.' + constants.wrapperClass) as ElementX;\r\n    if (grabbedElement) {\r\n      const containerElement = Utils.getParent(grabbedElement, '.' + constants.containerClass);\r\n      const container = containers.filter(p => p.element === containerElement)[0];\r\n      const dragHandleSelector = container.getOptions().dragHandleSelector;\r\n      const nonDragAreaSelector = container.getOptions().nonDragAreaSelector;\r\n\r\n      let startDrag = true;\r\n      if (dragHandleSelector && !Utils.getParent(e.target as Element, dragHandleSelector)) {\r\n        startDrag = false;\r\n      }\r\n\r\n      if (nonDragAreaSelector && Utils.getParent(e.target as Element, nonDragAreaSelector)) {\r\n        startDrag = false;\r\n      }\r\n\r\n      if (startDrag) {\r\n        container.layout.invalidate();\r\n        Utils.addClass(window.document.body, constants.disbaleTouchActions);\r\n        Utils.addClass(window.document.body, constants.noUserSelectClass);\r\n\r\n        const onMouseUp = () => {\r\n          Utils.removeClass(window.document.body, constants.disbaleTouchActions);\r\n          Utils.removeClass(window.document.body, constants.noUserSelectClass);\r\n          window.document.removeEventListener('mouseup', onMouseUp);\r\n        }\r\n\r\n        window.document.addEventListener('mouseup', onMouseUp);\r\n      }\r\n\r\n      if (startDrag) {\r\n        handleDragStartConditions(e, container.getOptions().dragBeginDelay!, () => {\r\n          Utils.clearSelection();\r\n          initiateDrag(e, Utils.getElementCursor(event.target as Element)!);\r\n          addMoveListeners();\r\n          addReleaseListeners();\r\n        });\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction handleMouseMoveForContainer({ clientX, clientY }: MouseEvent & TouchEvent, orientation: Orientation = 'vertical') {\r\n  const beginEnd = draggableInfo.container.layout.getBeginEndOfContainerVisibleRect();\r\n  let mousePos;\r\n  let axis: 'x' | 'y';\r\n  let leftTop: 'left' | 'top';\r\n  let size;\r\n\r\n  if (orientation === 'vertical') {\r\n    mousePos = clientY;\r\n    axis = 'y';\r\n    leftTop = 'top';\r\n    size = draggableInfo.size.offsetHeight;\r\n  } else {\r\n    mousePos = clientX;\r\n    axis = 'x';\r\n    leftTop = 'left';\r\n    size = draggableInfo.size.offsetWidth;\r\n  }\r\n\r\n  const beginBoundary = beginEnd.begin;\r\n  const endBoundary = beginEnd.end - size;\r\n  const positionInBoundary = Math.max(beginBoundary, Math.min(endBoundary, (mousePos + ghostInfo.positionDelta[leftTop])));\r\n\r\n  ghostInfo.topLeft[axis] = positionInBoundary;\r\n  draggableInfo.position[axis] = Math.max(beginEnd.begin, Math.min(beginEnd.end, (mousePos + ghostInfo.centerDelta[axis])));\r\n  draggableInfo.mousePosition[axis] = Math.max(beginEnd.begin, Math.min(beginEnd.end, mousePos));\r\n\r\n  if (draggableInfo.position[axis] < (beginEnd.begin + (size / 2))) {\r\n    draggableInfo.position[axis] = beginEnd.begin + 2;\r\n  }\r\n\r\n  if (draggableInfo.position[axis] > (beginEnd.end - (size / 2))) {\r\n    draggableInfo.position[axis] = beginEnd.end - 2;\r\n  }\r\n}\r\n\r\nfunction onMouseMove(event: MouseEvent & TouchEvent) {\r\n  event.preventDefault();\r\n  const e = getPointerEvent(event);\r\n  if (!draggableInfo) {\r\n    initiateDrag(e, Utils.getElementCursor(event.target as Element)!);\r\n  } else {\r\n    const containerOptions = draggableInfo.container.getOptions();\r\n    const isContainDrag = containerOptions.behaviour === 'contain';\r\n    if (isContainDrag) {\r\n      handleMouseMoveForContainer(e, containerOptions.orientation);\r\n    } else if (sourceContainerLockAxis) {\r\n      if (sourceContainerLockAxis === 'y') {\r\n        ghostInfo.topLeft.y = e.clientY + ghostInfo.positionDelta.top;\r\n        draggableInfo.position.y = e.clientY + ghostInfo.centerDelta.y;\r\n        draggableInfo.mousePosition.y = e.clientY;\r\n      } else if (sourceContainerLockAxis === 'x') {\r\n        ghostInfo.topLeft.x = e.clientX + ghostInfo.positionDelta.left;\r\n        draggableInfo.position.x = e.clientX + ghostInfo.centerDelta.x;\r\n        draggableInfo.mousePosition.x = e.clientX;\r\n      }\r\n    } else {\r\n      ghostInfo.topLeft.x = e.clientX + ghostInfo.positionDelta.left;\r\n      ghostInfo.topLeft.y = e.clientY + ghostInfo.positionDelta.top;\r\n      draggableInfo.position.x = e.clientX + ghostInfo.centerDelta.x;\r\n      draggableInfo.position.y = e.clientY + ghostInfo.centerDelta.y;\r\n      draggableInfo.mousePosition.x = e.clientX;\r\n      draggableInfo.mousePosition.y = e.clientY;\r\n    }\r\n\r\n    translateGhost();\r\n\r\n    if (!handleDrag(draggableInfo)) {\r\n      missedDrag = true;\r\n    } else {\r\n      missedDrag = false;\r\n    }\r\n\r\n    if (missedDrag) {\r\n      debouncedHandleMissedDragFrame();\r\n    }\r\n  }\r\n}\r\n\r\nvar debouncedHandleMissedDragFrame = Utils.debounce(handleMissedDragFrame, 20, false);\r\n\r\nfunction handleMissedDragFrame() {\r\n  if (missedDrag) {\r\n    missedDrag = false;\r\n    handleDragImmediate(draggableInfo, dragListeningContainers);\r\n  }\r\n}\r\n\r\nfunction onMouseUp() {\r\n  removeMoveListeners();\r\n  removeReleaseListeners();\r\n  handleScroll({ reset: true });\r\n\r\n  if (cursorStyleElement) {\r\n    removeStyle(cursorStyleElement);\r\n    cursorStyleElement = null;\r\n  }\r\n  if (draggableInfo) {\r\n    containerRectableWatcher.stop();\r\n    handleMissedDragFrame();\r\n    dropAnimationStarted = true;\r\n    handleDropAnimation(() => {\r\n      isDragging = false; // \r\n      fireOnDragStartEnd(false);\r\n      const containers = dragListeningContainers || [];\r\n\r\n      let containerToCallDrop = containers.shift();\r\n      while (containerToCallDrop !== undefined) {\r\n        containerToCallDrop.handleDrop(draggableInfo);\r\n        containerToCallDrop = containers.shift();\r\n      }\r\n\r\n      dragListeningContainers = null!;\r\n      grabbedElement = null;\r\n      ghostInfo = null!;\r\n      draggableInfo = null!;\r\n      sourceContainerLockAxis = null;\r\n      handleDrag = null!;\r\n      dropAnimationStarted = false;\r\n    });\r\n  }\r\n}\r\n\r\nfunction getPointerEvent(e: TouchEvent & MouseEvent): MouseEvent & TouchEvent {\r\n  return e.touches ? e.touches[0] : e as any;\r\n}\r\n\r\nfunction handleDragImmediate(draggableInfo: DraggableInfo, dragListeningContainers: IContainer[]) {\r\n  let containerBoxChanged = false;\r\n  dragListeningContainers.forEach((p: IContainer) => {\r\n    const dragResult = p.handleDrag(draggableInfo)!;\r\n    containerBoxChanged = !!dragResult.containerBoxChanged || false;\r\n    dragResult.containerBoxChanged = false;\r\n  });\r\n\r\n  if (containerBoxChanged) {\r\n    containerBoxChanged = false;\r\n    requestAnimationFrame(() => {\r\n      containers.forEach(p => {\r\n        p.layout.invalidateRects();\r\n        p.onTranslated();\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\nfunction dragHandler(dragListeningContainers: IContainer[]): (draggableInfo: DraggableInfo) => boolean {\r\n  let targetContainers = dragListeningContainers;\r\n  let animationFrame: number | null = null;\r\n  return function (draggableInfo: DraggableInfo): boolean {\r\n    if (animationFrame === null && isDragging && !dropAnimationStarted) {\r\n      animationFrame = requestAnimationFrame(() => {\r\n        if (isDragging && !dropAnimationStarted) {\r\n          handleDragImmediate(draggableInfo, targetContainers);\r\n          handleScroll({ draggableInfo });\r\n        }\r\n        animationFrame = null;\r\n      })\r\n      return true;\r\n    }\r\n    return false;\r\n  };\r\n}\r\n\r\nfunction getScrollHandler(container: IContainer, dragListeningContainers: IContainer[]) {\r\n  if (container.getOptions().autoScrollEnabled) {\r\n    return dragScroller(dragListeningContainers, container.getScrollMaxSpeed());\r\n  } else {\r\n    return (props: { draggableInfo?: DraggableInfo; reset?: boolean }) => null;\r\n  }\r\n}\r\n\r\nfunction fireOnDragStartEnd(isStart: boolean) {\r\n  containers.forEach(p => {\r\n    const fn = isStart ? p.getOptions().onDragStart : p.getOptions().onDragEnd;\r\n    if (fn) {\r\n      const options: any = {\r\n        isSource: p === draggableInfo.container,\r\n        payload: draggableInfo.payload,\r\n      };\r\n      if (p.isDragRelevant(draggableInfo.container, draggableInfo.payload)) {\r\n        options.willAcceptDrop = true;\r\n      } else {\r\n        options.willAcceptDrop = false;\r\n      }\r\n      fn(options);\r\n    }\r\n  });\r\n}\r\n\r\nfunction initiateDrag(position: MousePosition, cursor: string) {\r\n  if (grabbedElement !== null) {\r\n    isDragging = true;\r\n    const container = (containers.filter(p => grabbedElement!.parentElement === p.element)[0]) as IContainer;\r\n    container.setDraggables();\r\n    sourceContainerLockAxis = container.getOptions().lockAxis ? container.getOptions().lockAxis!.toLowerCase() as Axis : null;\r\n\r\n    draggableInfo = getDraggableInfo(grabbedElement);\r\n    ghostInfo = getGhostElement(\r\n      grabbedElement,\r\n      { x: position.clientX, y: position.clientY },\r\n      draggableInfo.container,\r\n      cursor\r\n    );\r\n    draggableInfo.position = {\r\n      x: position.clientX + ghostInfo.centerDelta.x,\r\n      y: position.clientY + ghostInfo.centerDelta.y,\r\n    };\r\n    draggableInfo.mousePosition = {\r\n      x: position.clientX,\r\n      y: position.clientY,\r\n    };\r\n\r\n    dragListeningContainers = containers.filter(p => p.isDragRelevant(container, draggableInfo.payload));\r\n    draggableInfo.relevantContainers = dragListeningContainers;\r\n    handleDrag = dragHandler(dragListeningContainers);\r\n    if (handleScroll) {\r\n      handleScroll({ reset: true, draggableInfo: undefined! });\r\n    }\r\n    handleScroll = getScrollHandler(container, dragListeningContainers);\r\n    dragListeningContainers.forEach(p => p.prepareDrag(p, dragListeningContainers));\r\n    fireOnDragStartEnd(true);\r\n    handleDrag(draggableInfo);\r\n    getGhostParent().appendChild(ghostInfo.ghost);\r\n\r\n    containerRectableWatcher.start();\r\n  }\r\n}\r\n\r\nlet ghostAnimationFrame: number | null = null;\r\nfunction translateGhost(translateDuration = 0, scale = 1, fadeOut = false) {\r\n  const { ghost, topLeft: { x, y } } = ghostInfo;\r\n  const useTransform = draggableInfo.container ? draggableInfo.container.shouldUseTransformForGhost() : true;\r\n\r\n  let transformString = useTransform ? `translate3d(${x}px,${y}px, 0)` : null;\r\n\r\n  if (scale !== 1) {\r\n    transformString = transformString ? `${transformString} scale(${scale})` : `scale(${scale})`;\r\n  }\r\n\r\n  if (translateDuration > 0) {\r\n    ghostInfo.ghost.style.transitionDuration = translateDuration + 'ms';\r\n    requestAnimationFrame(() => {\r\n      transformString && (ghost.style.transform = transformString);\r\n      if (!useTransform) {\r\n        ghost.style.left = x + 'px';\r\n        ghost.style.top = y + 'px';\r\n      }\r\n      ghostAnimationFrame = null;\r\n      if (fadeOut) {\r\n        ghost.style.opacity = '0';\r\n      }\r\n    })\r\n    return;\r\n  }\r\n\r\n  if (ghostAnimationFrame === null) {\r\n    ghostAnimationFrame = requestAnimationFrame(() => {\r\n      transformString && (ghost.style.transform = transformString);\r\n      if (!useTransform) {\r\n        ghost.style.left = x + 'px';\r\n        ghost.style.top = y + 'px';\r\n      }\r\n      ghostAnimationFrame = null;\r\n      if (fadeOut) {\r\n        ghost.style.opacity = '0';\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerContainer(container: IContainer) {\r\n  containers.push(container);\r\n\r\n  if (isDragging && draggableInfo) {\r\n    if (container.isDragRelevant(draggableInfo.container, draggableInfo.payload)) {\r\n      dragListeningContainers.push(container);\r\n      container.prepareDrag(container, dragListeningContainers);\r\n\r\n      if (handleScroll) {\r\n        handleScroll({ reset: true, draggableInfo: undefined! });\r\n      }\r\n      handleScroll = getScrollHandler(container, dragListeningContainers);\r\n      handleDrag = dragHandler(dragListeningContainers);\r\n      container.handleDrag(draggableInfo);\r\n    }\r\n  }\r\n}\r\n\r\nfunction unregisterContainer(container: IContainer) {\r\n  containers.splice(containers.indexOf(container), 1);\r\n\r\n  if (isDragging && draggableInfo) {\r\n    if (draggableInfo.container === container) {\r\n      container.fireRemoveElement();\r\n    }\r\n\r\n    if (draggableInfo.targetElement === container.element) {\r\n      draggableInfo.targetElement = null;\r\n    }\r\n\r\n    const indexInDragListeners = dragListeningContainers.indexOf(container);\r\n    if (indexInDragListeners > -1) {\r\n      dragListeningContainers.splice(indexInDragListeners, 1);\r\n      if (handleScroll) {\r\n        handleScroll({ reset: true, draggableInfo: undefined! });\r\n      }\r\n      handleScroll = getScrollHandler(container, dragListeningContainers);\r\n      handleDrag = dragHandler(dragListeningContainers);\r\n    }\r\n  }\r\n}\r\n\r\nfunction watchRectangles() {\r\n  let animationHandle: number | null = null;\r\n  let isStarted = false;\r\n  function _start() {\r\n    animationHandle = requestAnimationFrame(() => {\r\n      dragListeningContainers.forEach(p => p.layout.invalidateRects());\r\n      setTimeout(() => {\r\n        if (animationHandle !== null) _start();\r\n      }, 50);\r\n    });\r\n  }\r\n\r\n  function stop() {\r\n    if (animationHandle !== null) {\r\n      cancelAnimationFrame(animationHandle);\r\n      animationHandle = null;\r\n    }\r\n    isStarted = false;\r\n  }\r\n\r\n  return {\r\n    start: () => {\r\n      if (!isStarted) {\r\n        isStarted = true;\r\n        _start();\r\n      }\r\n    },\r\n    stop\r\n  }\r\n}\r\n\r\nfunction cancelDrag() {\r\n  if (isDragging && !isCanceling && !dropAnimationStarted) {\r\n    isCanceling = true;\r\n    missedDrag = false;\r\n\r\n    const outOfBoundsDraggableInfo: DraggableInfo = Object.assign({}, draggableInfo, {\r\n      targetElement: null,\r\n      position: { x: Number.MAX_SAFE_INTEGER, y: Number.MAX_SAFE_INTEGER },\r\n      mousePosition: { x: Number.MAX_SAFE_INTEGER, y: Number.MAX_SAFE_INTEGER },\r\n    });\r\n\r\n    dragListeningContainers.forEach(container => {\r\n      container.handleDrag(outOfBoundsDraggableInfo);\r\n    });\r\n\r\n    draggableInfo.targetElement = null;\r\n    draggableInfo.cancelDrop = true;\r\n\r\n    onMouseUp();\r\n    isCanceling = false;\r\n  }\r\n}\r\n\r\nfunction Mediator() {\r\n  listenEvents();\r\n  return {\r\n    register: function (container: IContainer) {\r\n      registerContainer(container);\r\n    },\r\n    unregister: function (container: IContainer) {\r\n      unregisterContainer(container);\r\n    },\r\n    isDragging: function () {\r\n      return isDragging;\r\n    },\r\n    cancelDrag,\r\n  };\r\n}\r\n\r\nif (typeof window !== 'undefined') {\r\n  addStyleToHead();\r\n}\r\n\r\nexport default Mediator();\r\n","import { animationClass, containerClass, containerInstance, dropPlaceholderFlexContainerClass, dropPlaceholderInnerClass, dropPlaceholderWrapperClass, stretcherElementClass, stretcherElementInstance, translationValue, wrapperClass, dropPlaceholderDefaultClass } from './constants';\r\nimport { defaultOptions } from './defaults';\r\nimport { domDropHandler } from './dropHandlers';\r\nimport { ContainerOptions, SmoothDnD, SmoothDnDCreator, DropPlaceholderOptions } from './exportTypes';\r\nimport { ContainerProps, DraggableInfo, DragInfo, DragResult, ElementX, IContainer, LayoutManager } from './interfaces';\r\nimport layoutManager from './layoutManager';\r\nimport Mediator from './mediator';\r\nimport { addClass, getParent, getParentRelevantContainerElement, hasClass, listenScrollParent, removeClass } from './utils';\r\n\r\nfunction setAnimation(element: HTMLElement, add: boolean, animationDuration = defaultOptions.animationDuration) {\r\n  if (add) {\r\n    addClass(element, animationClass);\r\n    element.style.transitionDuration = animationDuration + 'ms';\r\n  } else {\r\n    removeClass(element, animationClass);\r\n    element.style.removeProperty('transition-duration');\r\n  }\r\n}\r\n\r\nfunction isDragRelevant({ element, getOptions }: ContainerProps) {\r\n  return function (sourceContainer: IContainer, payload: any) {\r\n    const options = getOptions();\r\n\r\n    if (options.shouldAcceptDrop) {\r\n      return options.shouldAcceptDrop(sourceContainer.getOptions(), payload);\r\n    }\r\n    const sourceOptions = sourceContainer.getOptions();\r\n    if (options.behaviour === 'copy') return false;\r\n\r\n    const parentWrapper = getParent(element, '.' + wrapperClass);\r\n    if (parentWrapper === sourceContainer.element) {\r\n      return false;\r\n    }\r\n\r\n    if (sourceContainer.element === element) return true;\r\n    if (sourceOptions.groupName && sourceOptions.groupName === options.groupName) return true;\r\n\r\n    return false;\r\n  };\r\n}\r\n\r\nfunction wrapChild(child: HTMLElement) {\r\n  if (smoothDnD.wrapChild) {\r\n    const div = window.document.createElement('div');\r\n    div.className = `${wrapperClass}`;\r\n    child.parentElement!.insertBefore(div, child);\r\n    div.appendChild(child);\r\n    return div;\r\n  }\r\n\r\n  return child;\r\n}\r\n\r\nfunction wrapChildren(element: HTMLElement) {\r\n  const draggables: ElementX[] = [];\r\n  Array.prototype.forEach.call(element.children, (child: ElementX) => {\r\n    if (child.nodeType === Node.ELEMENT_NODE) {\r\n      let wrapper = child;\r\n      if (!hasClass(child, wrapperClass)) {\r\n        wrapper = wrapChild(child);\r\n      }\r\n      wrapper[translationValue] = 0;\r\n      draggables.push(wrapper);\r\n    } else {\r\n      element.removeChild(child);\r\n    }\r\n  });\r\n  return draggables;\r\n}\r\n\r\nfunction unwrapChildren(element: HTMLElement) {\r\n  if (smoothDnD.wrapChild) {\r\n    Array.prototype.forEach.call(element.children, (child: HTMLElement) => {\r\n      if (child.nodeType === Node.ELEMENT_NODE) {\r\n        if (hasClass(child, wrapperClass)) {\r\n          element.insertBefore(child.firstElementChild as HTMLElement, child);\r\n          element.removeChild(child);\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction findDraggebleAtPos({ layout }: { layout: LayoutManager }) {\r\n  const find = (\r\n    draggables: HTMLElement[],\r\n    pos: number,\r\n    startIndex: number,\r\n    endIndex: number,\r\n    withRespectToMiddlePoints = false\r\n  ): number | null => {\r\n    if (endIndex < startIndex) {\r\n      return startIndex;\r\n    }\r\n    // binary serach draggable\r\n    if (startIndex === endIndex) {\r\n      let { begin, end } = layout.getBeginEnd(draggables[startIndex]);\r\n      // mouse pos is inside draggable\r\n      // now decide which index to return\r\n      // if (pos > begin && pos <= end) {\r\n        if (withRespectToMiddlePoints) {\r\n          return pos < (end + begin) / 2 ? startIndex : startIndex + 1;\r\n        } else {\r\n          return startIndex;\r\n        }\r\n      // } else {\r\n      //   return null;\r\n      // }\r\n    } else {\r\n      const middleIndex = Math.floor((endIndex + startIndex) / 2);\r\n      const { begin, end } = layout.getBeginEnd(draggables[middleIndex]);\r\n      if (pos < begin) {\r\n        return find(draggables, pos, startIndex, middleIndex - 1, withRespectToMiddlePoints);\r\n      } else if (pos > end) {\r\n        return find(draggables, pos, middleIndex + 1, endIndex, withRespectToMiddlePoints);\r\n      } else {\r\n        if (withRespectToMiddlePoints) {\r\n          return pos < (end + begin) / 2 ? middleIndex : middleIndex + 1;\r\n        } else {\r\n          return middleIndex;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  return (draggables: HTMLElement[], pos: number, withRespectToMiddlePoints = false) => {\r\n    return find(draggables, pos, 0, draggables.length - 1, withRespectToMiddlePoints);\r\n  };\r\n}\r\n\r\nfunction resetDraggables({ element, draggables, layout }: ContainerProps) {\r\n  return function () {\r\n    draggables.forEach((p: ElementX) => {\r\n      setAnimation(p, false);\r\n      layout.setTranslation(p, 0);\r\n      layout.setVisibility(p, true);\r\n    });\r\n\r\n    if (element[stretcherElementInstance]) {\r\n      element[stretcherElementInstance].parentNode.removeChild(element[stretcherElementInstance]);\r\n      element[stretcherElementInstance] = null;\r\n    }\r\n  };\r\n}\r\n\r\nfunction setTargetContainer(draggableInfo: DraggableInfo, element: HTMLElement, set = true) {\r\n  if (element && set) {\r\n    draggableInfo.targetElement = element;\r\n  } else {\r\n    if (draggableInfo.targetElement === element) {\r\n      draggableInfo.targetElement = null;\r\n    }\r\n  }\r\n}\r\n\r\nfunction handleDrop({ element, draggables, layout, getOptions }: ContainerProps) {\r\n  const draggablesReset = resetDraggables({ element, draggables, layout, getOptions });\r\n  const dropHandler = (smoothDnD.dropHandler || domDropHandler)({ element, draggables, layout, getOptions });\r\n  return function (draggableInfo: DraggableInfo, { addedIndex, removedIndex }: DragResult, forDispose: boolean = false) {\r\n    draggablesReset();\r\n    // if drop zone is valid => complete drag else do nothing everything will be reverted by draggablesReset()\r\n    if (!draggableInfo.cancelDrop) {\r\n      if (draggableInfo.targetElement || getOptions().removeOnDropOut || forDispose) {\r\n        let actualAddIndex =\r\n          addedIndex !== null ? (removedIndex !== null && removedIndex < addedIndex ? addedIndex - 1 : addedIndex) : null;\r\n        const dropHandlerParams = {\r\n          removedIndex,\r\n          addedIndex: actualAddIndex,\r\n          payload: draggableInfo.payload,\r\n          // droppedElement: draggableInfo.element.firstElementChild,\r\n        };\r\n        dropHandler(dropHandlerParams, getOptions().onDrop);\r\n      }\r\n    }\r\n  };\r\n}\r\n\r\nfunction getContainerProps(element: HTMLElement, getOptions: () => ContainerOptions): ContainerProps {\r\n  const draggables = wrapChildren(element);\r\n  const options = getOptions();\r\n  // set flex classes before layout is inited for scroll listener\r\n  addClass(element, `${containerClass} ${options.orientation}`);\r\n  const layout = layoutManager(element, options.orientation!, options.animationDuration!);\r\n  return {\r\n    element,\r\n    draggables,\r\n    getOptions,\r\n    layout,\r\n  };\r\n}\r\n\r\nfunction getRemovedItem({ element, getOptions }: ContainerProps) {\r\n  let prevRemovedIndex: number | null = null;\r\n  return ({ draggableInfo }: DragInfo) => {\r\n    let removedIndex = prevRemovedIndex;\r\n    if (prevRemovedIndex == null && draggableInfo.container.element === element && getOptions().behaviour !== 'copy') {\r\n      removedIndex = prevRemovedIndex = draggableInfo.elementIndex;\r\n    }\r\n\r\n    return { removedIndex };\r\n  };\r\n}\r\n\r\nfunction setRemovedItemVisibilty({ draggables, layout }: ContainerProps) {\r\n  return ({ dragResult }: DragInfo) => {\r\n    if (dragResult.removedIndex !== null) {\r\n      layout.setVisibility(draggables[dragResult.removedIndex], false);\r\n    }\r\n  };\r\n}\r\n\r\nfunction getPosition({ element, layout }: ContainerProps) {\r\n  return ({ draggableInfo }: DragInfo) => {\r\n    let hitElement = document.elementFromPoint(draggableInfo.position.x, draggableInfo.position.y);\r\n\r\n    // TODO: if center is out of bounds use mouse position for hittest\r\n    // if (!hitElement) {\r\n    //   hitElement = document.elementFromPoint(draggableInfo.mousePosition.x, draggableInfo.mousePosition.y);\r\n    // }\r\n\r\n    if (hitElement) {\r\n      const container: IContainer = getParentRelevantContainerElement(hitElement, draggableInfo.relevantContainers);\r\n      if (container && container.element === element) {\r\n        return {\r\n          pos: layout.getPosition(draggableInfo.position),\r\n        }\r\n      }\r\n    }\r\n\r\n    return {\r\n      pos: null,\r\n    };\r\n  };\r\n}\r\n\r\nfunction getElementSize({ layout }: ContainerProps) {\r\n  let elementSize: number | null = null;\r\n  return ({ draggableInfo, dragResult }: DragInfo) => {\r\n    if (dragResult.pos === null) {\r\n      return (elementSize = null);\r\n    } else {\r\n      elementSize = elementSize || layout.getSize(draggableInfo.size);\r\n    }\r\n    return { elementSize };\r\n  };\r\n}\r\n\r\nfunction handleTargetContainer({ element }: ContainerProps) {\r\n  return ({ draggableInfo, dragResult }: DragInfo) => {\r\n    setTargetContainer(draggableInfo, element, !!dragResult.pos);\r\n  };\r\n}\r\n\r\nfunction getDragInsertionIndex({ draggables, layout }: ContainerProps) {\r\n  const findDraggable = findDraggebleAtPos({ layout });\r\n  return ({ dragResult: { shadowBeginEnd, pos } }: { dragResult: DragResult }) => {\r\n    if (!shadowBeginEnd) {\r\n      const index = findDraggable(draggables, pos, true);\r\n      return index !== null ? index : draggables.length;\r\n    } else {\r\n      if (shadowBeginEnd.begin + shadowBeginEnd.beginAdjustment <= pos && shadowBeginEnd.end >= pos) {\r\n        // position inside ghost\r\n        return null;\r\n      }\r\n    }\r\n\r\n    if (pos < shadowBeginEnd.begin + shadowBeginEnd.beginAdjustment) {\r\n      return findDraggable(draggables, pos);\r\n    } else if (pos > shadowBeginEnd.end) {\r\n      return findDraggable(draggables, pos)! + 1;\r\n    } else {\r\n      return draggables.length;\r\n    }\r\n  };\r\n}\r\n\r\nfunction getDragInsertionIndexForDropZone() {\r\n  return ({ dragResult: { pos } }: DragInfo) => {\r\n    return pos !== null ? { addedIndex: 0 } : { addedIndex: null };\r\n  };\r\n}\r\n\r\nfunction getShadowBeginEndForDropZone({ layout }: ContainerProps) {\r\n  let prevAddedIndex: number | null = null;\r\n  return ({ dragResult: { addedIndex } }: DragInfo) => {\r\n    if (addedIndex !== prevAddedIndex) {\r\n      prevAddedIndex = addedIndex;\r\n      const { begin, end } = layout.getBeginEndOfContainer();\r\n      return {\r\n        shadowBeginEnd: {\r\n          rect: layout.getTopLeftOfElementBegin(begin),\r\n        },\r\n      };\r\n    }\r\n\r\n    return null;\r\n  };\r\n}\r\n\r\nfunction drawDropPlaceholder({ layout, element, getOptions }: ContainerProps) {\r\n  let prevAddedIndex: number | null = null;\r\n  return ({ dragResult: { elementSize, shadowBeginEnd, addedIndex, dropPlaceholderContainer } }: DragInfo) => {\r\n    const options = getOptions();    \r\n    if (options.dropPlaceholder) {\r\n      const { animationDuration, className, showOnTop } = typeof options.dropPlaceholder === 'boolean' ? {} as any as DropPlaceholderOptions : options.dropPlaceholder as DropPlaceholderOptions;\r\n      if (addedIndex !== null) {\r\n        if (!dropPlaceholderContainer) {\r\n          const innerElement = document.createElement('div');\r\n          const flex = document.createElement('div');\r\n          flex.className = dropPlaceholderFlexContainerClass;\r\n          innerElement.className = `${dropPlaceholderInnerClass} ${className || dropPlaceholderDefaultClass}`\r\n          dropPlaceholderContainer = document.createElement('div') as HTMLDivElement;\r\n          dropPlaceholderContainer.className = `${dropPlaceholderWrapperClass}`;\r\n          dropPlaceholderContainer.style.position = 'absolute';\r\n\r\n          if (animationDuration !== undefined) {\r\n            dropPlaceholderContainer.style.transition = `all ${animationDuration}ms ease`;\r\n          }\r\n\r\n          dropPlaceholderContainer.appendChild(flex);\r\n          flex.appendChild(innerElement);\r\n          layout.setSize(dropPlaceholderContainer.style, elementSize + 'px');\r\n\r\n          dropPlaceholderContainer.style.pointerEvents = 'none';\r\n\r\n          if (showOnTop) {\r\n            element.appendChild(dropPlaceholderContainer);\r\n          } else {\r\n            element.insertBefore(dropPlaceholderContainer, element.firstElementChild);\r\n          }\r\n        }\r\n\r\n        if (prevAddedIndex !== addedIndex && shadowBeginEnd.dropArea) {\r\n           layout.setBegin(dropPlaceholderContainer.style, (shadowBeginEnd.dropArea.begin) - layout.getBeginEndOfContainer().begin + 'px');\r\n        }\r\n        prevAddedIndex = addedIndex;\r\n\r\n        return {\r\n          dropPlaceholderContainer\r\n        }\r\n      } else {\r\n        if (dropPlaceholderContainer && prevAddedIndex !== null) {\r\n          element.removeChild(dropPlaceholderContainer!);\r\n        }\r\n        prevAddedIndex = null;\r\n\r\n        return {\r\n          dropPlaceholderContainer: undefined\r\n        }\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n}\r\n\r\nfunction invalidateShadowBeginEndIfNeeded(params: ContainerProps) {\r\n  const shadowBoundsGetter = getShadowBeginEnd(params);\r\n  return ({ draggableInfo, dragResult }: DragInfo) => {\r\n    if (draggableInfo.invalidateShadow) {\r\n      return shadowBoundsGetter({ draggableInfo, dragResult });\r\n    }\r\n    return null;\r\n  };\r\n}\r\n\r\nfunction getNextAddedIndex(params: ContainerProps) {\r\n  const getIndexForPos = getDragInsertionIndex(params);\r\n  return ({ dragResult }: DragInfo) => {\r\n    let index = null;\r\n    if (dragResult.pos !== null) {\r\n      index = getIndexForPos({ dragResult });\r\n      if (index === null) {\r\n        index = dragResult.addedIndex;\r\n      }\r\n    }\r\n    return {\r\n      addedIndex: index,\r\n    };\r\n  };\r\n}\r\n\r\nfunction resetShadowAdjustment() {\r\n  let lastAddedIndex: number | null = null;\r\n  return ({ dragResult: { addedIndex, shadowBeginEnd } }: DragInfo) => {\r\n    if (addedIndex !== lastAddedIndex && lastAddedIndex !== null && shadowBeginEnd) {\r\n      shadowBeginEnd.beginAdjustment = 0;\r\n    }\r\n    lastAddedIndex = addedIndex;\r\n  };\r\n}\r\n\r\nfunction handleInsertionSizeChange({ element, draggables, layout, getOptions }: ContainerProps) {\r\n  let strectherElement: HTMLElement | null = null;\r\n  return function ({ dragResult: { addedIndex, removedIndex, elementSize } }: DragInfo) {\r\n    if (removedIndex === null) {\r\n      if (addedIndex !== null) {\r\n        if (!strectherElement) {\r\n          const containerBeginEnd = layout.getBeginEndOfContainer();\r\n          containerBeginEnd.end = containerBeginEnd.begin + layout.getSize(element);\r\n          const hasScrollBar = layout.getScrollSize(element) > layout.getSize(element);\r\n          const containerEnd = hasScrollBar\r\n            ? containerBeginEnd.begin + layout.getScrollSize(element) - layout.getScrollValue(element)\r\n            : containerBeginEnd.end;\r\n          const lastDraggableEnd =\r\n            draggables.length > 0\r\n              ? layout.getBeginEnd(draggables[draggables.length - 1]).end - draggables[draggables.length - 1][translationValue]\r\n              : containerBeginEnd.begin;\r\n          if (lastDraggableEnd + elementSize > containerEnd) {\r\n            strectherElement = window.document.createElement('div') as HTMLElement;\r\n            strectherElement.className = stretcherElementClass + ' ' + getOptions().orientation;\r\n            const stretcherSize = draggables.length > 0 ? elementSize + lastDraggableEnd - containerEnd : elementSize;\r\n            layout.setSize(strectherElement.style, `${stretcherSize}px`);\r\n            element.appendChild(strectherElement);\r\n            element[stretcherElementInstance] = strectherElement;\r\n            return {\r\n              containerBoxChanged: true,\r\n            };\r\n          }\r\n        }\r\n      } else {\r\n        if (strectherElement) {\r\n          layout.setTranslation(strectherElement, 0);\r\n          let toRemove = strectherElement;\r\n          strectherElement = null;\r\n          element.removeChild(toRemove);\r\n          element[stretcherElementInstance] = null;\r\n          return {\r\n            containerBoxChanged: true,\r\n          };\r\n        }\r\n      }\r\n    }\r\n\r\n    return undefined;\r\n  };\r\n}\r\n\r\nfunction calculateTranslations({ draggables, layout }: ContainerProps) {\r\n  let prevAddedIndex: number | null = null;\r\n  let prevRemovedIndex: number | null = null;\r\n  return function ({ dragResult: { addedIndex, removedIndex, elementSize } }: { dragResult: DragResult }) {\r\n    if (addedIndex !== prevAddedIndex || removedIndex !== prevRemovedIndex) {\r\n      for (let index = 0; index < draggables.length; index++) {\r\n        if (index !== removedIndex) {\r\n          const draggable = draggables[index];\r\n          let translate = 0;\r\n          if (removedIndex !== null && removedIndex < index) {\r\n            translate -= elementSize;\r\n          }\r\n          if (addedIndex !== null && addedIndex <= index) {\r\n            translate += elementSize;\r\n          }\r\n          layout.setTranslation(draggable, translate);\r\n        }\r\n      }\r\n\r\n      prevAddedIndex = addedIndex;\r\n      prevRemovedIndex = removedIndex;\r\n\r\n      return { addedIndex, removedIndex };\r\n    }\r\n\r\n    return undefined;\r\n  };\r\n}\r\n\r\nfunction getShadowBeginEnd({ draggables, layout }: ContainerProps) {\r\n  let prevAddedIndex: number | null = null;\r\n  return ({ draggableInfo, dragResult }: DragInfo) => {\r\n    const { addedIndex, removedIndex, elementSize, pos, shadowBeginEnd } = dragResult;\r\n    if (pos !== null) {\r\n      if (addedIndex !== null && (draggableInfo.invalidateShadow || addedIndex !== prevAddedIndex)) {\r\n        // if (prevAddedIndex) prevAddedIndex = addedIndex;\r\n        let beforeIndex = addedIndex - 1;\r\n        let begin = Number.MIN_SAFE_INTEGER;\r\n        let dropAreaBegin = 0;\r\n        let dropAreaEnd = 0;\r\n        let afterBounds = null;\r\n        let beforeBounds = null;\r\n        if (beforeIndex === removedIndex) {\r\n          beforeIndex--;\r\n        }\r\n        if (beforeIndex > -1) {\r\n          const beforeSize = layout.getSize(draggables[beforeIndex]);\r\n          beforeBounds = layout.getBeginEnd(draggables[beforeIndex]);\r\n          if (elementSize < beforeSize) {\r\n            const threshold = (beforeSize - elementSize) / 2;\r\n            begin = beforeBounds.end - threshold;\r\n          } else {\r\n            begin = beforeBounds.end;\r\n          }\r\n          dropAreaBegin = beforeBounds.end;\r\n        } else {\r\n          beforeBounds = { end: layout.getBeginEndOfContainer().begin };\r\n          dropAreaBegin = layout.getBeginEndOfContainer().begin;\r\n        }\r\n\r\n        let end = Number.MAX_SAFE_INTEGER;\r\n        let afterIndex = addedIndex;\r\n        if (afterIndex === removedIndex) {\r\n          afterIndex++;\r\n        }\r\n        if (afterIndex < draggables.length) {\r\n          const afterSize = layout.getSize(draggables[afterIndex]);\r\n          afterBounds = layout.getBeginEnd(draggables[afterIndex]);\r\n\r\n          if (elementSize < afterSize) {\r\n            const threshold = (afterSize - elementSize) / 2;\r\n            end = afterBounds.begin + threshold;\r\n          } else {\r\n            end = afterBounds.begin;\r\n          }\r\n          dropAreaEnd = afterBounds.begin;\r\n        } else {\r\n          afterBounds = { begin: layout.getContainerRectangles().rect.end };\r\n          dropAreaEnd = layout.getContainerRectangles().rect.end - layout.getContainerRectangles().rect.begin;\r\n        }\r\n\r\n        const shadowRectTopLeft = beforeBounds && afterBounds ? layout.getTopLeftOfElementBegin(beforeBounds.end) : null;\r\n\r\n        prevAddedIndex = addedIndex;\r\n        return {\r\n          shadowBeginEnd: {\r\n            dropArea: {\r\n              begin: dropAreaBegin,\r\n              end: dropAreaEnd,\r\n            },\r\n            begin,\r\n            end,\r\n            rect: shadowRectTopLeft,\r\n            beginAdjustment: shadowBeginEnd ? shadowBeginEnd.beginAdjustment : 0,\r\n          },\r\n        };\r\n\r\n      } else {\r\n        return null;\r\n      }\r\n    } else {\r\n      prevAddedIndex = null;\r\n      return {\r\n        shadowBeginEnd: null,\r\n      };\r\n    }\r\n  };\r\n}\r\n\r\nfunction handleFirstInsertShadowAdjustment() {\r\n  let lastAddedIndex: number | null = null;\r\n  return ({ dragResult: { pos, addedIndex, shadowBeginEnd } }: DragInfo) => {\r\n    if (pos !== null) {\r\n      if (addedIndex != null && lastAddedIndex === null) {\r\n        if (pos < shadowBeginEnd.begin) {\r\n          const beginAdjustment = pos - shadowBeginEnd.begin - 5;\r\n          shadowBeginEnd.beginAdjustment = beginAdjustment;\r\n        }\r\n        lastAddedIndex = addedIndex;\r\n      }\r\n    } else {\r\n      lastAddedIndex = null;\r\n    }\r\n  };\r\n}\r\n\r\nfunction fireDragEnterLeaveEvents({ getOptions }: ContainerProps) {\r\n  let wasDragIn = false;\r\n  const options = getOptions();\r\n  return ({ dragResult: { pos } }: DragInfo) => {\r\n    const isDragIn = !!pos;\r\n    if (isDragIn !== wasDragIn) {\r\n      wasDragIn = isDragIn;\r\n      if (isDragIn) {\r\n        options.onDragEnter && options.onDragEnter();\r\n      } else {\r\n        options.onDragLeave && options.onDragLeave();\r\n      }\r\n    }\r\n\r\n    return undefined;\r\n  };\r\n}\r\n\r\nfunction fireOnDropReady({ getOptions }: ContainerProps) {\r\n  let lastAddedIndex: number | null = null;\r\n  const options = getOptions();\r\n  return ({ dragResult: { addedIndex, removedIndex }, draggableInfo: { payload, element } }: DragInfo) => {\r\n    if (options.onDropReady && addedIndex !== null && lastAddedIndex !== addedIndex) {\r\n      lastAddedIndex = addedIndex;\r\n      let adjustedAddedIndex = addedIndex;\r\n\r\n      if (removedIndex !== null && addedIndex > removedIndex) {\r\n        adjustedAddedIndex--;\r\n      }\r\n\r\n      options.onDropReady({\r\n        addedIndex: adjustedAddedIndex,\r\n        removedIndex,\r\n        payload,\r\n        element: element ? element.firstElementChild as HTMLElement : undefined,\r\n      });\r\n    }\r\n  };\r\n}\r\n\r\nfunction getDragHandler(params: ContainerProps) {\r\n  if (params.getOptions().behaviour === 'drop-zone') {\r\n    // sorting is disabled in container, addedIndex will always be 0 if dropped in\r\n    return compose(params)(\r\n      getRemovedItem,\r\n      setRemovedItemVisibilty,\r\n      getPosition,\r\n      getElementSize,\r\n      handleTargetContainer,\r\n      getDragInsertionIndexForDropZone,\r\n      getShadowBeginEndForDropZone,\r\n      fireDragEnterLeaveEvents,\r\n      fireOnDropReady\r\n    );\r\n  } else {\r\n    return compose(params)(\r\n      getRemovedItem,\r\n      setRemovedItemVisibilty,\r\n      getPosition,\r\n      getElementSize,\r\n      handleTargetContainer,\r\n      invalidateShadowBeginEndIfNeeded,\r\n      getNextAddedIndex,\r\n      resetShadowAdjustment,\r\n      handleInsertionSizeChange,\r\n      calculateTranslations,\r\n      getShadowBeginEnd,\r\n      drawDropPlaceholder,\r\n      handleFirstInsertShadowAdjustment,\r\n      fireDragEnterLeaveEvents,\r\n      fireOnDropReady\r\n    );\r\n  }\r\n}\r\n\r\nfunction getDefaultDragResult() {\r\n  return {\r\n    addedIndex: null,\r\n    removedIndex: null,\r\n    elementSize: null,\r\n    pos: null,\r\n    shadowBeginEnd: null,\r\n  };\r\n}\r\n\r\nfunction compose(params: any) {\r\n  return (...functions: any[]) => {\r\n    const hydratedFunctions = functions.map(p => p(params));\r\n    let result: DragResult | null = null;\r\n    return (draggableInfo: DraggableInfo) => {\r\n      result = hydratedFunctions.reduce((dragResult, fn) => {\r\n        return Object.assign(dragResult, fn({ draggableInfo, dragResult }));\r\n      }, result || getDefaultDragResult());\r\n      return result;\r\n    };\r\n  };\r\n}\r\n\r\n// Container definition begin\r\nfunction Container(element: HTMLElement): (options?: ContainerOptions) => IContainer {\r\n  return function (options?: ContainerOptions): IContainer {\r\n    let containerOptions = Object.assign({}, defaultOptions, options);\r\n    let dragResult: DragResult | null = null;\r\n    let lastDraggableInfo: DraggableInfo | null = null;\r\n    const props = getContainerProps(element, getOptions);\r\n    let dragHandler = getDragHandler(props);\r\n    let dropHandler = handleDrop(props);\r\n    let scrollListener = listenScrollParent(element, onScroll);\r\n\r\n    function processLastDraggableInfo() {\r\n      if (lastDraggableInfo !== null) {\r\n        lastDraggableInfo.invalidateShadow = true;\r\n        dragResult = dragHandler(lastDraggableInfo!);\r\n        lastDraggableInfo.invalidateShadow = false;\r\n      }\r\n    }\r\n\r\n    function setDraggables(draggables: HTMLElement[], element: HTMLElement) {\r\n      const newDraggables = wrapChildren(element);\r\n      for (let i = 0; i < newDraggables.length; i++) {\r\n        draggables[i] = newDraggables[i];\r\n      }\r\n\r\n      for (let i = 0; i < draggables.length - newDraggables.length; i++) {\r\n        draggables.pop();\r\n      }\r\n    }\r\n\r\n    function prepareDrag(container: IContainer, relevantContainers: IContainer[]) {\r\n      const element = container.element;\r\n      const draggables = props.draggables;\r\n      setDraggables(draggables, element);\r\n      container.layout.invalidateRects();\r\n      draggables.forEach(p => setAnimation(p, true, getOptions().animationDuration));\r\n      scrollListener.start();\r\n    }\r\n\r\n    function onScroll() {\r\n      props.layout.invalidateRects();\r\n      processLastDraggableInfo();\r\n    };\r\n\r\n    function dispose(container: IContainer) {\r\n      scrollListener.dispose();\r\n      unwrapChildren(container.element);\r\n    }\r\n\r\n    function setOptions(options: ContainerOptions, merge = true) {\r\n      if (merge === false) {\r\n        containerOptions = Object.assign({}, defaultOptions, options);\r\n      } else {\r\n        containerOptions = Object.assign({}, defaultOptions, containerOptions, options);\r\n      }\r\n    }\r\n\r\n    function getOptions(): ContainerOptions {\r\n      return containerOptions;\r\n    }\r\n\r\n    const container: IContainer = {\r\n      element,\r\n      draggables: props.draggables,\r\n      isDragRelevant: isDragRelevant(props),\r\n      layout: props.layout,\r\n      dispose,\r\n      prepareDrag,\r\n      handleDrag(draggableInfo: DraggableInfo) {\r\n        lastDraggableInfo = draggableInfo;\r\n        dragResult = dragHandler(draggableInfo);\r\n        return dragResult;\r\n      },\r\n      handleDrop(draggableInfo: DraggableInfo) {\r\n        scrollListener.stop();\r\n        if (dragResult && dragResult.dropPlaceholderContainer) {\r\n          element.removeChild(dragResult.dropPlaceholderContainer);\r\n        }\r\n        lastDraggableInfo = null;       \r\n        dragHandler = getDragHandler(props);\r\n        dropHandler(draggableInfo, dragResult!);\r\n        dragResult = null;\r\n      },\r\n      fireRemoveElement() {\r\n        // will be called when container is disposed while dragging so ignore addedIndex\r\n        dropHandler(lastDraggableInfo!, Object.assign({}, dragResult!, { addedIndex: null }), true);\r\n        dragResult = null;\r\n      },\r\n      getDragResult() {\r\n        return dragResult;\r\n      },\r\n      getTranslateCalculator(dragresult: { dragResult: DragResult }) {\r\n        return calculateTranslations(props)(dragresult);\r\n      },\r\n      onTranslated: () => {\r\n        processLastDraggableInfo();\r\n      },\r\n      setDraggables: () => {\r\n        setDraggables(props.draggables, element);\r\n      },\r\n      getScrollMaxSpeed() {\r\n        return smoothDnD.maxScrollSpeed;\r\n      },\r\n      shouldUseTransformForGhost() {\r\n        return smoothDnD.useTransformForGhost === true;\r\n      },\r\n      getOptions,\r\n      setOptions,\r\n    };\r\n\r\n    return container;\r\n  };\r\n}\r\n\r\n// exported part of container\r\nconst smoothDnD: SmoothDnDCreator = function (element: HTMLElement, options?: ContainerOptions): SmoothDnD {\r\n  const containerIniter = Container(element);\r\n  const container = containerIniter(options);\r\n  (element as ElementX)[containerInstance] = container;\r\n  Mediator.register(container);\r\n  return {\r\n    dispose() {\r\n      Mediator.unregister(container);\r\n      container.dispose(container);\r\n    },\r\n    setOptions(options: ContainerOptions, merge?: boolean) {\r\n      container.setOptions(options, merge);\r\n    }\r\n  };\r\n};\r\n\r\n// wrap all draggables by default \r\n// in react,vue,angular this value will be set to false\r\nsmoothDnD.wrapChild = true;\r\nsmoothDnD.cancelDrag = function () {\r\n  Mediator.cancelDrag();\r\n}\r\n\r\nsmoothDnD.isDragging = function () {\r\n  return Mediator.isDragging();\r\n}\r\n\r\nexport default smoothDnD;\r\n","import { addChildAt, removeChildAt } from './utils';\r\nimport {\r\n\twrapperClass,\r\n} from './constants';\r\nimport { ContainerProps } from './interfaces';\r\nimport { DropResult, OnDropCallback } from './exportTypes';\r\n\r\nexport function domDropHandler({ element, draggables }: ContainerProps) {\r\n\treturn (dropResult: DropResult, onDrop: OnDropCallback ) => {\r\n\t\tconst { removedIndex, addedIndex, droppedElement } = dropResult as any;\r\n\t\tlet removedWrapper = null;\r\n\t\tif (removedIndex !== null) {\r\n\t\t\tremovedWrapper = removeChildAt(element, removedIndex);\r\n\t\t\tdraggables.splice(removedIndex, 1);\r\n\t\t}\r\n\r\n\t\tif (addedIndex !== null) {\r\n\t\t\tconst wrapper = window.document.createElement('div');\r\n\t\t\twrapper.className = `${wrapperClass}`;\r\n\t\t\twrapper.appendChild(removedWrapper && removedWrapper.firstElementChild ? removedWrapper.firstElementChild : droppedElement);\r\n\t\t\taddChildAt(element, wrapper, addedIndex);\r\n\t\t\tif (addedIndex >= draggables.length) {\r\n\t\t\t\tdraggables.push(wrapper);\r\n\t\t\t} else {\r\n\t\t\t\tdraggables.splice(addedIndex, 0, wrapper);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (onDrop) {\r\n\t\t\tonDrop(dropResult);\r\n\t\t}\r\n\t};\r\n}\r\n\r\nexport function reactDropHandler() {\r\n\tconst handler = () => {\r\n\t\treturn (dropResult: DropResult, onDrop: OnDropCallback) => {\r\n\t\t\tif (onDrop) {\r\n\t\t\t\tonDrop(dropResult);\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n\treturn {\r\n\t\thandler\r\n\t};\r\n}\r\n","import React, { Component, CSSProperties } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { smoothDnD as container, ContainerOptions, SmoothDnD } from 'smooth-dnd';\r\nimport { dropHandlers } from 'smooth-dnd';\r\n\r\ncontainer.dropHandler = dropHandlers.reactDropHandler().handler;\r\ncontainer.wrapChild = false;\r\n\r\ninterface ContainerProps extends ContainerOptions {\r\n\trender?: (rootRef: React.RefObject<any>) => React.ReactElement;\r\n\tstyle?: CSSProperties;\r\n}\r\n\r\nclass Container extends Component<ContainerProps> {\r\n\tpublic static propTypes = {\r\n\t\tbehaviour: PropTypes.oneOf(['move', 'copy', 'drop-zone', 'contain']),\r\n\t\tgroupName: PropTypes.string,\r\n\t\torientation: PropTypes.oneOf(['horizontal', 'vertical']),\r\n\t\tstyle: PropTypes.object,\r\n\t\tdragHandleSelector: PropTypes.string,\r\n\t\tnonDragAreaSelector: PropTypes.string,\r\n\t\tdragBeginDelay: PropTypes.number,\r\n\t\tanimationDuration: PropTypes.number,\r\n\t\tautoScrollEnabled: PropTypes.bool,\r\n\t\tlockAxis: PropTypes.string,\r\n\t\tdragClass: PropTypes.string,\r\n\t\tdropClass: PropTypes.string,\r\n\t\tonDragStart: PropTypes.func,\r\n\t\tonDragEnd: PropTypes.func,\r\n\t\tonDrop: PropTypes.func,\r\n\t\tgetChildPayload: PropTypes.func,\r\n\t\tshouldAnimateDrop: PropTypes.func,\r\n\t\tshouldAcceptDrop: PropTypes.func,\r\n\t\tonDragEnter: PropTypes.func,\r\n\t\tonDragLeave: PropTypes.func,\r\n\t\trender: PropTypes.func,\r\n\t\tgetGhostParent: PropTypes.func,\r\n    removeOnDropOut: PropTypes.bool,\r\n    dropPlaceholder: PropTypes.oneOfType([\r\n      PropTypes.shape({\r\n        className: PropTypes.string,\r\n        animationDuration: PropTypes.number,\r\n        showOnTop: PropTypes.bool,\r\n      }),\r\n      PropTypes.bool,\r\n    ]),\r\n\t};\r\n\r\n\tpublic static defaultProps = {\r\n\t\tbehaviour: 'move',\r\n\t\torientation: 'vertical',\r\n\t};\r\n\r\n\tprevContainer: null;\r\n\tcontainer: SmoothDnD = null!;\r\n\tcontainerRef: React.RefObject<any> = React.createRef();\r\n  constructor(props: ContainerProps) {\r\n    super(props);\r\n\t\tthis.getContainerOptions = this.getContainerOptions.bind(this);\r\n    this.getContainer = this.getContainer.bind(this);\r\n    this.isObjectTypePropsChanged = this.isObjectTypePropsChanged.bind(this);\r\n    this.prevContainer = null;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.prevContainer = this.getContainer();\r\n    this.container = container(this.getContainer(), this.getContainerOptions());\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.container.dispose();\r\n    this.container = null!;\r\n  }\r\n\r\n  componentDidUpdate(prevProps: ContainerProps) {\r\n    if (this.getContainer()) {\r\n      if (this.prevContainer && this.prevContainer !== this.getContainer()) {\r\n        this.container.dispose();\r\n        this.container = container(this.getContainer(), this.getContainerOptions());\r\n        this.prevContainer = this.getContainer();\r\n        return;\r\n      }\r\n\r\n      if (this.isObjectTypePropsChanged(prevProps)) {\r\n        this.container.setOptions(this.getContainerOptions())\r\n      }\r\n    }\r\n  }\r\n\r\n  isObjectTypePropsChanged(prevProps: ContainerProps) {\r\n    const { render, children, style, ...containerOptions } = this.props;\r\n\r\n    for (const _key in containerOptions) {\r\n      const key = _key as keyof ContainerOptions;\r\n      if (containerOptions.hasOwnProperty(key)) {\r\n        const prop = containerOptions[key];\r\n\r\n        if (typeof prop !== 'function' && prop !== prevProps[key]) {\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  render() {\r\n    if (this.props.render) {\r\n\t\t\treturn this.props.render(this.containerRef);\r\n    } else {\r\n      return (\r\n        <div style={this.props.style} ref={this.containerRef}>\r\n          {this.props.children}\r\n        </div>\r\n      );\r\n    }\r\n\t}\r\n\t\r\n  getContainer() {\r\n\t\treturn this.containerRef.current;\r\n\t}\r\n\r\n  getContainerOptions(): ContainerOptions {\r\n    return Object.keys(this.props).reduce((result: ContainerOptions, key: string) => {\r\n      const optionName = key as keyof ContainerOptions;\r\n      const prop = this.props[optionName];\r\n\r\n      if (typeof prop === 'function') {\r\n        result[optionName] = (...params: any[]) => {\r\n          return (this.props[optionName] as Function)(...params);\r\n        }\r\n      } else {\r\n        result[optionName] = prop;\r\n      }\r\n\r\n      return result;\r\n    },{}) as ContainerOptions;\r\n  }\r\n}\r\n\r\nexport default Container;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { constants } from 'smooth-dnd';\r\nconst {\r\n\twrapperClass\r\n} = constants;\r\n\r\nexport interface DraggableProps {\r\n\trender?: () => React.ReactElement;\r\n\tclassName?: string;\r\n}\r\n\r\nclass Draggable extends Component<DraggableProps> {\r\n\tpublic static propsTypes = {\r\n\t\trender: PropTypes.func,\r\n\t\tclassName: PropTypes.string,\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.props.render) {\r\n\t\t\treturn React.cloneElement(this.props.render(), { className: wrapperClass });\r\n\t\t}\r\n\t\t\r\n\t\tconst clsName = `${this.props.className ? (this.props.className + ' ') : ''}`\r\n\t\treturn (\r\n\t\t\t<div {...this.props} className={`${clsName}${wrapperClass}`} >\r\n\t\t\t\t{this.props.children}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Draggable;","\r\nfunction applyPolyfills() {\r\n  (function (constructor: any) {\r\n    if (constructor && constructor.prototype && !constructor.prototype.matches) {\r\n      constructor.prototype.matches =\r\n        constructor.prototype.matchesSelector ||\r\n        constructor.prototype.mozMatchesSelector ||\r\n        constructor.prototype.msMatchesSelector ||\r\n        constructor.prototype.oMatchesSelector ||\r\n        constructor.prototype.webkitMatchesSelector ||\r\n        function (s: string) {\r\n          var matches = (this.document || this.ownerDocument).querySelectorAll(s),\r\n            i = matches.length;\r\n          while (--i >= 0 && matches.item(i) !== this) { }\r\n          return i > -1;\r\n        };\r\n    }\r\n  })(Element);\r\n\r\n  // Overwrites native 'firstElementChild' prototype.\r\n  // Adds Document & DocumentFragment support for IE9 & Safari.\r\n  // Returns array instead of HTMLCollection.\r\n  (function (constructor: any) {\r\n    if (\r\n      constructor &&\r\n      constructor.prototype &&\r\n      constructor.prototype.firstElementChild == null\r\n    ) {\r\n      Object.defineProperty(constructor.prototype, \"firstElementChild\", {\r\n        get: function () {\r\n          var node,\r\n            nodes = this.childNodes,\r\n            i = 0;\r\n          while ((node = nodes[i++])) {\r\n            if (node.nodeType === 1) {\r\n              return node;\r\n            }\r\n          }\r\n          return null;\r\n        }\r\n      });\r\n    }\r\n  })(Node || Element);\r\n\r\n  // Production steps of ECMA-262, Edition 5, 15.4.4.17\r\n  // Reference: http://es5.github.io/#x15.4.4.17\r\n  if (!Array.prototype.some) {\r\n    Array.prototype.some = function (fun /*, thisArg*/) {\r\n      \"use strict\";\r\n\r\n      if (this == null) {\r\n        throw new TypeError(\"Array.prototype.some called on null or undefined\");\r\n      }\r\n\r\n      if (typeof fun !== \"function\") {\r\n        throw new TypeError();\r\n      }\r\n\r\n      var t = Object(this);\r\n      var len = t.length >>> 0;\r\n\r\n      var thisArg = arguments.length >= 2 ? arguments[1] : void 0;\r\n      for (var i = 0; i < len; i++) {\r\n        if (i in t && fun.call(thisArg, t[i], i, t)) {\r\n          return true;\r\n        }\r\n      }\r\n\r\n      return false;\r\n    };\r\n  }\r\n}\r\n\r\nif (typeof window !== 'undefined') {\r\n  applyPolyfills();\r\n}\r\n","import React, { Component } from 'react';\r\nimport container from 'smooth-dnd';\r\n\r\nexport default class extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\titems: Array(50).fill().map((p, i) => i),\r\n\t\t\titems2: Array(50).fill().map((p, i) => i),\r\n\t\t};\r\n\r\n\t\tthis.dragStyle = {\r\n\t\t\theight: '50px',\r\n\t\t\ttextAlign: 'center',\r\n\t\t\tborder: '1px solid #ccc',\r\n\t\t\tvertialAlign: 'middle',\r\n\t\t\tlineHeight: '50px',\r\n\t\t\tbackgroundColor: 'white',\r\n\t\t\tmarginTop: '0px'\r\n\t\t};\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\twindow.container = container(this.container, { groupName: '1', behaviour: 'copy' });\r\n\t\twindow.container2 = container(this.container2, { groupName: '1', dragHandleSelector: '.handle' });\r\n\t\twindow.container3 = container(this.container3, { groupName: '1', dragBeginDelay: 50, animationDuration: 300, dragClass: 'ghost' });\r\n\t\twindow.container4 = container(this.container4, { orientation: 'horizontal' });\r\n\t}\r\n\r\n\r\n\trender() {\r\n\t\tconst childs = this.state.items.map(p => (\r\n\t\t\t<div style={Object.assign({}, this.dragStyle, { height: `${50 + (Math.random() * 200)}px` })} key={p}>Draggable {p}</div>\r\n\t\t));\r\n\r\n\t\tconst horizontalChild = this.state.items.slice(0, 10).map(p => (\r\n\t\t\t<div style={Object.assign({}, this.dragStyle, {height: '100px', width: '150px' })} key={p}>Draggable {p}</div>\r\n\t\t));\r\n\r\n\t\t// childs.push(<div style={Object.assign({}, this.dragStyle, { height: `0px` })} key={'asdasds'}></div>);\r\n\t\t// horizontalChild.push(<div style={Object.assign({}, this.dragStyle, { width: `0px` })} key={'qqqqqqqq'}></div>);\r\n\r\n\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<div style={{ display: 'flex', flexDirection: 'row' }}>\r\n\t\t\t\t\t<div style={{ float: 'none', width: '510px', transform: 'scale3d(1,1,1)', backgroundColor: '#ccc', margin: '50px', border: '1px solid #ccc' }}>\r\n\t\t\t\t\t\t<div style={{ float: 'none', position: 'relative', height: '800px', overflowY: 'auto' }} ref={e => { this.container = e; }}>\r\n\t\t\t\t\t\t\t{childs}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={{ width: '510px', height: '800px', overflowY: 'auto', transform: 'scale3d(1,1,1)', backgroundColor: '#ccc', margin: '50px', border: '1px solid #ccc' }}>\r\n\t\t\t\t\t\t<div tabIndex=\"-1\" id=\"a\" style={{ float: 'none', position: 'relative' }} ref={e => { this.container2 = e; }}>\r\n\t\t\t\t\t\t\t{this.state.items.map(p => (\r\n\t\t\t\t\t\t\t\t<div style={Object.assign({}, this.dragStyle, { margin: '2px 50px', backgroundColor: '#abc', height: `${50 + (Math.random() * 0)}px` })} key={p}>\r\n\t\t\t\t\t\t\t\t\t<div className=\"handle\" style={{float: 'left',width: '30px', height:'30px', backgroundColor: '#345'}}></div>\t\r\n\t\t\t\t\t\t\t\t\tDraggable {p}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={{ float: 'none', width: '510px', height: '800px', overflowY: 'auto', transform: 'scale3d(1,1,1)', backgroundColor: '#ccc', margin: '50px', border: '1px solid #ccc' }}>\r\n\t\t\t\t\t\t<div style={{ float: 'none', position: 'relative', paddingBottom: '100px' }} ref={e => { this.container3 = e; }}>\r\n\t\t\t\t\t\t\t{this.state.items.map(p => (\r\n\t\t\t\t\t\t\t\t<div style={Object.assign({}, this.dragStyle, { height: `${50 + (Math.random() * 0)}px` })} key={p}>Draggable {p}</div>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div style={{ overflowX: 'auto', backgroundColor: '#ccc', border: '1px solid #ccc', margin: '100px' }}>\r\n\t\t\t\t\t<div ref={e => { this.container4 = e; }}>\r\n\t\t\t\t\t\t{horizontalChild}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\r\n\t\t\t\t{/* <div style={{ position: 'fixed', top: '100px', left: '100px', bottom: '100px', width: '300px', overflowY: 'auto', backgroundColor: '#ccc', border: '1px solid #ccc' }}>\r\n\t\t\t\t\t<div style={{ float: 'none', position: 'relative' }} ref={e => { this.container = e; }}>\r\n\t\t\t\t\t\t{childs}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style={{ marginLeft: '500px', width: '400px', paddingBottom: '200px', height: '800px', overflow: 'auto' }} ref={e => { this.container3 = e; }}>\r\n\t\t\t\t\t{this.state.items2.map(p => (\r\n\t\t\t\t\t\t<div style={Object.assign({}, this.dragStyle, { margin: '1px', height: `${50 + (Math.random() * 0)}px` })} key={p}>Draggable {p}</div>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div> */}\r\n\t\t\t</div>\r\n\t\t);\r\n\t\t// return (\r\n\t\t//   <div style={{ width: '510px', height: '800px', overflowY: 'auto', transform: 'scale3d(1,1,1)', backgroundColor: '#ccc', margin: '100px' }}>\r\n\t\t//     <div ref={e => this.container = e}>\r\n\t\t//       <div style={{ border: '1px solid #ccc', backgroundColor: '#fff', height: '30px' }}>D1</div>\r\n\t\t//       <div style={{ border: '1px solid #ccc', backgroundColor: '#fff', height: '100px' }}>D2</div>\r\n\t\t//       <div style={{ border: '1px solid #ccc', backgroundColor: '#fff', height: '30px' }}>D3</div>\r\n\t\t//     </div>\r\n\t\t//   </div>\r\n\t\t// )\r\n\t}\r\n}","import React, { Component } from 'react';\r\nimport { Container, Draggable } from 'react-smooth-dnd';\r\n\r\nconst itemCls = {\r\n\theight: '50px',\r\n\tborder: '1px solid #ccc',\r\n\tmargin: '5px',\r\n\ttextAlign: 'center'\r\n};\r\n\r\nclass Nested extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<Container groupName=\"1\">\r\n\t\t\t\t\t\t<div style={itemCls}>Draggable</div>\r\n\t\t\t\t\t\t<div style={itemCls}>Draggable 1</div>\r\n\t\t\t\t\t\t<div style={itemCls}>Draggable 2</div>\r\n\t\t\t\t\t\t<div style={itemCls}>Draggable 3</div>\r\n\t\t\t\t\t\t<div style={itemCls}>Draggable 4</div>\r\n\t\t\t\t\t\t<div style={{padding: '10px', backgroundColor: '#bca'}}>\r\n\t\t\t\t\t\t\t<Container groupName=\"1\">\r\n\t\t\t\t\t\t\t\t<div style={itemCls}>Draggable 1</div>\r\n\t\t\t\t\t\t\t\t<div style={itemCls}>Draggable 1 1</div>\r\n\t\t\t\t\t\t\t\t<div style={itemCls}>Draggable 1 2</div>\r\n\t\t\t\t\t\t\t\t<div style={itemCls}>Draggable 1 3</div>\r\n\t\t\t\t\t\t\t\t<div style={itemCls}>Draggable 1 4</div>\r\n\t\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</Container>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Nested;","import React, { Component } from 'react';\r\n\r\nexport default class extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div id=\"a\">\r\n\t\t\t\t<div id=\"b\" style={{\r\n\t\t\t\t\twidth: '500px',\r\n\t\t\t\t\theight: '1000px',\r\n\t\t\t\t\tfloat: 'left',\r\n\t\t\t\t\tbackgroundColor: 'yellow'\r\n\t\t\t\t}}>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n","\r\nexport const applyDrag = (arr, dragResult) => {\r\n  const { removedIndex, addedIndex, payload } = dragResult;\r\n  if (removedIndex === null && addedIndex === null) return arr;\r\n\r\n  const result = [...arr];\r\n  let itemToAdd = payload;\r\n\r\n  if (removedIndex !== null) {\r\n    itemToAdd = result.splice(removedIndex, 1)[0];\r\n  }\r\n\r\n  if (addedIndex !== null) {\r\n    result.splice(addedIndex, 0, itemToAdd);\r\n  }\r\n\r\n  return result;\r\n};\r\n\r\nexport const generateItems = (count, creator) => {\r\n  const result = [];\r\n  for (let i = 0; i < count; i++) {\r\n    result.push(creator(i));\r\n  }\r\n  return result;\r\n};","import React, { Component } from 'react';\r\nimport { Container, Draggable } from 'react-smooth-dnd';\r\nimport { applyDrag, generateItems } from './utils';\r\n\r\nclass Simple extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      items: generateItems(50, (index) => {\r\n        return {\r\n          id: index,\r\n          data: 'Draggable' + index\r\n        };\r\n      })\r\n    };\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"simple-page\">\r\n          <Container onDrop={e => this.setState({ items: applyDrag(this.state.items, e) })}>\r\n            {this.state.items.map(p => {\r\n              return (\r\n                <Draggable key={p.id}>\r\n                  <div className=\"draggable-item\">\r\n                    {p.data}\r\n                  </div>\r\n                </Draggable>\r\n              );\r\n            })}\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass SimpleScroller extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      items: generateItems(50, (index) => {\r\n        return {\r\n          id: index,\r\n          data: 'Draggable' + index\r\n        };\r\n      })\r\n    };\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"simple-page-scroller\">\r\n          <Container onDrop={e => this.setState({ items: applyDrag(this.state.items, e) })}>\r\n            {this.state.items.map(p => {\r\n              return (\r\n                <Draggable key={p.id}>\r\n                  <div className=\"draggable-item\">\r\n                    {p.data}\r\n                  </div>\r\n                </Draggable>\r\n              );\r\n            })}\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport {\r\n  Simple,\r\n  SimpleScroller\r\n};","import React, { Component } from 'react';\r\nimport { Container, Draggable } from 'react-smooth-dnd';\r\nimport { applyDrag, generateItems } from './utils';\r\n\r\nconst groupStyle = {\r\n  margin: '50px',\r\n  overflowX: 'auto',\r\n  // border: '1px solid #ccc'\r\n};\r\n\r\nclass SimpleHorizontal extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      items: generateItems(15, (i) => ({ id: '2' + i, data: `Draggable - ${i}` })),\r\n    };\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div style={groupStyle}>\r\n          <Container orientation=\"horizontal\" onDrop={e => this.setState({ items: applyDrag(this.state.items, e) })}>\r\n            {\r\n              this.state.items.map(p => {\r\n                return (\r\n                  <Draggable key={p.id}>\r\n                    <div className=\"draggable-item-horizontal\">\r\n                      {p.data}\r\n                    </div>\r\n                  </Draggable>\r\n                );\r\n              })\r\n            }\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SimpleHorizontal;","import React, { Component } from 'react';\r\nimport { Container, Draggable } from 'react-smooth-dnd';\r\nimport { applyDrag, generateItems } from './utils';\r\nconst groupStyle = {\r\n  marginLeft: '50px',\r\n  flex: 1\r\n};\r\n\r\nclass Groups extends Component {\r\n  constructor() {\r\n    super();\r\n\r\n    this.state = {\r\n      items1: generateItems(15, (i) => ({ id: '1' + i, data: `Draggable 1 - ${i}` })),\r\n      items2: generateItems(15, (i) => ({ id: '2' + i, data: `Draggable 2 - ${i}` })),\r\n      items3: generateItems(15, (i) => ({ id: '3' + i, data: `Draggable 3 - ${i}` })),\r\n      items4: generateItems(15, (i) => ({ id: '4' + i, data: `Draggable 4 - ${i}` })),\r\n    };\r\n  }\r\n  render() {\r\n    return (\r\n      <div style={{ display: 'flex', justifyContent: 'stretch', marginTop: '50px', marginRight: '50px' }}>\r\n        <div style={groupStyle}>\r\n          <Container groupName=\"1\" getChildPayload={i => this.state.items1[i]} onDrop={e => this.setState({ items1: applyDrag(this.state.items1, e) })}>\r\n            {\r\n              this.state.items1.map(p => {\r\n                return (\r\n                  <Draggable key={p.id}>\r\n                    <div className=\"draggable-item\">\r\n                      {p.data}\r\n                    </div>\r\n                  </Draggable>\r\n                );\r\n              })\r\n            }\r\n          </Container>\r\n        </div>\r\n        <div style={groupStyle}>\r\n          <Container groupName=\"1\" getChildPayload={i => this.state.items2[i]} onDrop={e => this.setState({ items2: applyDrag(this.state.items2, e) })}>\r\n            {\r\n              this.state.items2.map(p => {\r\n                return (\r\n                  <Draggable key={p.id}>\r\n                    <div className=\"draggable-item\">\r\n                      {p.data}\r\n                    </div>\r\n                  </Draggable>\r\n                );\r\n              })\r\n            }\r\n          </Container>\r\n        </div>\r\n        <div style={groupStyle}>\r\n          <Container groupName=\"1\" getChildPayload={i => this.state.items3[i]} onDrop={e => this.setState({ items3: applyDrag(this.state.items3, e) })}>\r\n            {\r\n              this.state.items3.map(p => {\r\n                return (\r\n                  <Draggable key={p.id}>\r\n                    <div className=\"draggable-item\">\r\n                      {p.data}\r\n                    </div>\r\n                  </Draggable>\r\n                );\r\n              })\r\n            }\r\n          </Container>\r\n        </div>\r\n        <div style={groupStyle}>\r\n          <Container groupName=\"1\" getChildPayload={i => this.state.items4[i]} onDrop={e => this.setState({ items4: applyDrag(this.state.items4, e) })}>\r\n            {\r\n              this.state.items4.map(p => {\r\n                return (\r\n                  <Draggable key={p.id}>\r\n                    <div className=\"draggable-item\">\r\n                      {p.data}\r\n                    </div>\r\n                  </Draggable>\r\n                );\r\n              })\r\n            }\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nGroups.propTypes = {\r\n\r\n};\r\n\r\nexport default Groups;","import React, { Component } from 'react';\r\nimport { Container, Draggable } from 'react-smooth-dnd';\r\nimport { applyDrag, generateItems } from './utils';\r\n\r\nconst groupStyle = {\r\n  marginLeft: '50px',\r\n  flex: 1\r\n}\r\n\r\nclass Copy extends Component {\r\n  constructor() {\r\n    super();\r\n\r\n    this.state = {\r\n      items1: generateItems(15, (i) => ({ id: '1' + i, data: `Source Draggable - ${i}` })),\r\n      items2: generateItems(15, (i) => ({ id: '2' + i, data: `Draggable 2 - ${i}` })),\r\n      items3: generateItems(15, (i) => ({ id: '3' + i, data: `Draggable 3 - ${i}` })),\r\n      items4: generateItems(15, (i) => ({ id: '4' + i, data: `Draggable 4 - ${i}` })),\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <div style={{ display: 'flex', justifyContent: 'stretch', marginTop: '50px', marginRight: '50px' }}>\r\n        <div style={groupStyle}>\r\n          <Container groupName=\"1\" behaviour=\"copy\" getChildPayload={i => this.state.items1[i]} onDrop={e => this.setState({ items1: applyDrag(this.state.items1, e) })}>\r\n            {\r\n              this.state.items1.map((p,i) => {\r\n                return (\r\n                  <Draggable key={i}>\r\n                    <div className=\"draggable-item\">\r\n                      {p.data}\r\n                    </div>\r\n                  </Draggable>\r\n                );\r\n              })\r\n            }\r\n          </Container>\r\n        </div>\r\n        <div style={groupStyle}>\r\n          <Container groupName=\"1\" getChildPayload={i => this.state.items2[i]} onDrop={e => this.setState({ items2: applyDrag(this.state.items2, e) })}>\r\n            {\r\n              this.state.items2.map((p, i) => {\r\n                return (\r\n                  <Draggable key={i}>\r\n                    <div className=\"draggable-item\">\r\n                      {p.data}\r\n                    </div>\r\n                  </Draggable>\r\n                );\r\n              })\r\n            }\r\n          </Container>\r\n        </div>        \r\n        <div style={groupStyle}>\r\n          <Container groupName=\"1\" getChildPayload={i => this.state.items3[i]} onDrop={e => this.setState({ items3: applyDrag(this.state.items3, e) })}>\r\n            {\r\n              this.state.items3.map(p => {\r\n                return (\r\n                  <Draggable key={p.id}>\r\n                    <div className=\"draggable-item\">\r\n                      {p.data}\r\n                    </div>\r\n                  </Draggable>\r\n                );\r\n              })\r\n            }\r\n          </Container>\r\n        </div>        \r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nCopy.propTypes = {\r\n\r\n};\r\n\r\nexport default Copy;","import React, { Component } from 'react';\r\nimport { Container, Draggable } from 'react-smooth-dnd';\r\nimport { applyDrag, generateItems } from './utils';\r\n\r\nconst groupStyle = {\r\n  margin: '50px',\r\n  overflowX: 'auto',\r\n  // border: '1px solid #ccc'\r\n};\r\n\r\nclass Horizontal extends Component {\r\n  constructor() {\r\n    super();\r\n\r\n    this.state = {\r\n      items1: generateItems(5, (i) => ({ id: '1' + i, data: `Draggable 1 - ${i}` })),\r\n      items2: generateItems(15, (i) => ({ id: '2' + i, data: `Draggable 2 - ${i}` })),\r\n      items3: generateItems(15, (i) => ({ id: '3' + i, data: `Draggable 3 - ${i}` })),\r\n      items4: generateItems(15, (i) => ({ id: '4' + i, data: `Draggable 4 - ${i}` })),\r\n    };\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Container groupName=\"1\" orientation=\"horizontal\" style={groupStyle} getChildPayload={i => this.state.items1[i]} onDrop={e => this.setState({ items1: applyDrag(this.state.items1, e) })}>\r\n          {\r\n            this.state.items1.map(p => {\r\n              return (\r\n                <Draggable key={p.id}>\r\n                  <div className=\"draggable-item-horizontal\">\r\n                    {p.data}\r\n                  </div>\r\n                </Draggable>\r\n              );\r\n            })\r\n          }\r\n        </Container>\r\n        <div style={groupStyle}>\r\n          <Container groupName=\"1\" orientation=\"horizontal\" getChildPayload={i => this.state.items2[i]} onDrop={e => this.setState({ items2: applyDrag(this.state.items2, e) })}>\r\n            {\r\n              this.state.items2.map(p => {\r\n                return (\r\n                  <Draggable key={p.id}>\r\n                    <div className=\"draggable-item-horizontal\">\r\n                      {p.data}\r\n                    </div>\r\n                  </Draggable>\r\n                );\r\n              })\r\n            }\r\n          </Container>\r\n        </div>\r\n        <div style={groupStyle}>\r\n          <Container groupName=\"1\" orientation=\"horizontal\" getChildPayload={i => this.state.items3[i]} onDrop={e => this.setState({ items3: applyDrag(this.state.items3, e) })}>\r\n            {\r\n              this.state.items3.map(p => {\r\n                return (\r\n                  <Draggable key={p.id}>\r\n                    <div className=\"draggable-item-horizontal\">\r\n                      {p.data}\r\n                    </div>\r\n                  </Draggable>\r\n                );\r\n              })\r\n            }\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nHorizontal.propTypes = {\r\n\r\n};\r\n\r\nexport default Horizontal;","import React, { Component } from \"react\";\r\nimport { Container, Draggable } from \"react-smooth-dnd\";\r\nimport { applyDrag, generateItems } from \"./utils\";\r\n\r\nclass Nested extends Component {\r\n  constructor() {\r\n    super();\r\n\r\n    this.containerOnDrop = this.containerOnDrop.bind(this);\r\n    this.containerOnDrop2 = this.containerOnDrop2.bind(this);\r\n    this.containerOnDrop3 = this.containerOnDrop3.bind(this);\r\n\r\n    const items = generateItems(30, i => ({\r\n      id: i,\r\n      type: \"draggable\",\r\n      data: `Container 1 Draggable - ${i}`\r\n    }));\r\n\r\n    const items2 = generateItems(10, i => ({\r\n      id: i,\r\n      type: \"draggable\",\r\n      data: `Container 2 Draggable - ${i}`\r\n    }));\r\n\r\n    items2[3] = {\r\n      id: 3,\r\n      type: \"container\",\r\n      items: generateItems(4, i => ({\r\n        id: i,\r\n        type: \"draggable\",\r\n        data: `Container 4 Draggable - ${i}`\r\n      }))\r\n    };\r\n\r\n    const items3 = generateItems(4, i => ({\r\n      id: i,\r\n      type: \"draggable\",\r\n      data: `Container 3 Draggable - ${i}`\r\n    }));\r\n\r\n    items[5] = {\r\n      id: 5,\r\n      type: \"container\",\r\n      items: items2\r\n    };\r\n\r\n    items[9] = {\r\n      id: 9,\r\n      type: \"container\",\r\n      items: items3\r\n    };\r\n\r\n    this.state = {\r\n      items\r\n    };\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"simple-page\">\r\n          <Container onDrop={this.containerOnDrop}>\r\n            {this.state.items.map((p, i) => {\r\n              if (p.type === \"draggable\") {\r\n                return (\r\n                  <Draggable key={i}>\r\n                    <div className=\"draggable-item\">{p.data}</div>\r\n                  </Draggable>\r\n                );\r\n              } else {\r\n                return (\r\n                  <Draggable key={i}>\r\n                    <div\r\n                      style={{\r\n                        padding: \"20px 20px\",\r\n                        marginTop: \"2px\",\r\n                        marginBottom: \"2px\",\r\n                        border: \"1px solid rgba(0,0,0,.125)\",\r\n                        backgroundColor: \"#fff\",\r\n                        cursor: \"move\"\r\n                      }}\r\n                    >\r\n                      <h4 style={{ textAlign: \"center\" }}>\r\n                        Nested Sortable List - {p.id}\r\n                      </h4>\r\n                      <div style={{ cursor: \"default\" }}>\r\n                        <Container onDrop={e => this.containerOnDrop2(i, e)}>\r\n                          {p.items.map((q, j) => {\r\n                            if (q.type === \"draggable\") {\r\n                              return (\r\n                                <Draggable key={j}>\r\n                                  <div\r\n                                    className=\"draggable-item\"\r\n                                    style={{ backgroundColor: \"cornsilk\" }}\r\n                                  >\r\n                                    {q.data}\r\n                                  </div>\r\n                                </Draggable>\r\n                              );\r\n                            } else {\r\n                              return (\r\n                                <Draggable key={j}>\r\n                                  <div\r\n                                    style={{\r\n                                      padding: \"20px 20px\",\r\n                                      marginTop: \"2px\",\r\n                                      marginBottom: \"2px\",\r\n                                      border: \"1px solid rgba(0,0,0,.125)\",\r\n                                      backgroundColor: \"cornsilk\",\r\n                                      cursor: \"move\"\r\n                                    }}\r\n                                  >\r\n                                    <h4\r\n                                      style={{\r\n                                        textAlign: \"center\"\r\n                                      }}\r\n                                    >\r\n                                      Nested Sortable List - {q.id}\r\n                                    </h4>\r\n                                    <div style={{ cursor: \"default\" }}>\r\n                                      <Container\r\n                                        onDrop={e =>\r\n                                          this.containerOnDrop3(i, j, e)\r\n                                        }\r\n                                      >\r\n                                        {q.items.map((t, y) => {\r\n                                          return (\r\n                                            <Draggable key={y}>\r\n                                              <div\r\n                                                className=\"draggable-item\"\r\n                                                style={{\r\n                                                  backgroundColor: \"ghostwhite\"\r\n                                                }}\r\n                                              >\r\n                                                {t.data}\r\n                                              </div>\r\n                                            </Draggable>\r\n                                          );\r\n                                        })}\r\n                                      </Container>\r\n                                    </div>\r\n                                  </div>\r\n                                </Draggable>\r\n                              );\r\n                            }\r\n                          })}\r\n                        </Container>\r\n                      </div>\r\n                    </div>\r\n                  </Draggable>\r\n                );\r\n              }\r\n            })}\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  containerOnDrop(e) {\r\n    this.setState({\r\n      items: applyDrag(this.state.items, e)\r\n    });\r\n  }\r\n\r\n  containerOnDrop2(id, e) {\r\n    const newItems = [...this.state.items];\r\n    newItems[id].items = applyDrag(newItems[id].items, e);\r\n    this.setState({\r\n      items: newItems\r\n    });\r\n  }\r\n\r\n  containerOnDrop3(id1, id2, e) {\r\n    const newItems = [...this.state.items];\r\n    newItems[id1].items[id2].items = applyDrag(\r\n      newItems[id1].items[id2].items,\r\n      e\r\n    );\r\n    this.setState({\r\n      items: newItems\r\n    });\r\n  }\r\n}\r\n\r\nNested.propTypes = {};\r\n\r\nexport default Nested;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Container, Draggable } from 'react-smooth-dnd';\r\nimport { applyDrag } from './utils';\r\n\r\nconst form = [\r\n  {\r\n    id: 0,\r\n    element: <h2>Form Header</h2>\r\n  }, {\r\n    id: 1,\r\n    label: 'Full Name',\r\n    element: <div className=\"field-group\"><input type=\"text\" /><input type=\"text\" /></div>\r\n  }, {\r\n    id: 2,\r\n    label: 'Email',\r\n    element: <input type=\"email\" />\r\n  }, {\r\n    id: 3,\r\n    label: 'Address',\r\n    element: <textarea name=\"address\" id=\"\" cols=\"30\" rows=\"10\" />\r\n  },\r\n  {\r\n    id: 5,\r\n    label: 'Radio',\r\n    element: (\r\n      <div>\r\n        <div><label><input type=\"radio\" name=\"r\" /> option 1</label></div>\r\n        <div><label><input type=\"radio\" name=\"r\" /> option 2</label></div>\r\n        <div><label><input type=\"radio\" name=\"r\" /> option 3</label></div>\r\n        <div><label><input type=\"radio\" name=\"r\" /> option 4</label></div>\r\n        <div><label><input type=\"radio\" name=\"r\" /> option 5</label></div>\r\n      </div>\r\n    )\r\n  }, {\r\n    id: 4,\r\n    label: 'Options',\r\n    element: (<select>\r\n      <option value=\"1\">Option 1</option>\r\n      <option value=\"2\" selected>Option 2</option>\r\n      <option value=\"3\">Option 3</option>\r\n      <option value=\"4\">Option 4</option>\r\n    </select>)\r\n  }\r\n  , {\r\n    id: 6,\r\n    label: 'Checkbox',\r\n    element: (\r\n      <div>\r\n        <div><label><input type=\"checkbox\" name=\"r\" /> option 1</label></div>\r\n        <div><label><input type=\"checkbox\" name=\"r\" /> option 2</label></div>\r\n        <div><label><input type=\"checkbox\" name=\"r\" /> option 3</label></div>\r\n        <div><label><input type=\"checkbox\" name=\"r\" /> option 4</label></div>\r\n        <div><label><input type=\"checkbox\" name=\"r\" /> option 5</label></div>\r\n      </div>\r\n    )\r\n  }, {\r\n    id: 7,\r\n    element: (\r\n      <div>\r\n        <button className=\"form-submit-button\">Submit</button>\r\n      </div>\r\n    )\r\n  }\r\n];\r\n\r\nclass Form extends Component {\r\n  constructor() {\r\n    super();\r\n    this.generateForm = this.generateForm.bind(this);\r\n    this.onDrop = this.onDrop.bind(this);\r\n\r\n    this.state = {\r\n      form\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"form-demo\">\r\n        <div className=\"form\">\r\n          <Container\r\n            style={{ paddingBottom: '200px' }}\r\n            dragClass=\"form-ghost\"\r\n            dropClass=\"form-ghost-drop\"\r\n            onDrop={this.onDrop}\r\n            nonDragAreaSelector=\".field\">\r\n            {this.generateForm(this.state.form)}\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  onDrop(dropResult) {\r\n    return this.setState({ form: applyDrag(this.state.form, dropResult) });\r\n  }\r\n\r\n  generateForm(form) {\r\n    return form.map((item) => {\r\n      return (\r\n        <Draggable key={item.id}>\r\n          <div\r\n            className={`form-line`}>\r\n            <div className=\"label\">\r\n              <span>{item.label}</span>\r\n            </div>\r\n            <div className=\"field\">\r\n              {item.element}\r\n            </div>\r\n          </div>\r\n        </Draggable >\r\n      );\r\n    });\r\n  }\r\n}\r\n\r\nexport default Form;","import React, { Component } from \"react\";\r\nimport { Container, Draggable } from \"react-smooth-dnd\";\r\nimport { applyDrag, generateItems } from \"./utils\";\r\n\r\nclass Nested extends Component {\r\n  constructor() {\r\n    super();\r\n\r\n    this.containerOnDrop = this.containerOnDrop.bind(this);\r\n    this.containerOnDrop2 = this.containerOnDrop2.bind(this);\r\n    this.containerOnDrop3 = this.containerOnDrop3.bind(this);\r\n\r\n    const items = generateItems(30, i => ({\r\n      id: 'item1 '+i,\r\n      type: \"draggable\",\r\n      data: `Container 1 Draggable - ${i}`\r\n    }));\r\n\r\n    const items2 = generateItems(10, i => ({\r\n      id: 'item2 ' +i,\r\n      type: \"draggable\",\r\n      data: `Container 2 Draggable - ${i}`\r\n    }));\r\n\r\n    items2[3] = {\r\n      ...items2[3],\r\n      type: \"container\",\r\n      items: generateItems(4, i => ({\r\n        id: 'item2 sub' + i,\r\n        type: \"draggable\",\r\n        data: `Container 4 Draggable - ${i}`\r\n      }))\r\n    };\r\n\r\n    const items3 = generateItems(4, i => ({\r\n      id: 'item3 '+i,\r\n      type: \"draggable\",\r\n      data: `Container 3 Draggable - ${i}`\r\n    }));\r\n\r\n    items[5] = {\r\n      ...items[5],\r\n      type: \"container\",\r\n      items: items2\r\n    };\r\n\r\n    items[9] = {\r\n      ...items[9],\r\n      type: \"container\",\r\n      items: items3\r\n    };\r\n\r\n    this.state = {\r\n      items\r\n    };\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"simple-page\">\r\n          <Container groupName=\"1\" onDrop={this.containerOnDrop} getChildPayload={(i) => this.state.items[i]}>\r\n            {this.state.items.map((p, i) => {\r\n              if (p.type === \"draggable\") {\r\n                return (\r\n                  <Draggable key={i}>\r\n                    <div className=\"draggable-item\">{p.data}</div>\r\n                  </Draggable>\r\n                );\r\n              } else {\r\n                return (\r\n                  <Draggable key={i}>\r\n                    <div\r\n                      style={{\r\n                        padding: \"20px 20px\",\r\n                        marginTop: \"2px\",\r\n                        marginBottom: \"2px\",\r\n                        border: \"1px solid rgba(0,0,0,.125)\",\r\n                        backgroundColor: \"#fff\",\r\n                        cursor: \"move\"\r\n                      }}\r\n                    >\r\n                      <h4 style={{ textAlign: \"center\" }}>\r\n                        Nested Sortable List - {p.id}\r\n                      </h4>\r\n                      <div style={{ cursor: \"default\" }}>\r\n                        <Container groupName=\"1\" getChildPayload={(index) => this.state.items[i].items[index]} onDrop={e => this.containerOnDrop2(i, e)}>\r\n                          {p.items.map((q, j) => {\r\n                            if (q.type === \"draggable\") {\r\n                              return (\r\n                                <Draggable key={j}>\r\n                                  <div\r\n                                    className=\"draggable-item\"\r\n                                    style={{ backgroundColor: \"cornsilk\" }}\r\n                                  >\r\n                                    {q.data}\r\n                                  </div>\r\n                                </Draggable>\r\n                              );\r\n                            } else {\r\n                              return (\r\n                                <Draggable key={j}>\r\n                                  <div\r\n                                    style={{\r\n                                      padding: \"20px 20px\",\r\n                                      marginTop: \"2px\",\r\n                                      marginBottom: \"2px\",\r\n                                      border: \"1px solid rgba(0,0,0,.125)\",\r\n                                      backgroundColor: \"cornsilk\",\r\n                                      cursor: \"move\"\r\n                                    }}\r\n                                  >\r\n                                    <h4\r\n                                      style={{\r\n                                        textAlign: \"center\"\r\n                                      }}\r\n                                    >\r\n                                      Nested Sortable List - {q.id}\r\n                                    </h4>\r\n                                    <div style={{ cursor: \"default\" }}>\r\n                                      <Container\r\n                                        getChildPayload={(index) => this.state.items[i].items[j].items[index]}\r\n                                        groupName=\"1\"\r\n                                        onDrop={e =>\r\n                                          this.containerOnDrop3(i, j, e)\r\n                                        }\r\n                                      >\r\n                                        {q.items.map((t, y) => {\r\n                                          return (\r\n                                            <Draggable key={y}>\r\n                                              <div\r\n                                                className=\"draggable-item\"\r\n                                                style={{\r\n                                                  backgroundColor: \"ghostwhite\"\r\n                                                }}\r\n                                              >\r\n                                                {t.data}\r\n                                              </div>\r\n                                            </Draggable>\r\n                                          );\r\n                                        })}\r\n                                      </Container>\r\n                                    </div>\r\n                                  </div>\r\n                                </Draggable>\r\n                              );\r\n                            }\r\n                          })}\r\n                        </Container>\r\n                      </div>\r\n                    </div>\r\n                  </Draggable>\r\n                );\r\n              }\r\n            })}\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  containerOnDrop(e) {\r\n    console.log('level 1: Drop');\r\n    this.setState({\r\n      items: applyDrag(this.state.items, e)\r\n    });\r\n  }\r\n\r\n  containerOnDrop2(id, e) {\r\n    console.log('level 2: Drop');\r\n    const newItems = [...this.state.items];\r\n    newItems[id].items = applyDrag(newItems[id].items, e);\r\n    this.setState({\r\n      items: newItems\r\n    });\r\n  }\r\n\r\n  containerOnDrop3(id1, id2, e) {\r\n    console.log('level 3: Drop');\r\n    const newItems = [...this.state.items];\r\n    newItems[id1].items[id2].items = applyDrag(\r\n      newItems[id1].items[id2].items,\r\n      e\r\n    );\r\n    this.setState({\r\n      items: newItems\r\n    });\r\n  }\r\n}\r\n\r\nNested.propTypes = {};\r\n\r\nexport default Nested;\r\n","import React, { Component } from 'react';\r\nimport { Container, Draggable } from 'react-smooth-dnd';\r\nimport { applyDrag, generateItems } from './utils';\r\nimport container from 'smooth-dnd';\r\n\r\nconst groupStyle = {\r\n  margin: '50px',\r\n  overflowX: 'auto',\r\n  // border: '1px solid #ccc'\r\n};\r\n\r\nclass Nested extends Component {\r\n  constructor() {\r\n    super();\r\n\r\n    this.childContainers = [];\r\n\r\n    // this.containerOnDrop = this.containerOnDrop.bind(this);\r\n    // this.containerOnDrop2 = this.containerOnDrop2.bind(this);\r\n\r\n    const items = generateItems(30, (i) => ({\r\n      id: i, type: 'draggable', data: `Container 1 Draggable - ${i}`\r\n    }));\r\n\r\n    const items2 = generateItems(5, (i) => ({\r\n      id: i, type: 'draggable', data: `Container 2 Draggable - ${i}`\r\n    }));\r\n\r\n    const items3 = generateItems(4, (i) => ({\r\n      id: i, type: 'draggable', data: `Container 3 Draggable - ${i}`\r\n    }));\r\n\r\n    items[5] = {\r\n      id: 5, type: 'container', items: items2\r\n    };\r\n\r\n    items[9] = {\r\n      id: 9, type: 'container', items: items3\r\n    };\r\n\r\n    this.state = {\r\n      items\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    container(this.parentContainer);\r\n    this.childContainers.forEach(container);\r\n  }\r\n  \r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"simple-page\" style={{ border: '1px solid #ddd' }}>\r\n          <div ref={e => this.parentContainer = e}>\r\n            {this.state.items.map((p, i) => {\r\n              if (p.type === 'draggable') {\r\n                return (\r\n                  <div key={i}>\r\n                    <div className=\"draggable-item\">\r\n                      {p.data}\r\n                    </div>\r\n                  </div>\r\n                );\r\n              } else {\r\n                return (\r\n                  <div key={i}>\r\n                    <div style={{ padding: '20px 20px', backgroundColor: '#888' }}>\r\n                      <div ref={e => this.childContainers[i] = e}>\r\n                        {p.items.map((q, j) => {\r\n                          return (\r\n                            <div key={j}>\r\n                              <div className=\"draggable-item\">\r\n                                {q.data}\r\n                              </div>\r\n                            </div>\r\n                          );\r\n                        })}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              }\r\n            })}  \r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nNested.propTypes = {\r\n\r\n};\r\n\r\nexport default Nested;","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Container, Draggable } from 'react-smooth-dnd';\r\nimport { applyDrag, generateItems } from './utils';\r\n\r\n\r\nclass Height extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      items: generateItems(50, (index) => {\r\n        return {\r\n          id: index,\r\n          data: 'Draggable' + index,\r\n          height: `${(40 + Math.random() * 200).toFixed()}px`\r\n        };\r\n      })\r\n    };\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"simple-page\">\r\n          <Container onDrop={e => this.setState({ items: applyDrag(this.state.items, e) })}>\r\n            {this.state.items.map(p => {\r\n              return (\r\n                <Draggable key={p.id}>\r\n                  <div className=\"draggable-item\" style={{height: p.height}}>\r\n                    {p.data}\r\n                  </div>\r\n                </Draggable>\r\n              );\r\n            })}\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nHeight.propTypes = {\r\n\r\n};\r\n\r\nexport default Height;","import React, { Component } from \"react\";\r\nimport { Container, Draggable } from \"react-smooth-dnd\";\r\nimport { applyDrag, generateItems } from \"./utils\";\r\n\r\nconst lorem = `Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. \r\nExcepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. \r\nExcepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.`;\r\n\r\nconst columnNames = [\"Lorem\", \"Ipsum\", \"Consectetur\", \"Eiusmod\"];\r\n\r\nconst cardColors = [\r\n  \"azure\",\r\n  \"beige\",\r\n  \"bisque\",\r\n  \"blanchedalmond\",\r\n  \"burlywood\",\r\n  \"cornsilk\",\r\n  \"gainsboro\",\r\n  \"ghostwhite\",\r\n  \"ivory\",\r\n  \"khaki\"\r\n];\r\nconst pickColor = () => {\r\n  let rand = Math.floor(Math.random() * 10);\r\n  return cardColors[rand];\r\n};\r\n\r\nclass Cards extends Component {\r\n  constructor() {\r\n    super();\r\n\r\n    this.onColumnDrop = this.onColumnDrop.bind(this);\r\n    this.onCardDrop = this.onCardDrop.bind(this);\r\n    this.getCardPayload = this.getCardPayload.bind(this);\r\n    this.state = {\r\n      scene: {\r\n        type: \"container\",\r\n        props: {\r\n          orientation: \"horizontal\"\r\n        },\r\n        children: generateItems(4, i => ({\r\n          id: `column${i}`,\r\n          type: \"container\",\r\n          name: columnNames[i],\r\n          props: {\r\n            orientation: \"vertical\",\r\n            className: \"card-container\"\r\n          },\r\n          children: generateItems(+(Math.random() * 10).toFixed() + 5, j => ({\r\n            type: \"draggable\",\r\n            id: `${i}${j}`,\r\n            props: {\r\n              className: \"card\",\r\n              style: { backgroundColor: pickColor() }\r\n            },\r\n            data: lorem.slice(0, Math.floor(Math.random() * 150) + 30)\r\n          }))\r\n        }))\r\n      }\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"card-scene\">\r\n        <Container\r\n          orientation=\"horizontal\"\r\n          onDrop={this.onColumnDrop}\r\n          dragHandleSelector=\".column-drag-handle\"\r\n          dropPlaceholder={{\r\n            animationDuration: 150,\r\n            showOnTop: true,\r\n            className: 'cards-drop-preview'\r\n          }}\r\n        >\r\n          {this.state.scene.children.map(column => {\r\n            return (\r\n              <Draggable key={column.id}>\r\n                <div className={column.props.className}>\r\n                  <div className=\"card-column-header\">\r\n                    <span className=\"column-drag-handle\">&#x2630;</span>\r\n                    {column.name}\r\n                  </div>\r\n                  <Container\r\n                    {...column.props}\r\n                    groupName=\"col\"\r\n                    onDragStart={e => console.log(\"drag started\", e)}\r\n                    onDragEnd={e => console.log(\"drag end\", e)}\r\n                    onDrop={e => this.onCardDrop(column.id, e)}\r\n                    getChildPayload={index =>\r\n                      this.getCardPayload(column.id, index)\r\n                    }\r\n                    dragClass=\"card-ghost\"\r\n                    dropClass=\"card-ghost-drop\"\r\n                    onDragEnter={() => {\r\n                      console.log(\"drag enter:\", column.id);\r\n                    }}\r\n                    onDragLeave={() => {\r\n                      console.log(\"drag leave:\", column.id);\r\n                    }}\r\n                    onDropReady={p => console.log('Drop ready: ', p)}\r\n                    dropPlaceholder={{                      \r\n                      animationDuration: 150,\r\n                      showOnTop: true,\r\n                      className: 'drop-preview' \r\n                    }}\r\n                    dropPlaceholderAnimationDuration={200}\r\n                  >\r\n                    {column.children.map(card => {\r\n                      return (\r\n                        <Draggable key={card.id}>\r\n                          <div {...card.props}>\r\n                            <p>{card.data}</p>\r\n                          </div>\r\n                        </Draggable>\r\n                      );\r\n                    })}\r\n                  </Container>\r\n                </div>\r\n              </Draggable>\r\n            );\r\n          })}\r\n        </Container>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getCardPayload(columnId, index) {\r\n    return this.state.scene.children.filter(p => p.id === columnId)[0].children[\r\n      index\r\n    ];\r\n  }\r\n\r\n  onColumnDrop(dropResult) {\r\n    const scene = Object.assign({}, this.state.scene);\r\n    scene.children = applyDrag(scene.children, dropResult);\r\n    this.setState({\r\n      scene\r\n    });\r\n  }\r\n\r\n  onCardDrop(columnId, dropResult) {\r\n    if (dropResult.removedIndex !== null || dropResult.addedIndex !== null) {\r\n      const scene = Object.assign({}, this.state.scene);\r\n      const column = scene.children.filter(p => p.id === columnId)[0];\r\n      const columnIndex = scene.children.indexOf(column);\r\n\r\n      const newColumn = Object.assign({}, column);\r\n      newColumn.children = applyDrag(newColumn.children, dropResult);\r\n      scene.children.splice(columnIndex, 1, newColumn);\r\n\r\n      this.setState({\r\n        scene\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nexport default Cards;\r\n","import React, { Component } from 'react';\r\nimport { Container, Draggable } from 'react-smooth-dnd';\r\nimport { applyDrag, generateItems } from './utils';\r\n\r\nclass LockAxis extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      items: generateItems(50, (index) => {\r\n        return {\r\n          id: index,\r\n          data: 'Draggable' + index\r\n        };\r\n      })\r\n    };\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"simple-page\">\r\n          <Container lockAxis=\"y\" onDrop={e => this.setState({ items: applyDrag(this.state.items, e) })}>\r\n            {this.state.items.map(p => {\r\n              return (\r\n                <Draggable key={p.id}>\r\n                  <div className=\"draggable-item\">\r\n                    {p.data}\r\n                  </div>\r\n                </Draggable>\r\n              );\r\n            })}\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default LockAxis;","import React, { Component } from 'react';\r\nimport { Container, Draggable } from 'react-smooth-dnd';\r\nimport { applyDrag, generateItems } from './utils';\r\n\r\nclass DragDelay extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      items: generateItems(50, (index) => {\r\n        return {\r\n          id: index,\r\n          data: 'Draggable' + index\r\n        };\r\n      })\r\n    };\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"simple-page\">\r\n          <Container dragBeginDelay={500} dragClass=\"form-ghost\" dropClass=\"form-ghost-drop\" onDrop={e => this.setState({ items: applyDrag(this.state.items, e) })}>\r\n            {this.state.items.map(p => {\r\n              return (\r\n                <Draggable key={p.id}>\r\n                  <div className=\"draggable-item\">\r\n                    {p.data}\r\n                  </div>\r\n                </Draggable>\r\n              );\r\n            })}\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DragDelay;","import React, { Component } from 'react';\r\nimport { Container, Draggable } from 'react-smooth-dnd';\r\nimport { applyDrag, generateItems } from './utils';\r\n\r\nclass DragHandle extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      items: generateItems(50, (index) => {\r\n        return {\r\n          id: index,\r\n          data: 'Draggable' + index\r\n        };\r\n      })\r\n    };\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"simple-page\">\r\n          <Container dragHandleSelector=\".column-drag-handle\" onDrop={e => this.setState({ items: applyDrag(this.state.items, e) })}>\r\n            {this.state.items.map(p => {\r\n              return (\r\n                <Draggable key={p.id}>\r\n                  <div className=\"draggable-item\">\r\n                    <span className=\"column-drag-handle\" style={{float:'left', padding:'0 10px'}}>&#x2630;</span>\r\n                    {p.data}\r\n                  </div>\r\n                </Draggable>\r\n              );\r\n            })}\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DragHandle;","import React, { Component } from 'react';\r\nimport { Container, Draggable } from 'react-smooth-dnd';\r\nimport { applyDrag, generateItems } from './utils';\r\n\r\nclass DragClass extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      items: generateItems(50, (index) => {\r\n        return {\r\n          id: index,\r\n          data: 'Draggable' + index\r\n        };\r\n      })\r\n    };\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"simple-page\">\r\n          <Container dragClass=\"opacity-ghost\" dropClass=\"opacity-ghost-drop\" onDrop={e => this.setState({ items: applyDrag(this.state.items, e) })}>\r\n            {this.state.items.map(p => {\r\n              return (\r\n                <Draggable key={p.id}>\r\n                  <div className=\"draggable-item\">\r\n                    {p.data}\r\n                  </div>\r\n                </Draggable>\r\n              );\r\n            })}\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default DragClass;","import React, { Component } from 'react';\r\nimport { Container, Draggable } from 'react-smooth-dnd';\r\nimport { applyDrag, generateItems } from './utils';\r\n\r\nclass TransitionDuration extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      items: generateItems(50, (index) => {\r\n        return {\r\n          id: index,\r\n          data: 'Draggable' + index\r\n        };\r\n      })\r\n    };\r\n  }\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div className=\"simple-page\">\r\n          <Container animationDuration={500} onDrop={e => this.setState({ items: applyDrag(this.state.items, e) })}>\r\n            {this.state.items.map(p => {\r\n              return (\r\n                <Draggable key={p.id}>\r\n                  <div className=\"draggable-item\">\r\n                    {p.data}\r\n                  </div>\r\n                </Draggable>\r\n              );\r\n            })}\r\n          </Container>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TransitionDuration;","import React, { Component } from 'react';\r\nimport { Container, Draggable } from 'react-smooth-dnd';\r\nimport { applyDrag, generateItems } from './utils';\r\n\r\nconst groupStyle = {\r\n\tmarginLeft: '50px',\r\n\tflex: 1\r\n}\r\n\r\nclass ScrollBoth extends Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.state = {\r\n\t\t\titems1: generateItems(45, (i) => ({ id: '1' + i, data: `Source Draggable - ${i}` })),\r\n\t\t\titems2: generateItems(45, (i) => ({ id: '2' + i, data: `Draggable 2 - ${i}` })),\r\n\t\t\titems3: generateItems(45, (i) => ({ id: '3' + i, data: `Draggable 3 - ${i}` })),\r\n\t\t\titems4: generateItems(15, (i) => ({ id: '4' + i, data: `Draggable 4 - ${i}` })),\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div style={{ height: '600px', width: '600px', overflow:'auto'}}>\r\n\t\t\t\t<div style={{ display: 'flex', justifyContent: 'stretch', marginTop: '50px', marginRight: '50px', height: '1000px', width: '1000px', overflow: 'auto' }}>\r\n\t\t\t\t\t<div style={groupStyle}>\r\n\t\t\t\t\t\t<Container groupName=\"1\" behaviour=\"copy\" getChildPayload={i => this.state.items1[i]} onDrop={e => this.setState({ items1: applyDrag(this.state.items1, e) })}>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.state.items1.map((p, i) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<Draggable key={i}>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"draggable-item\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{p.data}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</Draggable>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={groupStyle}>\r\n\t\t\t\t\t\t<Container groupName=\"1\" getChildPayload={i => this.state.items2[i]} onDrop={e => this.setState({ items2: applyDrag(this.state.items2, e) })}>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.state.items2.map((p, i) => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<Draggable key={i}>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"draggable-item\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{p.data}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</Draggable>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style={groupStyle}>\r\n\t\t\t\t\t\t<Container groupName=\"1\" getChildPayload={i => this.state.items3[i]} onDrop={e => this.setState({ items3: applyDrag(this.state.items3, e) })}>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tthis.state.items3.map(p => {\r\n\t\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t\t<Draggable key={p.id}>\r\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"draggable-item\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{p.data}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</Draggable>\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nScrollBoth.propTypes = {\r\n\r\n};\r\n\r\nexport default ScrollBoth;","import React, { Component } from 'react';\r\nimport { Container, Draggable } from 'react-smooth-dnd';\r\nimport { applyDrag, generateItems } from './utils';\r\n\r\n\r\nclass DropZone extends Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.onDrop = this.onDrop.bind(this);\r\n\t\tthis.dragEnter = this.dragEnter.bind(this);\r\n\t\tthis.dragLeave = this.dragLeave.bind(this);\r\n\r\n\t\tthis.state = {\r\n\t\t\tzones: [1, 0, 0, 0],\r\n\t\t\tclasses: ['', '', '', '']\r\n\t\t};\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"drop-zone\">\r\n\t\t\t\t{this.state.zones.map((p, i) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div className={`drop-zone-container ${this.state.classes[i]}`}>\r\n\t\t\t\t\t\t\t<Container\r\n\t\t\t\t\t\t\t\tstyle={{ height: '100%' }}\r\n\t\t\t\t\t\t\t\tgroupName=\"1\"\r\n\t\t\t\t\t\t\t\tbehaviour=\"drop-zone\"\r\n\t\t\t\t\t\t\t\tonDrop={e => this.onDrop(i, e)}\r\n\t\t\t\t\t\t\t\tonDragEnter={() => this.dragEnter(i)}\r\n\t\t\t\t\t\t\t\tonDragLeave={() => this.dragLeave(i)}>\r\n\t\t\t\t\t\t\t\t{p ? (\r\n\t\t\t\t\t\t\t\t\t<Draggable>\r\n\t\t\t\t\t\t\t\t\t\t<div className=\"drop-zone-draggable\">\r\n\t\t\t\t\t\t\t\t\t\t\tDraggable\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</Draggable>\r\n\t\t\t\t\t\t\t\t) : null}\r\n\t\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tonDrop(containerIndex, dropresult) {\r\n\t\tconst { addedIndex, removedIndex, payload } = dropresult;\r\n\t\tif (addedIndex !== null || removedIndex !== null) {\r\n\t\t\tconst zones = [...this.state.zones];\r\n\t\t\tif (removedIndex !== null) {\r\n\t\t\t\tzones[containerIndex] = 0;\r\n\t\t\t}\r\n\t\t\tif (addedIndex !== null) {\r\n\t\t\t\tzones[containerIndex] = 1;\r\n\t\t\t}\r\n\t\t\tthis.setState({\r\n\t\t\t\tzones\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tconst classes = [...this.state.classes];\r\n\t\tclasses[containerIndex] = '';\r\n\t\tthis.setState({\r\n\t\t\tclasses\r\n\t\t});\r\n\t}\r\n\r\n\tdragEnter(i) {\r\n\t\tconst classes = [...this.state.classes];\r\n\t\tclasses[i] = 'hover';\r\n\t\tthis.setState({\r\n\t\t\tclasses\r\n\t\t});\r\n\t}\r\n\r\n\tdragLeave(i) {\r\n\t\tconst classes = [...this.state.classes];\r\n\t\tclasses[i] = '';\r\n\t\tthis.setState({\r\n\t\t\tclasses\r\n\t\t});\r\n\t}\r\n}\r\n\r\nexport default DropZone;","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Container, Draggable } from 'react-smooth-dnd';\r\n\r\nclass ChessBoard extends Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.initBoard = this.initBoard.bind(this);\r\n\t\tthis.onDrop = this.onDrop.bind(this);\r\n\t\tthis.shouldAcceptDrop = this.shouldAcceptDrop.bind(this);\r\n\t\tthis.renderPiece = this.renderPiece.bind(this);\r\n\t\tthis.onDragEnter = this.onDragEnter.bind(this);\r\n\t\tthis.onDragLeave = this.onDragLeave.bind(this);\r\n\r\n\t\tthis.state = {\r\n\t\t\tboard: this.initBoard()\r\n\t\t}\r\n\t}\r\n\r\n\tgetFirstPieceRow(side) {\r\n\t\treturn [\r\n\t\t\t{ type: 'rook', side, data: 9816 },\r\n\t\t\t{ type: 'knight', side, data: 9814 },\r\n\t\t\t{ type: 'bishop', side, data: 9815 },\r\n\t\t\t{ type: 'queen', side, data: 9813 },\r\n\t\t\t{ type: 'king', side, data: 9812 },\r\n\t\t\t{ type: 'bishop', side, data: 9815 },\r\n\t\t\t{ type: 'knight', side, data: 9814 },\r\n\t\t\t{ type: 'rook', side, data: 9816 },\r\n\t\t]\r\n\t}\r\n\r\n\tgetSecondPieceRow(side) {\r\n\t\treturn [\r\n\t\t\t{ type: 'pawn', side, data: 9817 },\r\n\t\t\t{ type: 'pawn', side, data: 9817 },\r\n\t\t\t{ type: 'pawn', side, data: 9817 },\r\n\t\t\t{ type: 'pawn', side, data: 9817 },\r\n\t\t\t{ type: 'pawn', side, data: 9817 },\r\n\t\t\t{ type: 'pawn', side, data: 9817 },\r\n\t\t\t{ type: 'pawn', side, data: 9817 },\r\n\t\t\t{ type: 'pawn', side, data: 9817 },\r\n\t\t]\r\n\t}\r\n\r\n\tinitBoard() {\r\n\t\tconst board = [];\r\n\t\tfor (let i = 0; i < 8; i++) {\r\n\t\t\tif (i === 0) {\r\n\t\t\t\tboard.push(this.getFirstPieceRow('black'));\r\n\t\t\t} else if (i === 1) {\r\n\t\t\t\tboard.push(this.getSecondPieceRow('black'));\r\n\t\t\t} else if (i === 6) {\r\n\t\t\t\tboard.push(this.getSecondPieceRow('white'));\r\n\t\t\t} else if (i === 7) {\r\n\t\t\t\tboard.push(this.getFirstPieceRow('white'));\r\n\t\t\t} else {\r\n\t\t\t\tboard.push([{}, {}, {}, {}, {}, {}, {}, {}]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn board;\r\n\t}\r\n\r\n\trenderPiece(piece) {\r\n\t\tif (piece.side) {\r\n\t\t\tconst htmlcode = `&#${piece.data + (piece.side === 'black' ? 6 : 0)};`;\r\n\t\t\tconst hover = piece.hover ? ' hover' : '';\r\n\t\t\treturn (\r\n\t\t\t\t<Draggable>\r\n\t\t\t\t\t<div className={`piece${hover} ${piece.side}`}>\r\n\t\t\t\t\t\t<span dangerouslySetInnerHTML={{ __html: htmlcode }}></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Draggable>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"board\">\r\n\t\t\t\t{this.state.board.map((row, rowIndex) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<div className=\"row\" key={rowIndex}>\r\n\t\t\t\t\t\t\t{row.map((piece, colIndex) => {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t\t<div className={`square ${(rowIndex + colIndex) % 2 === 0 ? 'white' : 'black'}`} key={`${rowIndex}${colIndex}`}>\r\n\t\t\t\t\t\t\t\t\t\t<Container\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ height: '100%' }}\r\n\t\t\t\t\t\t\t\t\t\t\tbehaviour=\"drop-zone\"\r\n\t\t\t\t\t\t\t\t\t\t\tonDrop={(result) => this.onDrop(result, rowIndex, colIndex)}\r\n\t\t\t\t\t\t\t\t\t\t\tshouldAcceptDrop={(_, payload) => this.shouldAcceptDrop(payload, rowIndex, colIndex)}\r\n\t\t\t\t\t\t\t\t\t\t\tgetChildPayload={() => ({ colIndex, rowIndex, piece })}\r\n\t\t\t\t\t\t\t\t\t\t\tonDragEnter={() => this.onDragEnter(rowIndex, colIndex)}\r\n\t\t\t\t\t\t\t\t\t\t\tonDragLeave={() => this.onDragLeave(rowIndex, colIndex)}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{this.renderPiece(piece)}\r\n\t\t\t\t\t\t\t\t\t\t</Container>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tshouldAcceptDrop(payload, rowIndex, colIndex) {\r\n\t\tconst { colIndex: fromCol, rowIndex: fromRow } = payload;\r\n\t\tconst fromPiece = this.state.board[fromRow][fromCol];\r\n\t\tconst piece = this.state.board[rowIndex][colIndex];\r\n\r\n\t\tif (fromPiece === piece) return true;\r\n\t\tif (fromPiece.side === piece.side) return false;\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\tonDrop(dropResult, rowIndex, colIndex) {\r\n\t\tconst { addedIndex, removedIndex, payload } = dropResult;\r\n\r\n\t\tif (addedIndex !== null || removedIndex !== null) {\r\n\t\t\tif (removedIndex !== null) {\r\n\t\t\t\tthis.state.board[rowIndex][colIndex] = {};\r\n\t\t\t}\r\n\r\n\t\t\tif (addedIndex !== null) {\r\n\t\t\t\tthis.state.board[rowIndex][colIndex] = payload.piece;\r\n\t\t\t}\r\n\r\n\t\t\tthis.forceUpdate();\r\n\t\t}\r\n\t}\r\n\r\n\tonDragEnter(row, col) {\r\n\t\tthis.state.board[row][col].hover = true;\r\n\t\tthis.forceUpdate();\r\n\t}\r\n\r\n\tonDragLeave(row, col) {\r\n\t\tthis.state.board[row][col].hover = false;\r\n\t\tthis.forceUpdate();\r\n\t}\r\n}\r\n\r\nChessBoard.propTypes = {\r\n\r\n};\r\n\r\nexport default ChessBoard;","import * as simples from './simple';\r\nimport SimpleHorizontal from './simple-horizontal';\r\nimport Groups from './groups';\r\nimport Copy from './copy';\r\nimport Horizontal from './horizontal';\r\nimport Nested from './nested';\r\nimport NestedGroup from './nested-group';\r\nimport VanillaNested from './vanilla-nested';\r\nimport Height from './height';\r\nimport Form from './form';\r\nimport Cards from './cards';\r\nimport LockAxis from './lock-axis';\r\nimport DragDelay from './drag-delay';\r\nimport DragHandle from './drag-handle';\r\nimport DragClass from './drag-class';\r\nimport TransitionDuration from './transition-duration';\r\nimport DropZone from './drop-zone';\r\nimport Chess from './chess';\r\nimport ScrollBoth from './scroll-both';\r\nimport DynamicContainers from './dynamic-containers';\r\n\r\n\r\nconst getUrl = (pagename) => {\r\n  return `https://github.com/kutlugsahin/smooth-dnd-demo/blob/master/src/demo/pages/${pagename}`;\r\n};\r\n\r\n\r\nexport default [\r\n  {\r\n    title: 'Showcase',\r\n    pages: [\r\n      // {\r\n      //   title: 'Chess', page: Chess, url: getUrl('form.js')\r\n      // },\r\n      {\r\n        title: 'Card board', page: Cards, url:getUrl('cards.js')\r\n      },\r\n      {\r\n        title: 'Form elements', page: Form, url: getUrl('form.js')\r\n      }\r\n    ]\r\n  },{\r\n    title: 'Basic Sortables',\r\n    pages: [\r\n      {\r\n        title: 'Sortable with default options', page: simples.Simple, url: getUrl('simple.js')\r\n      },\r\n      {\r\n        title: 'Sortable inside scroller', page: simples.SimpleScroller, url: getUrl('simple.js')\t\r\n      }, {\r\n        title: 'Horizontal sortable', page: SimpleHorizontal, url: getUrl('horizontal.js')\r\n      }\r\n    ]\r\n  },\r\n  {\r\n    title: 'Groups',\r\n    pages: [\r\n      {\r\n        title: 'DnD between groups', page: Groups, url: getUrl('groups.js')\r\n      },\r\n      {\r\n        title: 'Copy draggable', page: Copy, url: getUrl('copy.js')\r\n      },\r\n      // {\r\n      //   title: 'auto scroll', page: ScrollBoth, url: getUrl('copy.js')\r\n      // },\r\n      // {\r\n      //   title: 'Drop Zones', page: DropZone, url: getUrl('drop-zone.js')\r\n      // }\r\n    ]\r\n  },\r\n  {\r\n    title: 'Nested Groups',\r\n    pages: [\r\n      {\r\n        title: 'Nested vertical sortable', page: Nested, url: getUrl('nested.js')\r\n      },\r\n      // {\r\n      //   title: 'Drag-drop between parent/child', page: NestedGroup, url: getUrl('nested-group.js')\r\n      // }\r\n    ]\r\n  },\r\n  {\r\n    title: 'Advanced options',\r\n    pages: [\r\n      {\r\n        title: 'Lock axis', page: LockAxis, url: getUrl('lock-axis.js')\r\n      },\r\n      {\r\n        title: 'Drag begin delay of 500ms', page: DragDelay, url: getUrl('drag-delay.js')\r\n      },\r\n      {\r\n        title: 'Drag handle', page: DragHandle, url: getUrl('drag-handle.js')\r\n      },\r\n      {\r\n        title: 'Drag and Drop classses', page: DragClass, url: getUrl('drag-class.js')\r\n      },\r\n      {\r\n        title: 'Animation duration 500ms', page: TransitionDuration, url: getUrl('transition-duration.js')\r\n      },\r\n      // {\r\n      //   title: 'Dynamic add/remove Containers', page: DynamicContainers, url: getUrl('dynamic-containers.js')\r\n      // }\r\n    ]\r\n  }\r\n];","import React, { Component } from 'react';\r\nimport { Container, Draggable, constants } from 'react-smooth-dnd';\r\nimport { applyDrag, generateItems } from './utils';\r\n\r\nclass DynamicContainers extends Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.renderContainer = this.renderContainer.bind(this);\r\n\r\n\t\tthis.state = {\r\n\t\t\titems1: generateItems(45, (i) => ({ id: '1' + i, data: `Draggable 1 - ${i}` })),\r\n\t\t\titems2: generateItems(25, (i) => ({ id: '2' + i, data: `Draggable 2 - ${i}` })),\r\n\t\t\titems3: generateItems(25, (i) => ({ id: '3' + i, data: `Draggable 3 - ${i}` })),\r\n\t\t\titems4: generateItems(25, (i) => ({ id: '4' + i, data: `Draggable 4 - ${i}` })),\r\n\t\t\tpopup1Open: false,\r\n\t\t\tpopup2Open: false,\r\n\t\t};\r\n\t}\r\n\r\n\trenderContainer(listName, getList, autoScroll = true) {\r\n\t\treturn (\r\n\t\t\t<div className={`dynamic-container-holder`}>\r\n\t\t\t\t<Container autoScrollEnabled={autoScroll} getGhostParent={() => document.body} groupName=\"1\" getChildPayload={i => getList()[i]} onDrop={e => this.setState({ [listName]: applyDrag(getList(), e) })}>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tgetList().map(p => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<Draggable key={p.id}>\r\n\t\t\t\t\t\t\t\t\t<div className=\"draggable-item\">\r\n\t\t\t\t\t\t\t\t\t\t{p.data}\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</Draggable>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t</Container>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div style={{ display: 'flex', justifyContent: 'stretch', height: '100%' }}>\r\n\t\t\t\t<div className=\"dynamic-left-pane\">\r\n\t\t\t\t\t{this.renderContainer('items1', () => this.state.items1)}\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"dynamic-right-pane\">\r\n\t\t\t\t\t<div className=\"dynamic-menu-container\">\r\n\t\t\t\t\t\t<div className=\"popup-container-button\"\r\n\t\t\t\t\t\t\tonMouseEnter={() => this.setState({ popup1Open: true })}\r\n\t\t\t\t\t\t\tonMouseLeave={() => this.setState({ popup1Open: false })}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tMake Container Visible\r\n\t\t\t\t\t\t\t<div className={`popup-container ${this.state.popup1Open ? 'open' : ''}  ${constants.preventAutoScrollClass}`}>\r\n\t\t\t\t\t\t\t\t{this.renderContainer('items2', () => this.state.items2)}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"popup-container-button\"\r\n\t\t\t\t\t\t\tonMouseEnter={() => this.setState({ popup2Open: true })}\r\n\t\t\t\t\t\t\tonMouseLeave={() => this.setState({ popup2Open: false })}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\tMount New Container\r\n\t\t\t\t\t\t\t{this.state.popup2Open ? <div className={`popup-container ${this.state.popup2Open ? 'open' : ''}`}>\r\n\t\t\t\t\t\t\t\t{this.renderContainer('items3', () => this.state.items3)}\r\n\t\t\t\t\t\t\t</div> : null}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"dynamic-right-content\">\r\n\t\t\t\t\t\t{this.renderContainer('items4', () => this.state.items4)}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nDynamicContainers.propTypes = {\r\n\r\n};\r\n\r\nexport default DynamicContainers;","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport './app.css';\r\nimport '../demo.css';\r\nimport pages from '../pages';\r\n\r\nclass App extends Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.toggleNav = this.toggleNav.bind(this);\r\n\t\tthis.renderMenu = this.renderMenu.bind(this);\r\n\t\tthis.openCode = this.openCode.bind(this);\r\n\t\tthis.state = {\r\n\t\t\tnavOpen: true,\r\n\t\t\tselectedPage: pages[0].pages[0]\r\n\t\t};\r\n\t}\r\n\trender() {\r\n\t\tconst Page = this.state.selectedPage.page;\r\n\t\treturn (\r\n\t\t\t<div className=\"app\">\r\n\t\t\t\t<div className={`nav-button ${this.state.navOpen ? 'open' : ''}`} onClick={this.toggleNav}>\r\n\t\t\t\t\t<span></span>\r\n\t\t\t\t\t<span></span>\r\n\t\t\t\t\t<span></span>\r\n\t\t\t\t\t<span></span>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className={`navigator ${this.state.navOpen ? '' : 'closed'}`}>\r\n\t\t\t\t\t<div className=\"navigator-content\">\r\n\t\t\t\t\t\t<div className=\"navigator-header\">\r\n\t\t\t\t\t\t\t<h3>react-smooth-dnd</h3>\r\n\t\t\t\t\t\t\t<div className=\"divider\"></div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t{this.renderMenu()}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"content\">\r\n\t\t\t\t\t<div className={`header ${this.state.navOpen ? 'open' : ''}`}>\r\n\t\t\t\t\t\t{this.state.selectedPage.title}\r\n\t\t\t\t\t\t<div className=\"source-code\" onClick={this.openCode}>\r\n\t\t\t\t\t\t\t<img src=\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZml0PSIiIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIG1lZXQiIGZvY3VzYWJsZT0iZmFsc2UiPgogICAgPHBhdGggZmlsbD0ibm9uZSIgZD0iTTAgMGgyNHYyNEgwVjB6Ij48L3BhdGg+CiAgICA8cGF0aCBkPSJNOS40IDE2LjZMNC44IDEybDQuNi00LjZMOCA2bC02IDYgNiA2IDEuNC0xLjR6bTUuMiAwbDQuNi00LjYtNC42LTQuNkwxNiA2bDYgNi02IDYtMS40LTEuNHoiIGZpbGw9IiNGRkYiPjwvcGF0aD4KPC9zdmc+Cg==\" alt=\"\" />\t\r\n\t\t\t\t\t\t\t<span>source</span>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"demo\">\r\n\t\t\t\t\t\t<Page />\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\trenderMenu() {\r\n\t\treturn pages.map(section => {\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"menu-section\">\r\n\t\t\t\t\t<h4>{section.title}</h4>\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t{section.pages.map(page => {\r\n\t\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t\t<li className={`${this.state.selectedPage === page ? 'selected': ''}`} onClick={() => { this.setState({ selectedPage: page }); }}>{page.title}</li>\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t})}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\t});\r\n\t}\r\n\r\n\ttoggleNav() {\r\n\t\tthis.setState({\r\n\t\t\tnavOpen: !this.state.navOpen\r\n\t\t});\r\n\t}\r\n\r\n\topenCode() {\r\n\t\tconst url = this.state.selectedPage.url;\r\n\t\twindow.open(url, 'none');\r\n\t}\r\n}\r\n\r\nApp.propTypes = {\r\n\r\n};\r\n\r\nexport default App;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport Vanilla from './Vanilla';\r\nimport Nested from './Nested';\r\nimport Tryout from './Tryout';\r\nimport Demo from './demo/app';\r\n\r\nReactDOM.render(<Demo />, document.getElementById('root'));\r\n"],"sourceRoot":""}